import{a as Qh}from"./chunk-AMEEZKGH.js";import"./chunk-BYXBJQAS.js";import{e as qi}from"./chunk-LO5WMIDP.js";import{Ia as Uo,Nb as Hi,Ob as Bi,Qb as $i,Yb as Pe,Zb as Vi,_a as Li,_b as Fi,a as U,c as J,d as Ee,e as Kh,f as Uh,j as zn,z as ie}from"./chunk-MFWHCUK5.js";var Gi=U(Yi=>{"use strict";var Et=Ee();function Jh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ep=typeof Object.is=="function"?Object.is:Jh,tp=Et.useState,np=Et.useEffect,op=Et.useLayoutEffect,rp=Et.useDebugValue;function ip(e,t){var n=t(),o=tp({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return op(function(){r.value=n,r.getSnapshot=t,Qo(r)&&i({inst:r})},[e,n,t]),np(function(){return Qo(r)&&i({inst:r}),e(function(){Qo(r)&&i({inst:r})})},[e]),rp(n),n}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ep(e,n)}catch{return!0}}function sp(e,t){return t()}var ap=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sp:ip;Yi.useSyncExternalStore=Et.useSyncExternalStore!==void 0?Et.useSyncExternalStore:ap});var Wi=U((y_,Xi)=>{"use strict";Xi.exports=Gi()});var Nl=U(kl=>{"use strict";var Mo=Ee(),eb=Wi();function tb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nb=typeof Object.is=="function"?Object.is:tb,ob=eb.useSyncExternalStore,rb=Mo.useRef,ib=Mo.useEffect,sb=Mo.useMemo,ab=Mo.useDebugValue;kl.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=rb(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=sb(function(){function l(h){if(!c){if(c=!0,d=h,h=o(h),r!==void 0&&s.hasValue){var g=s.value;if(r(g,h))return f=g}return f=h}if(g=f,nb(d,h))return g;var m=o(h);return r!==void 0&&r(g,m)?(d=h,g):(d=h,f=m)}var c=!1,d,f,u=n===void 0?null:n;return[function(){return l(t())},u===null?void 0:function(){return l(u())}]},[t,n,o,r]);var a=ob(e,i[0],i[1]);return ib(function(){s.hasValue=!0,s.value=a},[a]),ab(a),a}});var Cl=U((KS,Sl)=>{"use strict";Sl.exports=Nl()});var zo=U((TC,Wc)=>{"use strict";var xx="\0",gt="\0",Yc="",Ur=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(t){t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[gt]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,r=this;return t.forEach(function(i){o.length>1?r.setNode(i,n):r.setNode(i)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=gt,this._children[t]={},this._children[gt][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var o=r=>n.removeEdge(n._edgeObjs[r]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(r){n.setParent(r)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=gt;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==gt)return n}}children(t=gt){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===gt)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){let r=new Set(n);for(var o of this.successors(t))r.add(o);return Array.from(r.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([s,a]){t(s)&&n.setNode(s,a)}),Object.values(this._edgeObjs).forEach(function(s){n.hasNode(s.v)&&n.hasNode(s.w)&&n.setEdge(s,o.edge(s))});var r={};function i(s){var a=o.parent(s);return a===void 0||n.hasNode(a)?(r[s]=a,a):a in r?r[a]:i(a)}return this._isCompound&&n.nodes().forEach(s=>n.setParent(s,i(s))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,r=arguments;return t.reduce(function(i,s){return r.length>1?o.setEdge(i,s,n):o.setEdge(i,s),s}),this}setEdge(){var t,n,o,r,i=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(t=s.v,n=s.w,o=s.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=s,n=arguments[1],o=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var a=Mn(this._isDirected,t,n,o);if(Object.hasOwn(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,n,o);var l=wx(this._isDirected,t,n,o);return t=l.v,n=l.w,Object.freeze(l),this._edgeObjs[a]=l,Gc(this._preds[n],t),Gc(this._sucs[t],n),this._in[n][a]=l,this._out[t][a]=l,this._edgeCount++,this}edge(t,n,o){var r=arguments.length===1?Kr(this._isDirected,arguments[0]):Mn(this._isDirected,t,n,o);return this._edgeLabels[r]}edgeAsObj(){let t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var r=arguments.length===1?Kr(this._isDirected,arguments[0]):Mn(this._isDirected,t,n,o);return Object.hasOwn(this._edgeLabels,r)}removeEdge(t,n,o){var r=arguments.length===1?Kr(this._isDirected,arguments[0]):Mn(this._isDirected,t,n,o),i=this._edgeObjs[r];return i&&(t=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Xc(this._preds[n],t),Xc(this._sucs[t],n),delete this._in[n][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.v===n):r}}outEdges(t,n){var o=this._out[t];if(o){var r=Object.values(o);return n?r.filter(i=>i.w===n):r}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Gc(e,t){e[t]?e[t]++:e[t]=1}function Xc(e,t){--e[t]||delete e[t]}function Mn(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var s=r;r=i,i=s}return r+Yc+i+Yc+(o===void 0?xx:o)}function wx(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var s=r;r=i,i=s}var a={v:r,w:i};return o&&(a.name=o),a}function Kr(e,t){return Mn(e,t.v,t.w,t.name)}Wc.exports=Ur});var Zc=U((PC,jc)=>{"use strict";jc.exports="2.2.4"});var Uc=U((DC,Kc)=>{"use strict";Kc.exports={Graph:zo(),version:Zc()}});var Jc=U((OC,Qc)=>{"use strict";var vx=zo();Qc.exports={write:_x,read:Nx};function _x(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Ex(e),edges:kx(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function Ex(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),r={v:t};return n!==void 0&&(r.value=n),o!==void 0&&(r.parent=o),r})}function kx(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function Nx(e){var t=new vx(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}});var td=U((RC,ed)=>{"use strict";ed.exports=Sx;function Sx(e){var t={},n=[],o;function r(i){Object.hasOwn(t,i)||(t[i]=!0,o.push(i),e.successors(i).forEach(r),e.predecessors(i).forEach(r))}return e.nodes().forEach(function(i){o=[],r(i),o.length&&n.push(o)}),n}});var Jr=U((zC,nd)=>{"use strict";var Qr=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!Object.hasOwn(o,t)){var r=this._arr,i=r.length;return o[t]=i,r.push({key:t,priority:n}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,r=o+1,i=t;o<n.length&&(i=n[o].priority<n[i].priority?o:i,r<n.length&&(i=n[r].priority<n[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))}_decrease(t){for(var n=this._arr,o=n[t].priority,r;t!==0&&(r=t>>1,!(n[r].priority<o));)this._swap(t,r),t=r}_swap(t,n){var o=this._arr,r=this._keyIndices,i=o[t],s=o[n];o[t]=s,o[n]=i,r[s.key]=t,r[i.key]=n}};nd.exports=Qr});var ei=U((AC,od)=>{"use strict";var Cx=Jr();od.exports=Ix;var Mx=()=>1;function Ix(e,t,n,o){return Tx(e,String(t),n||Mx,o||function(r){return e.outEdges(r)})}function Tx(e,t,n,o){var r={},i=new Cx,s,a,l=function(c){var d=c.v!==s?c.v:c.w,f=r[d],u=n(c),h=a.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+c+" Weight: "+u);h<f.distance&&(f.distance=h,f.predecessor=s,i.decrease(d,h))};for(e.nodes().forEach(function(c){var d=c===t?0:Number.POSITIVE_INFINITY;r[c]={distance:d},i.add(c,d)});i.size()>0&&(s=i.removeMin(),a=r[s],a.distance!==Number.POSITIVE_INFINITY);)o(s).forEach(l);return r}});var id=U((LC,rd)=>{"use strict";var Px=ei();rd.exports=Dx;function Dx(e,t,n){return e.nodes().reduce(function(o,r){return o[r]=Px(e,r,t,n),o},{})}});var ti=U((HC,sd)=>{"use strict";sd.exports=Ox;function Ox(e){var t=0,n=[],o={},r=[];function i(s){var a=o[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach(function(d){Object.hasOwn(o,d)?o[d].onStack&&(a.lowlink=Math.min(a.lowlink,o[d].index)):(i(d),a.lowlink=Math.min(a.lowlink,o[d].lowlink))}),a.lowlink===a.index){var l=[],c;do c=n.pop(),o[c].onStack=!1,l.push(c);while(s!==c);r.push(l)}}return e.nodes().forEach(function(s){Object.hasOwn(o,s)||i(s)}),r}});var ld=U((BC,ad)=>{"use strict";var Rx=ti();ad.exports=zx;function zx(e){return Rx(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}});var dd=U(($C,cd)=>{"use strict";cd.exports=Lx;var Ax=()=>1;function Lx(e,t,n){return Hx(e,t||Ax,n||function(o){return e.outEdges(o)})}function Hx(e,t,n){var o={},r=e.nodes();return r.forEach(function(i){o[i]={},o[i][i]={distance:0},r.forEach(function(s){i!==s&&(o[i][s]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(s){var a=s.v===i?s.w:s.v,l=t(s);o[i][a]={distance:l,predecessor:i}})}),r.forEach(function(i){var s=o[i];r.forEach(function(a){var l=o[a];r.forEach(function(c){var d=l[i],f=s[c],u=l[c],h=d.distance+f.distance;h<u.distance&&(u.distance=h,u.predecessor=f.predecessor)})})}),o}});var ni=U((VC,fd)=>{"use strict";function ud(e){var t={},n={},o=[];function r(i){if(Object.hasOwn(n,i))throw new In;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(r),delete n[i],o.push(i))}if(e.sinks().forEach(r),Object.keys(t).length!==e.nodeCount())throw new In;return o}var In=class extends Error{constructor(){super(...arguments)}};fd.exports=ud;ud.CycleException=In});var md=U((FC,pd)=>{"use strict";var hd=ni();pd.exports=Bx;function Bx(e){try{hd(e)}catch(t){if(t instanceof hd.CycleException)return!1;throw t}return!0}});var oi=U((qC,bd)=>{"use strict";bd.exports=$x;function $x(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?a=>e.successors(a):a=>e.neighbors(a),r=n==="post"?Vx:Fx,i=[],s={};return t.forEach(a=>{if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);r(a,o,s,i)}),i}function Vx(e,t,n,o){for(var r=[[e,!1]];r.length>0;){var i=r.pop();i[1]?o.push(i[0]):Object.hasOwn(n,i[0])||(n[i[0]]=!0,r.push([i[0],!0]),gd(t(i[0]),s=>r.push([s,!1])))}}function Fx(e,t,n,o){for(var r=[e];r.length>0;){var i=r.pop();Object.hasOwn(n,i)||(n[i]=!0,o.push(i),gd(t(i),s=>r.push(s)))}}function gd(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}});var xd=U((YC,yd)=>{"use strict";var qx=oi();yd.exports=Yx;function Yx(e,t){return qx(e,t,"post")}});var vd=U((GC,wd)=>{"use strict";var Gx=oi();wd.exports=Xx;function Xx(e,t){return Gx(e,t,"pre")}});var Ed=U((XC,_d)=>{"use strict";var Wx=zo(),jx=Jr();_d.exports=Zx;function Zx(e,t){var n=new Wx,o={},r=new jx,i;function s(l){var c=l.v===i?l.w:l.v,d=r.priority(c);if(d!==void 0){var f=t(l);f<d&&(o[c]=i,r.decrease(c,f))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(l){r.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),r.decrease(e.nodes()[0],0);for(var a=!1;r.size()>0;){if(i=r.removeMin(),Object.hasOwn(o,i))n.setEdge(i,o[i]);else{if(a)throw new Error("Input graph is not connected: "+e);a=!0}e.nodeEdges(i).forEach(s)}return n}});var Nd=U((WC,kd)=>{"use strict";kd.exports={components:td(),dijkstra:ei(),dijkstraAll:id(),findCycles:ld(),floydWarshall:dd(),isAcyclic:md(),postorder:xd(),preorder:vd(),prim:Ed(),tarjan:ti(),topsort:ni()}});var Ce=U((jC,Cd)=>{"use strict";var Sd=Uc();Cd.exports={Graph:Sd.Graph,json:Jc(),alg:Nd(),version:Sd.version}});var Td=U((ZC,Id)=>{"use strict";var ri=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Md(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Md(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,Kx)),o=o._prev;return"["+t.join(", ")+"]"}};function Md(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Kx(e,t){if(e!=="_next"&&e!=="_prev")return t}Id.exports=ri});var Dd=U((KC,Pd)=>{"use strict";var Ux=Ce().Graph,Qx=Td();Pd.exports=ew;var Jx=()=>1;function ew(e,t){if(e.nodeCount()<=1)return[];let n=nw(e,t||Jx);return tw(n.graph,n.buckets,n.zeroIdx).flatMap(r=>e.outEdges(r.v,r.w))}function tw(e,t,n){let o=[],r=t[t.length-1],i=t[0],s;for(;e.nodeCount();){for(;s=i.dequeue();)ii(e,t,n,s);for(;s=r.dequeue();)ii(e,t,n,s);if(e.nodeCount()){for(let a=t.length-2;a>0;--a)if(s=t[a].dequeue(),s){o=o.concat(ii(e,t,n,s,!0));break}}}return o}function ii(e,t,n,o,r){let i=r?[]:void 0;return e.inEdges(o.v).forEach(s=>{let a=e.edge(s),l=e.node(s.v);r&&i.push({v:s.v,w:s.w}),l.out-=a,si(t,n,l)}),e.outEdges(o.v).forEach(s=>{let a=e.edge(s),l=s.w,c=e.node(l);c.in-=a,si(t,n,c)}),e.removeNode(o.v),i}function nw(e,t){let n=new Ux,o=0,r=0;e.nodes().forEach(a=>{n.setNode(a,{v:a,in:0,out:0})}),e.edges().forEach(a=>{let l=n.edge(a.v,a.w)||0,c=t(a),d=l+c;n.setEdge(a.v,a.w,d),r=Math.max(r,n.node(a.v).out+=c),o=Math.max(o,n.node(a.w).in+=c)});let i=ow(r+o+3).map(()=>new Qx),s=o+1;return n.nodes().forEach(a=>{si(i,s,n.node(a))}),{graph:n,buckets:i,zeroIdx:s}}function si(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function ow(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}});var de=U((UC,Bd)=>{"use strict";var Od=Ce().Graph;Bd.exports={addBorderNode:fw,addDummyNode:Rd,applyWithChunking:Ao,asNonCompoundGraph:iw,buildLayerMatrix:cw,intersectRect:lw,mapValues:xw,maxRank:Ad,normalizeRanks:dw,notime:gw,partition:pw,pick:yw,predecessorWeights:aw,range:Hd,removeEmptyRanks:uw,simplify:rw,successorWeights:sw,time:mw,uniqueId:Ld,zipObject:ai};function Rd(e,t,n,o){let r;do r=Ld(o);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function rw(e){let t=new Od().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t}function iw(e){let t=new Od({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function sw(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(r=>{o[r.w]=(o[r.w]||0)+e.edge(r).weight}),o});return ai(e.nodes(),t)}function aw(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(r=>{o[r.v]=(o[r.v]||0)+e.edge(r).weight}),o});return ai(e.nodes(),t)}function lw(e,t){let n=e.x,o=e.y,r=t.x-n,i=t.y-o,s=e.width/2,a=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let l,c;return Math.abs(i)*s>Math.abs(r)*a?(i<0&&(a=-a),l=a*r/i,c=a):(r<0&&(s=-s),l=s,c=s*i/r),{x:n+l,y:o+c}}function cw(e){let t=Hd(Ad(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),r=o.rank;r!==void 0&&(t[r][o.order]=n)}),t}function dw(e){let t=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MAX_VALUE:r}),n=Ao(Math.min,t);e.nodes().forEach(o=>{let r=e.node(o);Object.hasOwn(r,"rank")&&(r.rank-=n)})}function uw(e){let t=e.nodes().map(s=>e.node(s).rank),n=Ao(Math.min,t),o=[];e.nodes().forEach(s=>{let a=e.node(s).rank-n;o[a]||(o[a]=[]),o[a].push(s)});let r=0,i=e.graph().nodeRankFactor;Array.from(o).forEach((s,a)=>{s===void 0&&a%i!==0?--r:s!==void 0&&r&&s.forEach(l=>e.node(l).rank+=r)})}function fw(e,t,n,o){let r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=o),Rd(e,"border",r,t)}function hw(e,t=zd){let n=[];for(let o=0;o<e.length;o+=t){let r=e.slice(o,o+t);n.push(r)}return n}var zd=65535;function Ao(e,t){if(t.length>zd){let n=hw(t);return e.apply(null,n.map(o=>e.apply(null,o)))}else return e.apply(null,t)}function Ad(e){let n=e.nodes().map(o=>{let r=e.node(o).rank;return r===void 0?Number.MIN_VALUE:r});return Ao(Math.max,n)}function pw(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function mw(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function gw(e,t){return t()}var bw=0;function Ld(e){var t=++bw;return toString(e)+t}function Hd(e,t,n=1){t==null&&(t=e,e=0);let o=i=>i<t;n<0&&(o=i=>t<i);let r=[];for(let i=e;o(i);i+=n)r.push(i);return r}function yw(e,t){let n={};for(let o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function xw(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[r,i])=>(o[r]=n(i,r),o),{})}function ai(e,t){return e.reduce((n,o,r)=>(n[o]=t[r],n),{})}});var Vd=U((QC,$d)=>{"use strict";var ww=Dd(),vw=de().uniqueId;$d.exports={run:_w,undo:kw};function _w(e){(e.graph().acyclicer==="greedy"?ww(e,n(e)):Ew(e)).forEach(o=>{let r=e.edge(o);e.removeEdge(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,vw("rev"))});function n(o){return r=>o.edge(r).weight}}function Ew(e){let t=[],n={},o={};function r(i){Object.hasOwn(o,i)||(o[i]=!0,n[i]=!0,e.outEdges(i).forEach(s=>{Object.hasOwn(n,s.w)?t.push(s):r(s.w)}),delete n[i])}return e.nodes().forEach(r),t}function kw(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}});var qd=U((JC,Fd)=>{"use strict";var Nw=de();Fd.exports={run:Sw,undo:Mw};function Sw(e){e.graph().dummyChains=[],e.edges().forEach(t=>Cw(e,t))}function Cw(e,t){let n=t.v,o=e.node(n).rank,r=t.w,i=e.node(r).rank,s=t.name,a=e.edge(t),l=a.labelRank;if(i===o+1)return;e.removeEdge(t);let c,d,f;for(f=0,++o;o<i;++f,++o)a.points=[],d={width:0,height:0,edgeLabel:a,edgeObj:t,rank:o},c=Nw.addDummyNode(e,"edge",d,"_d"),o===l&&(d.width=a.width,d.height=a.height,d.dummy="edge-label",d.labelpos=a.labelpos),e.setEdge(n,c,{weight:a.weight},s),f===0&&e.graph().dummyChains.push(c),n=c;e.setEdge(n,r,{weight:a.weight},s)}function Mw(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,r;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})}});var Tn=U((eM,Yd)=>{"use strict";var{applyWithChunking:Iw}=de();Yd.exports={longestPath:Tw,slack:Pw};function Tw(e){var t={};function n(o){var r=e.node(o);if(Object.hasOwn(t,o))return r.rank;t[o]=!0;let i=e.outEdges(o).map(a=>a==null?Number.POSITIVE_INFINITY:n(a.w)-e.edge(a).minlen);var s=Iw(Math.min,i);return s===Number.POSITIVE_INFINITY&&(s=0),r.rank=s}e.sources().forEach(n)}function Pw(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}});var li=U((tM,Gd)=>{"use strict";var Dw=Ce().Graph,Lo=Tn().slack;Gd.exports=Ow;function Ow(e){var t=new Dw({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var r,i;Rw(t,e)<o;)r=zw(t,e),i=t.hasNode(r.v)?Lo(e,r):-Lo(e,r),Aw(t,e,i);return t}function Rw(e,t){function n(o){t.nodeEdges(o).forEach(r=>{var i=r.v,s=o===i?r.w:i;!e.hasNode(s)&&!Lo(t,r)&&(e.setNode(s,{}),e.setEdge(o,s,{}),n(s))})}return e.nodes().forEach(n),e.nodeCount()}function zw(e,t){return t.edges().reduce((o,r)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(i=Lo(t,r)),i<o[0]?[i,r]:o},[Number.POSITIVE_INFINITY,null])[1]}function Aw(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}});var eu=U((nM,Jd)=>{"use strict";var Lw=li(),Xd=Tn().slack,Hw=Tn().longestPath,Bw=Ce().alg.preorder,$w=Ce().alg.postorder,Vw=de().simplify;Jd.exports=bt;bt.initLowLimValues=di;bt.initCutValues=ci;bt.calcCutValue=jd;bt.leaveEdge=Kd;bt.enterEdge=Ud;bt.exchangeEdges=Qd;function bt(e){e=Vw(e),Hw(e);var t=Lw(e);di(t),ci(t,e);for(var n,o;n=Kd(t);)o=Ud(t,e,n),Qd(t,e,n,o)}function ci(e,t){var n=$w(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>Fw(e,t,o))}function Fw(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=jd(e,t,n)}function jd(e,t,n){var o=e.node(n),r=o.parent,i=!0,s=t.edge(n,r),a=0;return s||(i=!1,s=t.edge(r,n)),a=s.weight,t.nodeEdges(n).forEach(l=>{var c=l.v===n,d=c?l.w:l.v;if(d!==r){var f=c===i,u=t.edge(l).weight;if(a+=f?u:-u,Yw(e,n,d)){var h=e.edge(n,d).cutvalue;a+=f?-h:h}}}),a}function di(e,t){arguments.length<2&&(t=e.nodes()[0]),Zd(e,{},1,t)}function Zd(e,t,n,o,r){var i=n,s=e.node(o);return t[o]=!0,e.neighbors(o).forEach(a=>{Object.hasOwn(t,a)||(n=Zd(e,t,n,a,o))}),s.low=i,s.lim=n++,r?s.parent=r:delete s.parent,n}function Kd(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Ud(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var i=e.node(o),s=e.node(r),a=i,l=!1;i.lim>s.lim&&(a=s,l=!0);var c=t.edges().filter(d=>l===Wd(e,e.node(d.v),a)&&l!==Wd(e,e.node(d.w),a));return c.reduce((d,f)=>Xd(t,f)<Xd(t,d)?f:d)}function Qd(e,t,n,o){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),di(e),ci(e,t),qw(e,t)}function qw(e,t){var n=e.nodes().find(r=>!t.node(r).parent),o=Bw(e,n);o=o.slice(1),o.forEach(r=>{var i=e.node(r).parent,s=t.edge(r,i),a=!1;s||(s=t.edge(i,r),a=!0),t.node(r).rank=t.node(i).rank+(a?s.minlen:-s.minlen)})}function Yw(e,t,n){return e.hasEdge(t,n)}function Wd(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}});var ru=U((oM,ou)=>{"use strict";var Gw=Tn(),nu=Gw.longestPath,Xw=li(),Ww=eu();ou.exports=jw;function jw(e){switch(e.graph().ranker){case"network-simplex":tu(e);break;case"tight-tree":Kw(e);break;case"longest-path":Zw(e);break;default:tu(e)}}var Zw=nu;function Kw(e){nu(e),Xw(e)}function tu(e){Ww(e)}});var su=U((rM,iu)=>{"use strict";iu.exports=Uw;function Uw(e){let t=Jw(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),r=o.edgeObj,i=Qw(e,t,r.v,r.w),s=i.path,a=i.lca,l=0,c=s[l],d=!0;for(;n!==r.w;){if(o=e.node(n),d){for(;(c=s[l])!==a&&e.node(c).maxRank<o.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(c=s[l+1]).minRank<=o.rank;)l++;c=s[l]}e.setParent(n,c),n=e.successors(n)[0]}})}function Qw(e,t,n,o){let r=[],i=[],s=Math.min(t[n].low,t[o].low),a=Math.max(t[n].lim,t[o].lim),l,c;l=n;do l=e.parent(l),r.push(l);while(l&&(t[l].low>s||a>t[l].lim));for(c=l,l=o;(l=e.parent(l))!==c;)i.push(l);return{path:r.concat(i.reverse()),lca:c}}function Jw(e){let t={},n=0;function o(r){let i=n;e.children(r).forEach(o),t[r]={low:i,lim:n++}}return e.children().forEach(o),t}});var cu=U((iM,lu)=>{"use strict";var Ho=de();lu.exports={run:e0,cleanup:o0};function e0(e){let t=Ho.addDummyNode(e,"root",{},"_root"),n=t0(e),o=Object.values(n),r=Ho.applyWithChunking(Math.max,o)-1,i=2*r+1;e.graph().nestingRoot=t,e.edges().forEach(a=>e.edge(a).minlen*=i);let s=n0(e)+1;e.children().forEach(a=>au(e,t,i,s,r,n,a)),e.graph().nodeRankFactor=i}function au(e,t,n,o,r,i,s){let a=e.children(s);if(!a.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}let l=Ho.addBorderNode(e,"_bt"),c=Ho.addBorderNode(e,"_bb"),d=e.node(s);e.setParent(l,s),d.borderTop=l,e.setParent(c,s),d.borderBottom=c,a.forEach(f=>{au(e,t,n,o,r,i,f);let u=e.node(f),h=u.borderTop?u.borderTop:f,g=u.borderBottom?u.borderBottom:f,m=u.borderTop?o:2*o,w=h!==g?1:r-i[s]+1;e.setEdge(l,h,{weight:m,minlen:w,nestingEdge:!0}),e.setEdge(g,c,{weight:m,minlen:w,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:r+i[s]})}function t0(e){var t={};function n(o,r){var i=e.children(o);i&&i.length&&i.forEach(s=>n(s,r+1)),t[o]=r}return e.children().forEach(o=>n(o,1)),t}function n0(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function o0(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}});var fu=U((sM,uu)=>{"use strict";var r0=de();uu.exports=i0;function i0(e){function t(n){let o=e.children(n),r=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let i=r.minRank,s=r.maxRank+1;i<s;++i)du(e,"borderLeft","_bl",n,r,i),du(e,"borderRight","_br",n,r,i)}}e.children().forEach(t)}function du(e,t,n,o,r,i){let s={width:0,height:0,rank:i,borderType:t},a=r[t][i-1],l=r0.addDummyNode(e,"border",s,n);r[t][i]=l,e.setParent(l,o),a&&e.setEdge(a,l,{weight:1})}});var gu=U((aM,mu)=>{"use strict";mu.exports={adjust:s0,undo:a0};function s0(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&pu(e)}function a0(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&l0(e),(t==="lr"||t==="rl")&&(c0(e),pu(e))}function pu(e){e.nodes().forEach(t=>hu(e.node(t))),e.edges().forEach(t=>hu(e.edge(t)))}function hu(e){let t=e.width;e.width=e.height,e.height=t}function l0(e){e.nodes().forEach(t=>ui(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(ui),Object.hasOwn(n,"y")&&ui(n)})}function ui(e){e.y=-e.y}function c0(e){e.nodes().forEach(t=>fi(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(fi),Object.hasOwn(n,"x")&&fi(n)})}function fi(e){let t=e.x;e.x=e.y,e.y=t}});var xu=U((lM,yu)=>{"use strict";var bu=de();yu.exports=d0;function d0(e){let t={},n=e.nodes().filter(l=>!e.children(l).length),o=n.map(l=>e.node(l).rank),r=bu.applyWithChunking(Math.max,o),i=bu.range(r+1).map(()=>[]);function s(l){if(t[l])return;t[l]=!0;let c=e.node(l);i[c.rank].push(l),e.successors(l).forEach(s)}return n.sort((l,c)=>e.node(l).rank-e.node(c).rank).forEach(s),i}});var vu=U((cM,wu)=>{"use strict";var u0=de().zipObject;wu.exports=f0;function f0(e,t){let n=0;for(let o=1;o<t.length;++o)n+=h0(e,t[o-1],t[o]);return n}function h0(e,t,n){let o=u0(n,n.map((c,d)=>d)),r=t.flatMap(c=>e.outEdges(c).map(d=>({pos:o[d.w],weight:e.edge(d).weight})).sort((d,f)=>d.pos-f.pos)),i=1;for(;i<n.length;)i<<=1;let s=2*i-1;i-=1;let a=new Array(s).fill(0),l=0;return r.forEach(c=>{let d=c.pos+i;a[d]+=c.weight;let f=0;for(;d>0;)d%2&&(f+=a[d+1]),d=d-1>>1,a[d]+=c.weight;l+=c.weight*f}),l}});var Eu=U((dM,_u)=>{"use strict";_u.exports=p0;function p0(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let r=o.reduce((i,s)=>{let a=e.edge(s),l=e.node(s.v);return{sum:i.sum+a.weight*l.order,weight:i.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}});var Nu=U((uM,ku)=>{"use strict";var m0=de();ku.exports=g0;function g0(e,t){let n={};e.forEach((r,i)=>{let s=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};r.barycenter!==void 0&&(s.barycenter=r.barycenter,s.weight=r.weight)}),t.edges().forEach(r=>{let i=n[r.v],s=n[r.w];i!==void 0&&s!==void 0&&(s.indegree++,i.out.push(n[r.w]))});let o=Object.values(n).filter(r=>!r.indegree);return b0(o)}function b0(e){let t=[];function n(r){return i=>{i.merged||(i.barycenter===void 0||r.barycenter===void 0||i.barycenter>=r.barycenter)&&y0(r,i)}}function o(r){return i=>{i.in.push(r),--i.indegree===0&&e.push(i)}}for(;e.length;){let r=e.pop();t.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(o(r))}return t.filter(r=>!r.merged).map(r=>m0.pick(r,["vs","i","barycenter","weight"]))}function y0(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}});var Mu=U((fM,Cu)=>{"use strict";var x0=de();Cu.exports=w0;function w0(e,t){let n=x0.partition(e,d=>Object.hasOwn(d,"barycenter")),o=n.lhs,r=n.rhs.sort((d,f)=>f.i-d.i),i=[],s=0,a=0,l=0;o.sort(v0(!!t)),l=Su(i,r,l),o.forEach(d=>{l+=d.vs.length,i.push(d.vs),s+=d.barycenter*d.weight,a+=d.weight,l=Su(i,r,l)});let c={vs:i.flat(!0)};return a&&(c.barycenter=s/a,c.weight=a),c}function Su(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function v0(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}});var Pu=U((hM,Tu)=>{"use strict";var _0=Eu(),E0=Nu(),k0=Mu();Tu.exports=Iu;function Iu(e,t,n,o){let r=e.children(t),i=e.node(t),s=i?i.borderLeft:void 0,a=i?i.borderRight:void 0,l={};s&&(r=r.filter(u=>u!==s&&u!==a));let c=_0(e,r);c.forEach(u=>{if(e.children(u.v).length){let h=Iu(e,u.v,n,o);l[u.v]=h,Object.hasOwn(h,"barycenter")&&S0(u,h)}});let d=E0(c,n);N0(d,l);let f=k0(d,o);if(s&&(f.vs=[s,f.vs,a].flat(!0),e.predecessors(s).length)){let u=e.node(e.predecessors(s)[0]),h=e.node(e.predecessors(a)[0]);Object.hasOwn(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+u.order+h.order)/(f.weight+2),f.weight+=2}return f}function N0(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function S0(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}});var Ou=U((pM,Du)=>{"use strict";var C0=Ce().Graph,M0=de();Du.exports=I0;function I0(e,t,n){let o=T0(e),r=new C0({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{let s=e.node(i),a=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(r.setNode(i),r.setParent(i,a||o),e[n](i).forEach(l=>{let c=l.v===i?l.w:l.v,d=r.edge(c,i),f=d!==void 0?d.weight:0;r.setEdge(c,i,{weight:e.edge(l).weight+f})}),Object.hasOwn(s,"minRank")&&r.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),r}function T0(e){for(var t;e.hasNode(t=M0.uniqueId("_root")););return t}});var zu=U((mM,Ru)=>{"use strict";Ru.exports=P0;function P0(e,t,n){let o={},r;n.forEach(i=>{let s=e.parent(i),a,l;for(;s;){if(a=e.parent(s),a?(l=o[a],o[a]=s):(l=r,r=s),l&&l!==s){t.setEdge(l,s);return}s=a}})}});var $u=U((gM,Bu)=>{"use strict";var D0=xu(),O0=vu(),R0=Pu(),z0=Ou(),A0=zu(),L0=Ce().Graph,Bo=de();Bu.exports=Hu;function Hu(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Hu);return}let n=Bo.maxRank(e),o=Au(e,Bo.range(1,n+1),"inEdges"),r=Au(e,Bo.range(n-1,-1,-1),"outEdges"),i=D0(e);if(Lu(e,i),t&&t.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,a;for(let l=0,c=0;c<4;++l,++c){H0(l%2?o:r,l%4>=2),i=Bo.buildLayerMatrix(e);let d=O0(e,i);d<s&&(c=0,a=Object.assign({},i),s=d)}Lu(e,a)}function Au(e,t,n){return t.map(function(o){return z0(e,o,n)})}function H0(e,t){let n=new L0;e.forEach(function(o){let r=o.graph().root,i=R0(o,r,n,t);i.vs.forEach((s,a)=>o.node(s).order=a),A0(o,n,i.vs)})}function Lu(e,t){Object.values(t).forEach(n=>n.forEach((o,r)=>e.node(o).order=r))}});var Ku=U((bM,Zu)=>{"use strict";var B0=Ce().Graph,qe=de();Zu.exports={positionX:F0,findType1Conflicts:Vu,findType2Conflicts:Fu,addConflict:hi,hasConflict:qu,verticalAlignment:Yu,horizontalCompaction:Gu,alignCoordinates:Wu,findSmallestWidthAlignment:Xu,balance:ju};function Vu(e,t){let n={};function o(r,i){let s=0,a=0,l=r.length,c=i[i.length-1];return i.forEach((d,f)=>{let u=$0(e,d),h=u?e.node(u).order:l;(u||d===c)&&(i.slice(a,f+1).forEach(g=>{e.predecessors(g).forEach(m=>{let w=e.node(m),x=w.order;(x<s||h<x)&&!(w.dummy&&e.node(g).dummy)&&hi(n,m,g)})}),a=f+1,s=h)}),i}return t.length&&t.reduce(o),n}function Fu(e,t){let n={};function o(i,s,a,l,c){let d;qe.range(s,a).forEach(f=>{d=i[f],e.node(d).dummy&&e.predecessors(d).forEach(u=>{let h=e.node(u);h.dummy&&(h.order<l||h.order>c)&&hi(n,u,d)})})}function r(i,s){let a=-1,l,c=0;return s.forEach((d,f)=>{if(e.node(d).dummy==="border"){let u=e.predecessors(d);u.length&&(l=e.node(u[0]).order,o(s,c,f,a,l),c=f,a=l)}o(s,c,s.length,l,i.length)}),s}return t.length&&t.reduce(r),n}function $0(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function hi(e,t,n){if(t>n){let r=t;t=n,n=r}let o=e[t];o||(e[t]=o={}),o[n]=!0}function qu(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&Object.hasOwn(e[t],n)}function Yu(e,t,n,o){let r={},i={},s={};return t.forEach(a=>{a.forEach((l,c)=>{r[l]=l,i[l]=l,s[l]=c})}),t.forEach(a=>{let l=-1;a.forEach(c=>{let d=o(c);if(d.length){d=d.sort((u,h)=>s[u]-s[h]);let f=(d.length-1)/2;for(let u=Math.floor(f),h=Math.ceil(f);u<=h;++u){let g=d[u];i[c]===c&&l<s[g]&&!qu(n,c,g)&&(i[g]=c,i[c]=r[c]=r[g],l=s[g])}}})}),{root:r,align:i}}function Gu(e,t,n,o,r){let i={},s=V0(e,t,n,r),a=r?"borderLeft":"borderRight";function l(f,u){let h=s.nodes(),g=h.pop(),m={};for(;g;)m[g]?f(g):(m[g]=!0,h.push(g),h=h.concat(u(g))),g=h.pop()}function c(f){i[f]=s.inEdges(f).reduce((u,h)=>Math.max(u,i[h.v]+s.edge(h)),0)}function d(f){let u=s.outEdges(f).reduce((g,m)=>Math.min(g,i[m.w]-s.edge(m)),Number.POSITIVE_INFINITY),h=e.node(f);u!==Number.POSITIVE_INFINITY&&h.borderType!==a&&(i[f]=Math.max(i[f],u))}return l(c,s.predecessors.bind(s)),l(d,s.successors.bind(s)),Object.keys(o).forEach(f=>i[f]=i[n[f]]),i}function V0(e,t,n,o){let r=new B0,i=e.graph(),s=q0(i.nodesep,i.edgesep,o);return t.forEach(a=>{let l;a.forEach(c=>{let d=n[c];if(r.setNode(d),l){var f=n[l],u=r.edge(f,d);r.setEdge(f,d,Math.max(s(e,c,l),u||0))}l=c})}),r}function Xu(e,t){return Object.values(t).reduce((n,o)=>{let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([a,l])=>{let c=Y0(e,a)/2;r=Math.max(l+c,r),i=Math.min(l-c,i)});let s=r-i;return s<n[0]&&(n=[s,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function Wu(e,t){let n=Object.values(t),o=qe.applyWithChunking(Math.min,n),r=qe.applyWithChunking(Math.max,n);["u","d"].forEach(i=>{["l","r"].forEach(s=>{let a=i+s,l=e[a];if(l===t)return;let c=Object.values(l),d=o-qe.applyWithChunking(Math.min,c);s!=="l"&&(d=r-qe.applyWithChunking(Math.max,c)),d&&(e[a]=qe.mapValues(l,f=>f+d))})})}function ju(e,t){return qe.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let r=Object.values(e).map(i=>i[o]).sort((i,s)=>i-s);return(r[1]+r[2])/2}})}function F0(e){let t=qe.buildLayerMatrix(e),n=Object.assign(Vu(e,t),Fu(e,t)),o={},r;["u","d"].forEach(s=>{r=s==="u"?t:Object.values(t).reverse(),["l","r"].forEach(a=>{a==="r"&&(r=r.map(f=>Object.values(f).reverse()));let l=(s==="u"?e.predecessors:e.successors).bind(e),c=Yu(e,r,n,l),d=Gu(e,r,c.root,c.align,a==="r");a==="r"&&(d=qe.mapValues(d,f=>-f)),o[s+a]=d})});let i=Xu(e,o);return Wu(o,i),ju(o,e.graph().align)}function q0(e,t,n){return(o,r,i)=>{let s=o.node(r),a=o.node(i),l=0,c;if(l+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":c=-s.width/2;break;case"r":c=s.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(s.dummy?t:e)/2,l+=(a.dummy?t:e)/2,l+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=a.width/2;break;case"r":c=-a.width/2;break}return c&&(l+=n?c:-c),c=0,l}}function Y0(e,t){return e.node(t).width}});var Ju=U((yM,Qu)=>{"use strict";var Uu=de(),G0=Ku().positionX;Qu.exports=X0;function X0(e){e=Uu.asNonCompoundGraph(e),W0(e),Object.entries(G0(e)).forEach(([t,n])=>e.node(t).x=n)}function W0(e){let t=Uu.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(r=>{let i=r.reduce((s,a)=>{let l=e.node(a).height;return s>l?s:l},0);r.forEach(s=>e.node(s).y=o+i/2),o+=i+n})}});var af=U((xM,sf)=>{"use strict";var ef=Vd(),tf=qd(),j0=ru(),Z0=de().normalizeRanks,K0=su(),U0=de().removeEmptyRanks,nf=cu(),Q0=fu(),of=gu(),J0=$u(),ev=Ju(),Me=de(),tv=Ce().Graph;sf.exports=nv;function nv(e,t){let n=t&&t.debugTiming?Me.time:Me.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>fv(e));n("  runLayout",()=>ov(o,n,t)),n("  updateInputGraph",()=>rv(e,o))})}function ov(e,t,n){t("    makeSpaceForEdgeLabels",()=>hv(e)),t("    removeSelfEdges",()=>_v(e)),t("    acyclic",()=>ef.run(e)),t("    nestingGraph.run",()=>nf.run(e)),t("    rank",()=>j0(Me.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>pv(e)),t("    removeEmptyRanks",()=>U0(e)),t("    nestingGraph.cleanup",()=>nf.cleanup(e)),t("    normalizeRanks",()=>Z0(e)),t("    assignRankMinMax",()=>mv(e)),t("    removeEdgeLabelProxies",()=>gv(e)),t("    normalize.run",()=>tf.run(e)),t("    parentDummyChains",()=>K0(e)),t("    addBorderSegments",()=>Q0(e)),t("    order",()=>J0(e,n)),t("    insertSelfEdges",()=>Ev(e)),t("    adjustCoordinateSystem",()=>of.adjust(e)),t("    position",()=>ev(e)),t("    positionSelfEdges",()=>kv(e)),t("    removeBorderNodes",()=>vv(e)),t("    normalize.undo",()=>tf.undo(e)),t("    fixupEdgeLabelCoords",()=>xv(e)),t("    undoCoordinateSystem",()=>of.undo(e)),t("    translateGraph",()=>bv(e)),t("    assignNodeIntersects",()=>yv(e)),t("    reversePoints",()=>wv(e)),t("    acyclic.undo",()=>ef.undo(e))}function rv(e,t){e.nodes().forEach(n=>{let o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,o.rank=r.rank,t.children(n).length&&(o.width=r.width,o.height=r.height))}),e.edges().forEach(n=>{let o=e.edge(n),r=t.edge(n);o.points=r.points,Object.hasOwn(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var iv=["nodesep","edgesep","ranksep","marginx","marginy"],sv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},av=["acyclicer","ranker","rankdir","align"],lv=["width","height"],rf={width:0,height:0},cv=["minlen","weight","width","height","labeloffset"],dv={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},uv=["labelpos"];function fv(e){let t=new tv({multigraph:!0,compound:!0}),n=mi(e.graph());return t.setGraph(Object.assign({},sv,pi(n,iv),Me.pick(n,av))),e.nodes().forEach(o=>{let r=mi(e.node(o)),i=pi(r,lv);Object.keys(rf).forEach(s=>{i[s]===void 0&&(i[s]=rf[s])}),t.setNode(o,i),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let r=mi(e.edge(o));t.setEdge(o,Object.assign({},dv,pi(r,cv),Me.pick(r,uv)))}),t}function hv(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function pv(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),i={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};Me.addDummyNode(e,"edge-proxy",i,"_ep")}})}function mv(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function gv(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function bv(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,i=e.graph(),s=i.marginx||0,a=i.marginy||0;function l(c){let d=c.x,f=c.y,u=c.width,h=c.height;t=Math.min(t,d-u/2),n=Math.max(n,d+u/2),o=Math.min(o,f-h/2),r=Math.max(r,f+h/2)}e.nodes().forEach(c=>l(e.node(c))),e.edges().forEach(c=>{let d=e.edge(c);Object.hasOwn(d,"x")&&l(d)}),t-=s,o-=a,e.nodes().forEach(c=>{let d=e.node(c);d.x-=t,d.y-=o}),e.edges().forEach(c=>{let d=e.edge(c);d.points.forEach(f=>{f.x-=t,f.y-=o}),Object.hasOwn(d,"x")&&(d.x-=t),Object.hasOwn(d,"y")&&(d.y-=o)}),i.width=n-t+s,i.height=r-o+a}function yv(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),r=e.node(t.w),i,s;n.points?(i=n.points[0],s=n.points[n.points.length-1]):(n.points=[],i=r,s=o),n.points.unshift(Me.intersectRect(o,i)),n.points.push(Me.intersectRect(r,s))})}function xv(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function wv(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function vv(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(n.borderLeft[n.borderLeft.length-1]),s=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-i.x),n.height=Math.abs(r.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function _v(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Ev(e){var t=Me.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((r,i)=>{var s=e.node(r);s.order=i+o,(s.selfEdges||[]).forEach(a=>{Me.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:i+ ++o,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function kv(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,s=n.x-r,a=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*s/3,y:i-a},{x:r+5*s/6,y:i-a},{x:r+s,y:i},{x:r+5*s/6,y:i+a},{x:r+2*s/3,y:i+a}],n.label.x=n.x,n.label.y=n.y}})}function pi(e,t){return Me.mapValues(Me.pick(e,t),Number)}function mi(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}});var cf=U((wM,lf)=>{"use strict";var Nv=de(),Sv=Ce().Graph;lf.exports={debugOrdering:Cv};function Cv(e){let t=Nv.buildLayerMatrix(e),n=new Sv({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,r)=>{let i="layer"+r;n.setNode(i,{rank:"same"}),o.reduce((s,a)=>(n.setEdge(s,a,{style:"invis"}),a))}),n}});var uf=U((vM,df)=>{"use strict";df.exports="1.1.4"});var hf=U((_M,ff)=>{"use strict";ff.exports={graphlib:Ce(),layout:af(),debug:cf(),util:{time:de().time,notime:de().notime},version:uf()}});var Zf=J(Uh());var ji=J(Ee());var Ki=J(ie()),Jo=(0,ji.createContext)(void 0),Zi=({children:e})=>{let t=Fi();return(0,Ki.jsx)(Jo.Provider,{value:{...qi(t),handleConnection(n){t?.extensionRpc.action("handleConnection",{connection:n})},handleEdgeChanges(n){t?.extensionRpc.action("handleEdgeChanges",{changes:n})},handleNodeChanges(n){t?.extensionRpc.action("handleNodeChanges",{changes:n})},refresh(){t?.extensionRpc.action("refresh",{})},state:t.state,themeKind:t.themeKind},children:e})};var Wf=J(Ee());var T=J(ie()),D=J(Ee());function le(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=le(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var lp={value:()=>{}};function Qi(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new An(n)}function An(e){this._=e}function cp(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}An.prototype=Qi.prototype={constructor:An,on:function(e,t){var n=this._,o=cp(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=dp(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=Ui(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Ui(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new An(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function dp(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Ui(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=lp,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var tt=Qi;var Ln="http://www.w3.org/1999/xhtml",er={svg:"http://www.w3.org/2000/svg",xhtml:Ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Be(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),er.hasOwnProperty(t)?{space:er[t],local:e}:e}function up(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ln&&t.documentElement.namespaceURI===Ln?t.createElement(e):t.createElementNS(n,e)}}function fp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hn(e){var t=Be(e);return(t.local?fp:up)(t)}function hp(){}function nt(e){return e==null?hp:function(){return this.querySelector(e)}}function Ji(e){typeof e!="function"&&(e=nt(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,c,d=0;d<s;++d)(l=i[d])&&(c=e.call(l,l.__data__,d,i))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new ce(o,this._parents)}function tr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pp(){return[]}function Ut(e){return e==null?pp:function(){return this.querySelectorAll(e)}}function mp(e){return function(){return tr(e.apply(this,arguments))}}function es(e){typeof e=="function"?e=mp(e):e=Ut(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(o.push(e.call(l,l.__data__,c,s)),r.push(l));return new ce(o,r)}function Qt(e){return function(){return this.matches(e)}}function Bn(e){return function(t){return t.matches(e)}}var gp=Array.prototype.find;function bp(e){return function(){return gp.call(this.children,e)}}function yp(){return this.firstElementChild}function ts(e){return this.select(e==null?yp:bp(typeof e=="function"?e:Bn(e)))}var xp=Array.prototype.filter;function wp(){return Array.from(this.children)}function vp(e){return function(){return xp.call(this.children,e)}}function ns(e){return this.selectAll(e==null?wp:vp(typeof e=="function"?e:Bn(e)))}function os(e){typeof e!="function"&&(e=Qt(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new ce(o,this._parents)}function $n(e){return new Array(e.length)}function rs(){return new ce(this._enter||this._groups.map($n),this._parents)}function Jt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jt.prototype={constructor:Jt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function is(e){return function(){return e}}function _p(e,t,n,o,r,i){for(var s=0,a,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Jt(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Ep(e,t,n,o,r,i,s){var a,l,c=new Map,d=t.length,f=i.length,u=new Array(d),h;for(a=0;a<d;++a)(l=t[a])&&(u[a]=h=s.call(l,l.__data__,a,t)+"",c.has(h)?r[a]=l:c.set(h,l));for(a=0;a<f;++a)h=s.call(e,i[a],a,i)+"",(l=c.get(h))?(o[a]=l,l.__data__=i[a],c.delete(h)):n[a]=new Jt(e,i[a]);for(a=0;a<d;++a)(l=t[a])&&c.get(u[a])===l&&(r[a]=l)}function kp(e){return e.__data__}function ss(e,t){if(!arguments.length)return Array.from(this,kp);var n=t?Ep:_p,o=this._parents,r=this._groups;typeof e!="function"&&(e=is(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var d=o[c],f=r[c],u=f.length,h=Np(e.call(d,d&&d.__data__,c,o)),g=h.length,m=a[c]=new Array(g),w=s[c]=new Array(g),x=l[c]=new Array(u);n(d,f,m,w,x,h,t);for(var M=0,p=0,y,N;M<g;++M)if(y=m[M]){for(M>=p&&(p=M+1);!(N=w[p])&&++p<g;);y._next=N||null}}return s=new ce(s,o),s._enter=a,s._exit=l,s}function Np(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function as(){return new ce(this._exit||this._groups.map($n),this._parents)}function ls(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function cs(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var c=n[l],d=o[l],f=c.length,u=a[l]=new Array(f),h,g=0;g<f;++g)(h=c[g]||d[g])&&(u[g]=h);for(;l<r;++l)a[l]=n[l];return new ce(a,this._parents)}function ds(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function us(e){e||(e=Sp);function t(f,u){return f&&u?e(f.__data__,u.__data__):!f-!u}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(l[d]=c);l.sort(t)}return new ce(r,this._parents).order()}function Sp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function fs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function hs(){return Array.from(this)}function ps(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function ms(){let e=0;for(let t of this)++e;return e}function gs(){return!this.node()}function bs(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function Cp(e){return function(){this.removeAttribute(e)}}function Mp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ip(e,t){return function(){this.setAttribute(e,t)}}function Tp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Dp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ys(e,t){var n=Be(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Mp:Cp:typeof t=="function"?n.local?Dp:Pp:n.local?Tp:Ip)(n,t))}function Vn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Op(e){return function(){this.style.removeProperty(e)}}function Rp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zp(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function xs(e,t,n){return arguments.length>1?this.each((t==null?Op:typeof t=="function"?zp:Rp)(e,t,n??"")):Xe(this.node(),e)}function Xe(e,t){return e.style.getPropertyValue(t)||Vn(e).getComputedStyle(e,null).getPropertyValue(t)}function Ap(e){return function(){delete this[e]}}function Lp(e,t){return function(){this[e]=t}}function Hp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ws(e,t){return arguments.length>1?this.each((t==null?Ap:typeof t=="function"?Hp:Lp)(e,t)):this.node()[e]}function vs(e){return e.trim().split(/^|\s+/)}function nr(e){return e.classList||new _s(e)}function _s(e){this._node=e,this._names=vs(e.getAttribute("class")||"")}_s.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Es(e,t){for(var n=nr(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ks(e,t){for(var n=nr(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Bp(e){return function(){Es(this,e)}}function $p(e){return function(){ks(this,e)}}function Vp(e,t){return function(){(t.apply(this,arguments)?Es:ks)(this,e)}}function Ns(e,t){var n=vs(e+"");if(arguments.length<2){for(var o=nr(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Vp:t?Bp:$p)(n,t))}function Fp(){this.textContent=""}function qp(e){return function(){this.textContent=e}}function Yp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ss(e){return arguments.length?this.each(e==null?Fp:(typeof e=="function"?Yp:qp)(e)):this.node().textContent}function Gp(){this.innerHTML=""}function Xp(e){return function(){this.innerHTML=e}}function Wp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Cs(e){return arguments.length?this.each(e==null?Gp:(typeof e=="function"?Wp:Xp)(e)):this.node().innerHTML}function jp(){this.nextSibling&&this.parentNode.appendChild(this)}function Ms(){return this.each(jp)}function Zp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Is(){return this.each(Zp)}function Ts(e){var t=typeof e=="function"?e:Hn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Kp(){return null}function Ps(e,t){var n=typeof e=="function"?e:Hn(e),o=t==null?Kp:typeof t=="function"?t:nt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Up(){var e=this.parentNode;e&&e.removeChild(this)}function Ds(){return this.each(Up)}function Qp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Os(e){return this.select(e?Jp:Qp)}function Rs(e){return arguments.length?this.property("__data__",e):this.node().__data__}function em(e){return function(t){e.call(this,t,this.__data__)}}function tm(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function nm(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function om(e,t,n){return function(){var o=this.__on,r,i=em(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function zs(e,t,n){var o=tm(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(r=0,d=a[l];r<i;++r)if((s=o[r]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?om:nm,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function As(e,t,n){var o=Vn(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function rm(e,t){return function(){return As(this,e,t)}}function im(e,t){return function(){return As(this,e,t.apply(this,arguments))}}function Ls(e,t){return this.each((typeof t=="function"?im:rm)(e,t))}function*Hs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var or=[null];function ce(e,t){this._groups=e,this._parents=t}function Bs(){return new ce([[document.documentElement]],or)}function sm(){return this}ce.prototype=Bs.prototype={constructor:ce,select:Ji,selectAll:es,selectChild:ts,selectChildren:ns,filter:os,data:ss,enter:rs,exit:as,join:ls,merge:cs,selection:sm,order:ds,sort:us,call:fs,nodes:hs,node:ps,size:ms,empty:gs,each:bs,attr:ys,style:xs,property:ws,classed:Ns,text:Ss,html:Cs,raise:Ms,lower:Is,append:Ts,insert:Ps,remove:Ds,clone:Os,datum:Rs,on:zs,dispatch:Ls,[Symbol.iterator]:Hs};var $e=Bs;function pe(e){return typeof e=="string"?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],or)}function $s(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ye(e,t){if(e=$s(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var Vs={passive:!1},ot={capture:!0,passive:!1};function Fn(e){e.stopImmediatePropagation()}function We(e){e.preventDefault(),e.stopImmediatePropagation()}function en(e){var t=e.document.documentElement,n=pe(e).on("dragstart.drag",We,ot);"onselectstart"in t?n.on("selectstart.drag",We,ot):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function tn(e,t){var n=e.document.documentElement,o=pe(e).on("dragstart.drag",null);t&&(o.on("click.drag",We,ot),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var nn=e=>()=>e;function on(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}on.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function am(e){return!e.ctrlKey&&!e.button}function lm(){return this.parentNode}function cm(e,t){return t??{x:e.x,y:e.y}}function dm(){return navigator.maxTouchPoints||"ontouchstart"in this}function qn(){var e=am,t=lm,n=cm,o=dm,r={},i=tt("start","drag","end"),s=0,a,l,c,d,f=0;function u(y){y.on("mousedown.drag",h).filter(o).on("touchstart.drag",w).on("touchmove.drag",x,Vs).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,N){if(!(d||!e.call(this,y,N))){var I=p(this,t.call(this,y,N),y,N,"mouse");I&&(pe(y.view).on("mousemove.drag",g,ot).on("mouseup.drag",m,ot),en(y.view),Fn(y),c=!1,a=y.clientX,l=y.clientY,I("start",y))}}function g(y){if(We(y),!c){var N=y.clientX-a,I=y.clientY-l;c=N*N+I*I>f}r.mouse("drag",y)}function m(y){pe(y.view).on("mousemove.drag mouseup.drag",null),tn(y.view,c),We(y),r.mouse("end",y)}function w(y,N){if(e.call(this,y,N)){var I=y.changedTouches,C=t.call(this,y,N),_=I.length,O,R;for(O=0;O<_;++O)(R=p(this,C,y,N,I[O].identifier,I[O]))&&(Fn(y),R("start",y,I[O]))}}function x(y){var N=y.changedTouches,I=N.length,C,_;for(C=0;C<I;++C)(_=r[N[C].identifier])&&(We(y),_("drag",y,N[C]))}function M(y){var N=y.changedTouches,I=N.length,C,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<I;++C)(_=r[N[C].identifier])&&(Fn(y),_("end",y,N[C]))}function p(y,N,I,C,_,O){var R=i.copy(),A=ye(O||I,N),H,B,b;if((b=n.call(y,new on("beforestart",{sourceEvent:I,target:u,identifier:_,active:s,x:A[0],y:A[1],dx:0,dy:0,dispatch:R}),C))!=null)return H=b.x-A[0]||0,B=b.y-A[1]||0,function S(v,k,E){var P=A,L;switch(v){case"start":r[_]=S,L=s++;break;case"end":delete r[_],--s;case"drag":A=ye(E||k,N),L=s;break}R.call(v,y,new on(v,{sourceEvent:k,subject:b,target:u,identifier:_,active:L,x:A[0]+H,y:A[1]+B,dx:A[0]-P[0],dy:A[1]-P[1],dispatch:R}),C)}}return u.filter=function(y){return arguments.length?(e=typeof y=="function"?y:nn(!!y),u):e},u.container=function(y){return arguments.length?(t=typeof y=="function"?y:nn(y),u):t},u.subject=function(y){return arguments.length?(n=typeof y=="function"?y:nn(y),u):n},u.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:nn(!!y),u):o},u.on=function(){var y=i.on.apply(i,arguments);return y===i?u:y},u.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,u):Math.sqrt(f)},u}function Yn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function an(){}var rn=.7,Wn=1/rn,kt="\\s*([+-]?\\d+)\\s*",sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",um=/^#([0-9a-f]{3,8})$/,fm=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),hm=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),pm=new RegExp(`^rgba\\(${kt},${kt},${kt},${sn}\\)$`),mm=new RegExp(`^rgba\\(${Re},${Re},${Re},${sn}\\)$`),gm=new RegExp(`^hsl\\(${sn},${Re},${Re}\\)$`),bm=new RegExp(`^hsla\\(${sn},${Re},${Re},${sn}\\)$`),Fs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(an,je,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qs,formatHex:qs,formatHex8:ym,formatHsl:xm,formatRgb:Ys,toString:Ys});function qs(){return this.rgb().formatHex()}function ym(){return this.rgb().formatHex8()}function xm(){return Ks(this).formatHsl()}function Ys(){return this.rgb().formatRgb()}function je(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=um.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Gs(t):n===3?new we(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fm.exec(e))?new we(t[1],t[2],t[3],1):(t=hm.exec(e))?new we(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pm.exec(e))?Gn(t[1],t[2],t[3],t[4]):(t=mm.exec(e))?Gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gm.exec(e))?js(t[1],t[2]/100,t[3]/100,1):(t=bm.exec(e))?js(t[1],t[2]/100,t[3]/100,t[4]):Fs.hasOwnProperty(e)?Gs(Fs[e]):e==="transparent"?new we(NaN,NaN,NaN,0):null}function Gs(e){return new we(e>>16&255,e>>8&255,e&255,1)}function Gn(e,t,n,o){return o<=0&&(e=t=n=NaN),new we(e,t,n,o)}function wm(e){return e instanceof an||(e=je(e)),e?(e=e.rgb(),new we(e.r,e.g,e.b,e.opacity)):new we}function Nt(e,t,n,o){return arguments.length===1?wm(e):new we(e,t,n,o??1)}function we(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Yn(we,Nt,rr(an,{brighter(e){return e=e==null?Wn:Math.pow(Wn,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rn:Math.pow(rn,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new we(it(this.r),it(this.g),it(this.b),jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xs,formatHex:Xs,formatHex8:vm,formatRgb:Ws,toString:Ws}));function Xs(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}`}function vm(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}${rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ws(){let e=jn(this.opacity);return`${e===1?"rgb(":"rgba("}${it(this.r)}, ${it(this.g)}, ${it(this.b)}${e===1?")":`, ${e})`}`}function jn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function it(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rt(e){return e=it(e),(e<16?"0":"")+e.toString(16)}function js(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new De(e,t,n,o)}function Ks(e){if(e instanceof De)return new De(e.h,e.s,e.l,e.opacity);if(e instanceof an||(e=je(e)),!e)return new De;if(e instanceof De)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new De(s,a,l,e.opacity)}function Us(e,t,n,o){return arguments.length===1?Ks(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Yn(De,Us,rr(an,{brighter(e){return e=e==null?Wn:Math.pow(Wn,e),new De(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rn:Math.pow(rn,e),new De(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new we(ir(e>=240?e-240:e+120,r,o),ir(e,r,o),ir(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new De(Zs(this.h),Xn(this.s),Xn(this.l),jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=jn(this.opacity);return`${e===1?"hsl(":"hsla("}${Zs(this.h)}, ${Xn(this.s)*100}%, ${Xn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zs(e){return e=(e||0)%360,e<0?e+360:e}function Xn(e){return Math.max(0,Math.min(1,e||0))}function ir(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function sr(e,t,n,o,r){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*n+(1+3*e+3*i-3*s)*o+s*r)/6}function Qs(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],s=o>0?e[o-1]:2*r-i,a=o<t-1?e[o+2]:2*i-r;return sr((n-o/t)*t,s,r,i,a)}}function Js(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],s=e[(o+1)%t],a=e[(o+2)%t];return sr((n-o/t)*t,r,i,s,a)}}var ar=e=>()=>e;function _m(e,t){return function(n){return e+n*t}}function Em(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function ea(e){return(e=+e)==1?Zn:function(t,n){return n-t?Em(t,n,e):ar(isNaN(t)?n:t)}}function Zn(e,t){var n=t-e;return n?_m(e,n):ar(isNaN(e)?t:e)}var Kn=function e(t){var n=ea(t);function o(r,i){var s=n((r=Nt(r)).r,(i=Nt(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),c=Zn(r.opacity,i.opacity);return function(d){return r.r=s(d),r.g=a(d),r.b=l(d),r.opacity=c(d),r+""}}return o.gamma=e,o}(1);function ta(e){return function(t){var n=t.length,o=new Array(n),r=new Array(n),i=new Array(n),s,a;for(s=0;s<n;++s)a=Nt(t[s]),o[s]=a.r||0,r[s]=a.g||0,i[s]=a.b||0;return o=e(o),r=e(r),i=e(i),a.opacity=1,function(l){return a.r=o(l),a.g=r(l),a.b=i(l),a+""}}}var km=ta(Qs),Nm=ta(Js);function ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var cr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lr=new RegExp(cr.source,"g");function Sm(e){return function(){return e}}function Cm(e){return function(t){return e(t)+""}}function dr(e,t){var n=cr.lastIndex=lr.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=cr.exec(e))&&(r=lr.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:ke(o,r)})),n=lr.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?Cm(l[0].x):Sm(t):(t=l.length,function(c){for(var d=0,f;d<t;++d)a[(f=l[d]).i]=f.x(c);return a.join("")})}var na=180/Math.PI,Un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ur(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*na,skewX:Math.atan(l)*na,scaleX:s,scaleY:a}}var Qn;function oa(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Un:ur(t.a,t.b,t.c,t.d,t.e,t.f)}function ra(e){return e==null?Un:(Qn||(Qn=document.createElementNS("http://www.w3.org/2000/svg","g")),Qn.setAttribute("transform",e),(e=Qn.transform.baseVal.consolidate())?(e=e.matrix,ur(e.a,e.b,e.c,e.d,e.e,e.f)):Un)}function ia(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function i(c,d,f,u,h,g){if(c!==f||d!==u){var m=h.push("translate(",null,t,null,n);g.push({i:m-4,x:ke(c,f)},{i:m-2,x:ke(d,u)})}else(f||u)&&h.push("translate("+f+t+u+n)}function s(c,d,f,u){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),u.push({i:f.push(r(f)+"rotate(",null,o)-2,x:ke(c,d)})):d&&f.push(r(f)+"rotate("+d+o)}function a(c,d,f,u){c!==d?u.push({i:f.push(r(f)+"skewX(",null,o)-2,x:ke(c,d)}):d&&f.push(r(f)+"skewX("+d+o)}function l(c,d,f,u,h,g){if(c!==f||d!==u){var m=h.push(r(h)+"scale(",null,",",null,")");g.push({i:m-4,x:ke(c,f)},{i:m-2,x:ke(d,u)})}else(f!==1||u!==1)&&h.push(r(h)+"scale("+f+","+u+")")}return function(c,d){var f=[],u=[];return c=e(c),d=e(d),i(c.translateX,c.translateY,d.translateX,d.translateY,f,u),s(c.rotate,d.rotate,f,u),a(c.skewX,d.skewX,f,u),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,f,u),c=d=null,function(h){for(var g=-1,m=u.length,w;++g<m;)f[(w=u[g]).i]=w.x(h);return f.join("")}}}var fr=ia(oa,"px, ","px)","deg)"),hr=ia(ra,", ",")",")");var Mm=1e-12;function sa(e){return((e=Math.exp(e))+1/e)/2}function Im(e){return((e=Math.exp(e))-1/e)/2}function Tm(e){return((e=Math.exp(2*e))-1)/(e+1)}var pr=function e(t,n,o){function r(i,s){var a=i[0],l=i[1],c=i[2],d=s[0],f=s[1],u=s[2],h=d-a,g=f-l,m=h*h+g*g,w,x;if(m<Mm)x=Math.log(u/c)/t,w=function(C){return[a+C*h,l+C*g,c*Math.exp(t*C*x)]};else{var M=Math.sqrt(m),p=(u*u-c*c+o*m)/(2*c*n*M),y=(u*u-c*c-o*m)/(2*u*n*M),N=Math.log(Math.sqrt(p*p+1)-p),I=Math.log(Math.sqrt(y*y+1)-y);x=(I-N)/t,w=function(C){var _=C*x,O=sa(N),R=c/(n*M)*(O*Tm(t*_+N)-Im(N));return[a+R*h,l+R*g,c*O/sa(t*_+N)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r}(Math.SQRT2,2,4);var St=0,cn=0,ln=0,la=1e3,Jn,dn,eo=0,st=0,to=0,un=typeof performance=="object"&&performance.now?performance:Date,ca=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hn(){return st||(ca(Pm),st=un.now()+to)}function Pm(){st=0}function fn(){this._call=this._time=this._next=null}fn.prototype=no.prototype={constructor:fn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?hn():+n)+(t==null?0:+t),!this._next&&dn!==this&&(dn?dn._next=this:Jn=this,dn=this),this._call=e,this._time=n,mr()},stop:function(){this._call&&(this._call=null,this._time=1/0,mr())}};function no(e,t,n){var o=new fn;return o.restart(e,t,n),o}function da(){hn(),++St;for(var e=Jn,t;e;)(t=st-e._time)>=0&&e._call.call(void 0,t),e=e._next;--St}function aa(){st=(eo=un.now())+to,St=cn=0;try{da()}finally{St=0,Om(),st=0}}function Dm(){var e=un.now(),t=e-eo;t>la&&(to-=t,eo=e)}function Om(){for(var e,t=Jn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jn=n);dn=e,mr(o)}function mr(e){if(!St){cn&&(cn=clearTimeout(cn));var t=e-st;t>24?(e<1/0&&(cn=setTimeout(aa,e-un.now()-to)),ln&&(ln=clearInterval(ln))):(ln||(eo=un.now(),ln=setInterval(Dm,la)),St=1,ca(aa))}}function oo(e,t,n){var o=new fn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Rm=tt("start","end","cancel","interrupt"),zm=[],ha=0,ua=1,io=2,ro=3,fa=4,so=5,pn=6;function Ze(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Am(e,n,{name:t,index:o,group:r,on:Rm,tween:zm,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ha})}function mn(e,t){var n=fe(e,t);if(n.state>ha)throw new Error("too late; already scheduled");return n}function ge(e,t){var n=fe(e,t);if(n.state>ro)throw new Error("too late; already running");return n}function fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Am(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=no(i,0,n.time);function i(c){n.state=ua,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,f,u,h;if(n.state!==ua)return l();for(d in o)if(h=o[d],h.name===n.name){if(h.state===ro)return oo(s);h.state===fa?(h.state=pn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[d]):+d<t&&(h.state=pn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[d])}if(oo(function(){n.state===ro&&(n.state=fa,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=io,n.on.call("start",e,e.__data__,n.index,n.group),n.state===io){for(n.state=ro,r=new Array(u=n.tween.length),d=0,f=-1;d<u;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=so,1),f=-1,u=r.length;++f<u;)r[f].call(e,d);n.state===so&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=pn,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function at(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>io&&o.state<so,o.state=pn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function pa(e){return this.each(function(){at(this,e)})}function Lm(e,t){var n,o;return function(){var r=ge(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Hm(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=ge(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}i.tween=r}}function ma(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=fe(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?Lm:Hm)(n,e,t))}function Ct(e,t,n){var o=e._id;return e.each(function(){var r=ge(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return fe(r,o).value[t]}}function ao(e,t){var n;return(typeof t=="number"?ke:t instanceof je?Kn:(n=je(t))?(t=n,Kn):dr)(e,t)}function Bm(e){return function(){this.removeAttribute(e)}}function $m(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vm(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function Fm(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function qm(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function Ym(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function ga(e,t){var n=Be(e),o=n==="transform"?hr:ao;return this.attrTween(e,typeof t=="function"?(n.local?Ym:qm)(n,o,Ct(this,"attr."+e,t)):t==null?(n.local?$m:Bm)(n):(n.local?Fm:Vm)(n,o,t))}function Gm(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Xm(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wm(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Xm(e,i)),n}return r._value=t,r}function jm(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Gm(e,i)),n}return r._value=t,r}function ba(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Be(e);return this.tween(n,(o.local?Wm:jm)(o,t))}function Zm(e,t){return function(){mn(this,e).delay=+t.apply(this,arguments)}}function Km(e,t){return t=+t,function(){mn(this,e).delay=t}}function ya(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zm:Km)(t,e)):fe(this.node(),t).delay}function Um(e,t){return function(){ge(this,e).duration=+t.apply(this,arguments)}}function Qm(e,t){return t=+t,function(){ge(this,e).duration=t}}function xa(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Um:Qm)(t,e)):fe(this.node(),t).duration}function Jm(e,t){if(typeof t!="function")throw new Error;return function(){ge(this,e).ease=t}}function wa(e){var t=this._id;return arguments.length?this.each(Jm(t,e)):fe(this.node(),t).ease}function eg(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ge(this,e).ease=n}}function va(e){if(typeof e!="function")throw new Error;return this.each(eg(this._id,e))}function _a(e){typeof e!="function"&&(e=Qt(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new xe(o,this._parents,this._name,this._id)}function Ea(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],c=n[a],d=l.length,f=s[a]=new Array(d),u,h=0;h<d;++h)(u=l[h]||c[h])&&(f[h]=u);for(;a<o;++a)s[a]=t[a];return new xe(s,this._parents,this._name,this._id)}function tg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ng(e,t,n){var o,r,i=tg(t)?mn:ge;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function ka(e,t){var n=this._id;return arguments.length<2?fe(this.node(),n).on.on(e):this.each(ng(n,e,t))}function og(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Na(){return this.on("end.remove",og(this._id))}function Sa(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nt(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,c=i[s]=new Array(l),d,f,u=0;u<l;++u)(d=a[u])&&(f=e.call(d,d.__data__,u,a))&&("__data__"in d&&(f.__data__=d.__data__),c[u]=f,Ze(c[u],t,n,u,c,fe(d,n)));return new xe(i,this._parents,t,n)}function Ca(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ut(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],c=l.length,d,f=0;f<c;++f)if(d=l[f]){for(var u=e.call(d,d.__data__,f,l),h,g=fe(d,n),m=0,w=u.length;m<w;++m)(h=u[m])&&Ze(h,t,n,m,u,g);i.push(u),s.push(d)}return new xe(i,s,t,n)}var rg=$e.prototype.constructor;function Ma(){return new rg(this._groups,this._parents)}function ig(e,t){var n,o,r;return function(){var i=Xe(this,e),s=(this.style.removeProperty(e),Xe(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function Ia(e){return function(){this.style.removeProperty(e)}}function sg(e,t,n){var o,r=n+"",i;return function(){var s=Xe(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function ag(e,t,n){var o,r,i;return function(){var s=Xe(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Xe(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function lg(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=ge(this,e),c=l.on,d=l.value[i]==null?a||(a=Ia(t)):void 0;(c!==n||r!==d)&&(o=(n=c).copy()).on(s,r=d),l.on=o}}function Ta(e,t,n){var o=(e+="")=="transform"?fr:ao;return t==null?this.styleTween(e,ig(e,o)).on("end.style."+e,Ia(e)):typeof t=="function"?this.styleTween(e,ag(e,o,Ct(this,"style."+e,t))).each(lg(this._id,e)):this.styleTween(e,sg(e,o,t),n).on("end.style."+e,null)}function cg(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function dg(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&cg(e,s,n)),o}return i._value=t,i}function Pa(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,dg(e,t,n??""))}function ug(e){return function(){this.textContent=e}}function fg(e){return function(){var t=e(this);this.textContent=t??""}}function Da(e){return this.tween("text",typeof e=="function"?fg(Ct(this,"text",e)):ug(e==null?"":e+""))}function hg(e){return function(t){this.textContent=e.call(this,t)}}function pg(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&hg(r)),t}return o._value=e,o}function Oa(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,pg(e))}function Ra(){for(var e=this._name,t=this._id,n=lo(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var d=fe(l,t);Ze(l,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new xe(o,this._parents,e,n)}function za(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var c=ge(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&i()})}var mg=0;function xe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Aa(e){return $e().transition(e)}function lo(){return++mg}var Ve=$e.prototype;xe.prototype=Aa.prototype={constructor:xe,select:Sa,selectAll:Ca,selectChild:Ve.selectChild,selectChildren:Ve.selectChildren,filter:_a,merge:Ea,selection:Ma,transition:Ra,call:Ve.call,nodes:Ve.nodes,node:Ve.node,size:Ve.size,empty:Ve.empty,each:Ve.each,on:ka,attr:ga,attrTween:ba,style:Ta,styleTween:Pa,text:Da,textTween:Oa,remove:Na,tween:ma,delay:ya,duration:xa,ease:wa,easeVarying:va,end:za,[Symbol.iterator]:Ve[Symbol.iterator]};function co(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var gg={time:null,delay:0,duration:250,ease:co};function bg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function La(e){var t,n;e instanceof xe?(t=e._id,e=e._name):(t=lo(),(n=gg).time=hn(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Ze(l,e,t,c,s,n||bg(l,t));return new xe(o,this._parents,e,t)}$e.prototype.interrupt=pa;$e.prototype.transition=La;var gn=e=>()=>e;function gr(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Oe(e,t,n){this.k=e,this.x=t,this.y=n}Oe.prototype={constructor:Oe,scale:function(e){return e===1?this:new Oe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lt=new Oe(1,0,0);bn.prototype=Oe.prototype;function bn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return lt;return e.__zoom}function uo(e){e.stopImmediatePropagation()}function Mt(e){e.preventDefault(),e.stopImmediatePropagation()}function yg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function xg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ha(){return this.__zoom||lt}function wg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vg(){return navigator.maxTouchPoints||"ontouchstart"in this}function _g(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function fo(){var e=yg,t=xg,n=_g,o=wg,r=vg,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=pr,c=tt("start","zoom","end"),d,f,u,h=500,g=150,m=0,w=10;function x(b){b.property("__zoom",Ha).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",R).filter(r).on("touchstart.zoom",A).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(b,S,v,k){var E=b.selection?b.selection():b;E.property("__zoom",Ha),b!==E?N(b,S,v,k):E.interrupt().each(function(){I(this,arguments).event(k).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},x.scaleBy=function(b,S,v,k){x.scaleTo(b,function(){var E=this.__zoom.k,P=typeof S=="function"?S.apply(this,arguments):S;return E*P},v,k)},x.scaleTo=function(b,S,v,k){x.transform(b,function(){var E=t.apply(this,arguments),P=this.__zoom,L=v==null?y(E):typeof v=="function"?v.apply(this,arguments):v,z=P.invert(L),V=typeof S=="function"?S.apply(this,arguments):S;return n(p(M(P,V),L,z),E,s)},v,k)},x.translateBy=function(b,S,v,k){x.transform(b,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),s)},null,k)},x.translateTo=function(b,S,v,k,E){x.transform(b,function(){var P=t.apply(this,arguments),L=this.__zoom,z=k==null?y(P):typeof k=="function"?k.apply(this,arguments):k;return n(lt.translate(z[0],z[1]).scale(L.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof v=="function"?-v.apply(this,arguments):-v),P,s)},k,E)};function M(b,S){return S=Math.max(i[0],Math.min(i[1],S)),S===b.k?b:new Oe(S,b.x,b.y)}function p(b,S,v){var k=S[0]-v[0]*b.k,E=S[1]-v[1]*b.k;return k===b.x&&E===b.y?b:new Oe(b.k,k,E)}function y(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function N(b,S,v,k){b.on("start.zoom",function(){I(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(k).end()}).tween("zoom",function(){var E=this,P=arguments,L=I(E,P).event(k),z=t.apply(E,P),V=v==null?y(z):typeof v=="function"?v.apply(E,P):v,q=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),F=E.__zoom,X=typeof S=="function"?S.apply(E,P):S,Z=l(F.invert(V).concat(q/F.k),X.invert(V).concat(q/X.k));return function($){if($===1)$=X;else{var K=Z($),Q=q/K[2];$=new Oe(Q,V[0]-K[0]*Q,V[1]-K[1]*Q)}L.zoom(null,$)}})}function I(b,S,v){return!v&&b.__zooming||new C(b,S)}function C(b,S){this.that=b,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,S),this.taps=0}C.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,S){return this.mouse&&b!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var S=pe(this.that).datum();c.call(b,this.that,new gr(b,{sourceEvent:this.sourceEvent,target:x,type:b,transform:this.that.__zoom,dispatch:c}),S)}};function _(b,...S){if(!e.apply(this,arguments))return;var v=I(this,S).event(b),k=this.__zoom,E=Math.max(i[0],Math.min(i[1],k.k*Math.pow(2,o.apply(this,arguments)))),P=ye(b);if(v.wheel)(v.mouse[0][0]!==P[0]||v.mouse[0][1]!==P[1])&&(v.mouse[1]=k.invert(v.mouse[0]=P)),clearTimeout(v.wheel);else{if(k.k===E)return;v.mouse=[P,k.invert(P)],at(this),v.start()}Mt(b),v.wheel=setTimeout(L,g),v.zoom("mouse",n(p(M(k,E),v.mouse[0],v.mouse[1]),v.extent,s));function L(){v.wheel=null,v.end()}}function O(b,...S){if(u||!e.apply(this,arguments))return;var v=b.currentTarget,k=I(this,S,!0).event(b),E=pe(b.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",q,!0),P=ye(b,v),L=b.clientX,z=b.clientY;en(b.view),uo(b),k.mouse=[P,this.__zoom.invert(P)],at(this),k.start();function V(F){if(Mt(F),!k.moved){var X=F.clientX-L,Z=F.clientY-z;k.moved=X*X+Z*Z>m}k.event(F).zoom("mouse",n(p(k.that.__zoom,k.mouse[0]=ye(F,v),k.mouse[1]),k.extent,s))}function q(F){E.on("mousemove.zoom mouseup.zoom",null),tn(F.view,k.moved),Mt(F),k.event(F).end()}}function R(b,...S){if(e.apply(this,arguments)){var v=this.__zoom,k=ye(b.changedTouches?b.changedTouches[0]:b,this),E=v.invert(k),P=v.k*(b.shiftKey?.5:2),L=n(p(M(v,P),k,E),t.apply(this,S),s);Mt(b),a>0?pe(this).transition().duration(a).call(N,L,k,b):pe(this).call(x.transform,L,k,b)}}function A(b,...S){if(e.apply(this,arguments)){var v=b.touches,k=v.length,E=I(this,S,b.changedTouches.length===k).event(b),P,L,z,V;for(uo(b),L=0;L<k;++L)z=v[L],V=ye(z,this),V=[V,this.__zoom.invert(V),z.identifier],E.touch0?!E.touch1&&E.touch0[2]!==V[2]&&(E.touch1=V,E.taps=0):(E.touch0=V,P=!0,E.taps=1+!!d);d&&(d=clearTimeout(d)),P&&(E.taps<2&&(f=V[0],d=setTimeout(function(){d=null},h)),at(this),E.start())}}function H(b,...S){if(this.__zooming){var v=I(this,S).event(b),k=b.changedTouches,E=k.length,P,L,z,V;for(Mt(b),P=0;P<E;++P)L=k[P],z=ye(L,this),v.touch0&&v.touch0[2]===L.identifier?v.touch0[0]=z:v.touch1&&v.touch1[2]===L.identifier&&(v.touch1[0]=z);if(L=v.that.__zoom,v.touch1){var q=v.touch0[0],F=v.touch0[1],X=v.touch1[0],Z=v.touch1[1],$=($=X[0]-q[0])*$+($=X[1]-q[1])*$,K=(K=Z[0]-F[0])*K+(K=Z[1]-F[1])*K;L=M(L,Math.sqrt($/K)),z=[(q[0]+X[0])/2,(q[1]+X[1])/2],V=[(F[0]+Z[0])/2,(F[1]+Z[1])/2]}else if(v.touch0)z=v.touch0[0],V=v.touch0[1];else return;v.zoom("touch",n(p(L,z,V),v.extent,s))}}function B(b,...S){if(this.__zooming){var v=I(this,S).event(b),k=b.changedTouches,E=k.length,P,L;for(uo(b),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),P=0;P<E;++P)L=k[P],v.touch0&&v.touch0[2]===L.identifier?delete v.touch0:v.touch1&&v.touch1[2]===L.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(L=ye(L,this),Math.hypot(f[0]-L[0],f[1]-L[1])<w)){var z=pe(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return x.wheelDelta=function(b){return arguments.length?(o=typeof b=="function"?b:gn(+b),x):o},x.filter=function(b){return arguments.length?(e=typeof b=="function"?b:gn(!!b),x):e},x.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:gn(!!b),x):r},x.extent=function(b){return arguments.length?(t=typeof b=="function"?b:gn([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),x):t},x.scaleExtent=function(b){return arguments.length?(i[0]=+b[0],i[1]=+b[1],x):[i[0],i[1]]},x.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(b){return arguments.length?(n=b,x):n},x.duration=function(b){return arguments.length?(a=+b,x):a},x.interpolate=function(b){return arguments.length?(l=b,x):l},x.on=function(){var b=c.on.apply(c,arguments);return b===c?x:b},x.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,x):Math.sqrt(m)},x.tapDistance=function(b){return arguments.length?(w=+b,x):w},x}var ve={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Rt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vr=["Enter"," ","Escape"],Qe;(function(e){e.Strict="strict",e.Loose="loose"})(Qe||(Qe={}));var Fe;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Fe||(Fe={}));var ct;(function(e){e.Partial="partial",e.Full="full"})(ct||(ct={}));var _r={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null},Se;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Se||(Se={}));var Pt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Pt||(Pt={}));var j;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(j||(j={}));var Ba={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top};function Er(e){return e===null?null:e?"valid":"invalid"}var kr=e=>"id"in e&&"source"in e&&"target"in e,Ua=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Nr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e);var Sr=(e,t,n)=>{if(!e.id)return[];let o=new Set;return n.forEach(r=>{r.target===e.id&&o.add(r.source)}),t.filter(r=>o.has(r.id))},vn=(e,t=[0,0])=>{let{width:n,height:o}=Ae(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},Cr=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};let n=e.reduce((o,r)=>{let i=typeof r=="string",s=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(r):Nr(r)?r:t.nodeLookup.get(r.id));let a=s?mo(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return go(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bo(n)},zt=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){let r=mo(o);n=go(n,r)}}),bo(n)},Mr=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1)=>{let a={...Lt(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(let c of e.values()){let{measured:d,selectable:f=!0,hidden:u=!1}=c;if(s&&!f||u)continue;let h=d.width??c.width??c.initialWidth??null,g=d.height??c.height??c.initialHeight??null,m=At(a,ft(c)),w=(h??0)*(g??0),x=i&&m>0;(!c.internals.handleBounds||x||m>=w||c.dragging)&&l.push(c)}return l},Qa=(e,t)=>{let n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function Eg(e,t){let n=new Map,o=t?.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Ja({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(e.size===0)return Promise.resolve(!0);let a=Eg(e,s),l=zt(a),c=En(l,t,n,s?.minZoom??r,s?.maxZoom??i,s?.padding??.1);return await o.setViewport(c,{duration:s?.duration}),Promise.resolve(!0)}function Ir({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){let s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??o,f=r;if(s.extent==="parent"&&!s.expandParent)if(!a)i?.("005",ve.error005());else{let h=a.measured.width,g=a.measured.height;h&&g&&(f=[[l,c],[l+h,c+g]])}else a&&Ot(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);let u=Ot(f)?dt(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&i?.("015",ve.error015()),{position:{x:u.x-l+(s.measured.width??0)*d[0],y:u.y-c+(s.measured.height??0)*d[1]},positionAbsolute:u}}async function el({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){let i=new Set(e.map(u=>u.id)),s=[];for(let u of n){if(u.deletable===!1)continue;let h=i.has(u.id),g=!h&&u.parentId&&s.find(m=>m.id===u.parentId);(h||g)&&s.push(u)}let a=new Set(t.map(u=>u.id)),l=o.filter(u=>u.deletable!==!1),d=Qa(s,l);for(let u of l)a.has(u.id)&&!d.find(g=>g.id===u.id)&&d.push(u);if(!r)return{edges:d,nodes:s};let f=await r({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}var Dt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),dt=(e={x:0,y:0},t,n)=>({x:Dt(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Dt(e.y,t[0][1],t[1][1]-(n?.height??0))});function tl(e,t,n){let{width:o,height:r}=Ae(n),{x:i,y:s}=n.internals.positionAbsolute;return dt(e,[[i,s],[i+o,s+r]],t)}var $a=(e,t,n)=>e<t?Dt(Math.abs(e-t),1,t)/t:e>n?-Dt(Math.abs(e-n),1,t)/t:0,nl=(e,t,n=15,o=40)=>{let r=$a(e.x,o,t.width-o)*n,i=$a(e.y,o,t.height-o)*n;return[r,i]},go=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),wr=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),bo=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),ft=(e,t=[0,0])=>{let{x:n,y:o}=Nr(e)?e.internals.positionAbsolute:vn(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},mo=(e,t=[0,0])=>{let{x:n,y:o}=Nr(e)?e.internals.positionAbsolute:vn(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},Tr=(e,t)=>bo(go(wr(e),wr(t))),At=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Pr=e=>Ne(e.width)&&Ne(e.height)&&Ne(e.x)&&Ne(e.y),Ne=e=>!isNaN(e)&&isFinite(e),Dr=(e,t)=>{},_n=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Lt=({x:e,y:t},[n,o,r],i=!1,s=[1,1])=>{let a={x:(e-n)/r,y:(t-o)/r};return i?_n(a,s):a},xn=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function It(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function kg(e,t,n){if(typeof e=="string"||typeof e=="number"){let o=It(e,n),r=It(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){let o=It(e.top??e.y??0,n),r=It(e.bottom??e.y??0,n),i=It(e.left??e.x??0,t),s=It(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Ng(e,t,n,o,r,i){let{x:s,y:a}=xn(e,[t,n,o]),{x:l,y:c}=xn({x:e.x+e.width,y:e.y+e.height},[t,n,o]),d=r-l,f=i-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(f)}}var En=(e,t,n,o,r,i)=>{let s=kg(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),d=Dt(c,o,r),f=e.x+e.width/2,u=e.y+e.height/2,h=t/2-f*d,g=n/2-u*d,m=Ng(e,h,g,d,t,n),w={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:h-w.left+w.right,y:g-w.top+w.bottom,zoom:d}},kn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Ot(e){return e!==void 0&&e!=="parent"}function Ae(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function yo(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Or(e,t={width:0,height:0},n,o,r){let i={...e},s=o.get(n);if(s){let a=s.origin||r;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function Rr(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function ol(){let e,t;return{promise:new Promise((o,r)=>{e=o,t=r}),resolve:e,reject:t}}function yn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){let{x:i,y:s}=ze(e),a=Lt({x:i-(r?.left??0),y:s-(r?.top??0)},o),{x:l,y:c}=n?_n(a,t):a;return{xSnapped:l,ySnapped:c,...a}}var xo=e=>({width:e.offsetWidth,height:e.offsetHeight}),zr=e=>e?.getRootNode?.()||window?.document,Sg=["INPUT","SELECT","TEXTAREA"];function Ar(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Sg.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}var Lr=e=>"clientX"in e,ze=(e,t)=>{let n=Lr(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Va=(e,t,n,o,r)=>{let i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{let a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...xo(s)}})};function wo({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){let l=e*.125+r*.375+s*.375+n*.125,c=t*.125+i*.375+a*.375+o*.125,d=Math.abs(l-e),f=Math.abs(c-t);return[l,c,d,f]}function ho(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Fa({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case j.Left:return[t-ho(t-o,i),n];case j.Right:return[t+ho(o-t,i),n];case j.Top:return[t,n-ho(n-r,i)];case j.Bottom:return[t,n+ho(r-n,i)]}}function vo({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:i=j.Top,curvature:s=.25}){let[a,l]=Fa({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[c,d]=Fa({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[f,u,h,g]=wo({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${o},${r}`,f,u,h,g]}function Hr({sourceX:e,sourceY:t,targetX:n,targetY:o}){let r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function rl({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;let i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?s:0)}function il({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){let i=go(mo(e),mo(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);let s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return At(s,bo(i))>0}var Cg=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,Mg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Br=(e,t)=>{if(!e.source||!e.target)return Dr("006",ve.error006()),t;let n;return kr(e)?n={...e}:n={...e,id:Cg(e)},Mg(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function _o({sourceX:e,sourceY:t,targetX:n,targetY:o}){let[r,i,s,a]=Hr({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}var qa={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},Ig=({source:e,sourcePosition:t=j.Bottom,target:n})=>t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ya=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Tg({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:r,offset:i}){let s=qa[t],a=qa[o],l={x:e.x+s.x*i,y:e.y+s.y*i},c={x:n.x+a.x*i,y:n.y+a.y*i},d=Ig({source:l,sourcePosition:t,target:c}),f=d.x!==0?"x":"y",u=d[f],h=[],g,m,w={x:0,y:0},x={x:0,y:0},[M,p,y,N]=Hr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){g=r.x??M,m=r.y??p;let C=[{x:g,y:l.y},{x:g,y:c.y}],_=[{x:l.x,y:m},{x:c.x,y:m}];s[f]===u?h=f==="x"?C:_:h=f==="x"?_:C}else{let C=[{x:l.x,y:c.y}],_=[{x:c.x,y:l.y}];if(f==="x"?h=s.x===u?_:C:h=s.y===u?C:_,t===o){let B=Math.abs(e[f]-n[f]);if(B<=i){let b=Math.min(i-1,i-B);s[f]===u?w[f]=(l[f]>e[f]?-1:1)*b:x[f]=(c[f]>n[f]?-1:1)*b}}if(t!==o){let B=f==="x"?"y":"x",b=s[f]===a[B],S=l[B]>c[B],v=l[B]<c[B];(s[f]===1&&(!b&&S||b&&v)||s[f]!==1&&(!b&&v||b&&S))&&(h=f==="x"?C:_)}let O={x:l.x+w.x,y:l.y+w.y},R={x:c.x+x.x,y:c.y+x.y},A=Math.max(Math.abs(O.x-h[0].x),Math.abs(R.x-h[0].x)),H=Math.max(Math.abs(O.y-h[0].y),Math.abs(R.y-h[0].y));A>=H?(g=(O.x+R.x)/2,m=h[0].y):(g=h[0].x,m=(O.y+R.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...h,{x:c.x+x.x,y:c.y+x.y},n],g,m,y,N]}function Pg(e,t,n,o){let r=Math.min(Ya(e,t)/2,Ya(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){let c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*c},${s}Q ${i},${s} ${i},${s+r*d}`}let a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function Nn({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:i=j.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){let[d,f,u,h,g]=Tg({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:l},offset:c});return[d.reduce((w,x,M)=>{let p="";return M>0&&M<d.length-1?p=Pg(d[M-1],x,d[M+1],s):p=`${M===0?"M":"L"}${x.x} ${x.y}`,w+=p,w},""),f,u,h,g]}function Ga(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function sl(e){let{sourceNode:t,targetNode:n}=e;if(!Ga(t)||!Ga(n))return null;let o=t.internals.handleBounds||Xa(t.handles),r=n.internals.handleBounds||Xa(n.handles),i=Wa(o?.source??[],e.sourceHandle),s=Wa(e.connectionMode===Qe.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",ve.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let a=i?.position||j.Bottom,l=s?.position||j.Top,c=wn(t,i,a),d=wn(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}function Xa(e){if(!e)return null;let t=[],n=[];for(let o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function wn(e,t,n=j.Left,o=!1){let r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Ae(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case j.Top:return{x:r+s/2,y:i};case j.Right:return{x:r+s,y:i+a/2};case j.Bottom:return{x:r+s/2,y:i+a};case j.Left:return{x:r,y:i+a/2}}}function Wa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Eo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function al(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){let i=new Set;return e.reduce((s,a)=>([a.markerStart||o,a.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){let c=Eo(l,t);i.has(c)||(s.push({id:c,color:l.color||n,...l}),i.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}var $r={nodeOrigin:[0,0],nodeExtent:Rt,elevateNodesOnSelect:!0,defaults:{}},Dg={...$r,checkEquality:!0};function Vr(e,t){let n={...e};for(let o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function ll(e,t,n){let o=Vr($r,n);for(let r of e.values())if(r.parentId)Fr(r,e,t,o);else{let i=vn(r,o.nodeOrigin),s=Ot(r.extent)?r.extent:o.nodeExtent,a=dt(i,s,Ae(r));r.internals.positionAbsolute=a}}function ko(e,t,n,o){let r=Vr(Dg,o),i=e.length>0,s=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(let l of e){let c=s.get(l.id);if(r.checkEquality&&l===c?.internals.userNode)t.set(l.id,c);else{let d=vn(l,r.nodeOrigin),f=Ot(l.extent)?l.extent:r.nodeExtent,u=dt(d,f,Ae(l));c={...r.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:u,handleBounds:l.measured?c?.internals.handleBounds:void 0,z:cl(l,a),userNode:l}},t.set(l.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(i=!1),l.parentId&&Fr(c,t,n,o)}return i}function Og(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Fr(e,t,n,o){let{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=Vr($r,o),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Og(e,n);let c=r?1e3:0,{x:d,y:f,z:u}=Rg(e,l,i,s,c),{positionAbsolute:h}=e.internals,g=d!==h.x||f!==h.y;(g||u!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:d,y:f}:h,z:u}})}function cl(e,t){return(Ne(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Rg(e,t,n,o,r){let{x:i,y:s}=t.internals.positionAbsolute,a=Ae(e),l=vn(e,n),c=Ot(e.extent)?dt(l,e.extent,a):l,d=dt({x:i+c.x,y:s+c.y},o,a);e.extent==="parent"&&(d=tl(d,a,t));let f=cl(e,r),u=t.internals.z??0;return{x:d.x,y:d.y,z:u>f?u:f}}function No(e,t,n,o=[0,0]){let r=[],i=new Map;for(let s of e){let a=t.get(s.parentId);if(!a)continue;let l=i.get(s.parentId)?.expandedRect??ft(a),c=Tr(l,s.rect);i.set(s.parentId,{expandedRect:c,parent:a})}return i.size>0&&i.forEach(({expandedRect:s,parent:a},l)=>{let c=a.internals.positionAbsolute,d=Ae(a),f=a.origin??o,u=s.x<c.x?Math.round(Math.abs(c.x-s.x)):0,h=s.y<c.y?Math.round(Math.abs(c.y-s.y)):0,g=Math.max(d.width,Math.round(s.width)),m=Math.max(d.height,Math.round(s.height)),w=(g-d.width)*f[0],x=(m-d.height)*f[1];(u>0||h>0||w||x)&&(r.push({id:l,type:"position",position:{x:a.position.x-u+w,y:a.position.y-h+x}}),n.get(l)?.forEach(M=>{e.some(p=>p.id===M.id)||r.push({id:M.id,type:"position",position:{x:M.position.x+u,y:M.position.y+h}})})),(d.width<s.width||d.height<s.height||u||h)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:g+(u?f[0]*u-w:0),height:m+(h?f[1]*h-x:0)}})}),r}function dl(e,t,n,o,r,i){let s=o?.querySelector(".xyflow__viewport"),a=!1;if(!s)return{changes:[],updatedInternals:a};let l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),f=[];for(let u of e.values()){let h=t.get(u.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),a=!0;continue}let g=xo(u.nodeElement),m=h.measured.width!==g.width||h.measured.height!==g.height;if(!!(g.width&&g.height&&(m||!h.internals.handleBounds||u.force))){let x=u.nodeElement.getBoundingClientRect(),M=Ot(h.extent)?h.extent:i,{positionAbsolute:p}=h.internals;h.parentId&&h.extent==="parent"?p=tl(p,g,t.get(h.parentId)):M&&(p=dt(p,M,g));let y={...h,measured:g,internals:{...h.internals,positionAbsolute:p,handleBounds:{source:Va("source",u.nodeElement,x,d,h.id),target:Va("target",u.nodeElement,x,d,h.id)}}};t.set(h.id,y),h.parentId&&Fr(y,t,n,{nodeOrigin:r}),a=!0,m&&(l.push({id:h.id,type:"dimensions",dimensions:g}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:ft(y,r)}))}}if(f.length>0){let u=No(f,t,n,r);l.push(...u)}return{changes:l,updatedInternals:a}}async function ul({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function ja(e,t,n,o,r,i){let s=r,a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;let l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;let c=o.get(s)||new Map;o.set(s,c.set(n,t))}}function qr(e,t,n){e.clear(),t.clear();for(let o of n){let{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},c=`${r}-${s}--${i}-${a}`,d=`${i}-${a}--${r}-${s}`;ja("source",l,d,e,r,s),ja("target",l,c,e,i,a),t.set(o.id,o)}}function fl(e,t){if(!e.parentId)return!1;let n=t.get(e.parentId);return n?n.selected?!0:fl(n,t):!1}function Za(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function zg(e,t,n,o){let r=new Map;for(let[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!fl(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){let a=e.get(i);a&&r.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function br({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){let r=[];for(let[s,a]of t){let l=n.get(s)?.internals.userNode;l&&r.push({...l,position:a.position,dragging:o})}if(!e)return[r[0],r];let i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function hl({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},d=null,f=!1,u=null,h=!1;function g({noDragClassName:w,handleSelector:x,domNode:M,isSelectable:p,nodeId:y,nodeClickDistance:N=0}){u=pe(M);function I({x:R,y:A},H){let{nodeLookup:B,nodeExtent:b,snapGrid:S,snapToGrid:v,nodeOrigin:k,onNodeDrag:E,onSelectionDrag:P,onError:L,updateNodePositions:z}=t();i={x:R,y:A};let V=!1,q={x:0,y:0,x2:0,y2:0};if(a.size>1&&b){let F=zt(a);q=wr(F)}for(let[F,X]of a){if(!B.has(F))continue;let Z={x:R-X.distance.x,y:A-X.distance.y};v&&(Z=_n(Z,S));let $=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];if(a.size>1&&b&&!X.extent){let{positionAbsolute:oe}=X.internals,ne=oe.x-q.x+b[0][0],W=oe.x+X.measured.width-q.x2+b[1][0],ue=oe.y-q.y+b[0][1],re=oe.y+X.measured.height-q.y2+b[1][1];$=[[ne,ue],[W,re]]}let{position:K,positionAbsolute:Q}=Ir({nodeId:F,nextPosition:Z,nodeLookup:B,nodeExtent:$,nodeOrigin:k,onError:L});V=V||X.position.x!==K.x||X.position.y!==K.y,X.position=K,X.internals.positionAbsolute=Q}if(V&&(z(a,!0),H&&(o||E||!y&&P))){let[F,X]=br({nodeId:y,dragItems:a,nodeLookup:B});o?.(H,a,F,X),E?.(H,F,X),y||P?.(H,X)}}async function C(){if(!d)return;let{transform:R,panBy:A,autoPanSpeed:H,autoPanOnNodeDrag:B}=t();if(!B){l=!1,cancelAnimationFrame(s);return}let[b,S]=nl(c,d,H);(b!==0||S!==0)&&(i.x=(i.x??0)-b/R[2],i.y=(i.y??0)-S/R[2],await A({x:b,y:S})&&I(i,null)),s=requestAnimationFrame(C)}function _(R){let{nodeLookup:A,multiSelectionActive:H,nodesDraggable:B,transform:b,snapGrid:S,snapToGrid:v,selectNodesOnDrag:k,onNodeDragStart:E,onSelectionDragStart:P,unselectNodesAndEdges:L}=t();f=!0,(!k||!p)&&!H&&y&&(A.get(y)?.selected||L()),p&&k&&y&&e?.(y);let z=yn(R.sourceEvent,{transform:b,snapGrid:S,snapToGrid:v,containerBounds:d});if(i=z,a=zg(A,B,z,y),a.size>0&&(n||E||!y&&P)){let[V,q]=br({nodeId:y,dragItems:a,nodeLookup:A});n?.(R.sourceEvent,a,V,q),E?.(R.sourceEvent,V,q),y||P?.(R.sourceEvent,q)}}let O=qn().clickDistance(N).on("start",R=>{let{domNode:A,nodeDragThreshold:H,transform:B,snapGrid:b,snapToGrid:S}=t();d=A?.getBoundingClientRect()||null,h=!1,H===0&&_(R),i=yn(R.sourceEvent,{transform:B,snapGrid:b,snapToGrid:S,containerBounds:d}),c=ze(R.sourceEvent,d)}).on("drag",R=>{let{autoPanOnNodeDrag:A,transform:H,snapGrid:B,snapToGrid:b,nodeDragThreshold:S,nodeLookup:v}=t(),k=yn(R.sourceEvent,{transform:H,snapGrid:B,snapToGrid:b,containerBounds:d});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||y&&!v.has(y))&&(h=!0),!h){if(!l&&A&&f&&(l=!0,C()),!f){let E=k.xSnapped-(i.x??0),P=k.ySnapped-(i.y??0);Math.sqrt(E*E+P*P)>S&&_(R)}(i.x!==k.xSnapped||i.y!==k.ySnapped)&&a&&f&&(c=ze(R.sourceEvent,d),I(k,R.sourceEvent))}}).on("end",R=>{if(!(!f||h)&&(l=!1,f=!1,cancelAnimationFrame(s),a.size>0)){let{nodeLookup:A,updateNodePositions:H,onNodeDragStop:B,onSelectionDragStop:b}=t();if(H(a,!1),r||B||!y&&b){let[S,v]=br({nodeId:y,dragItems:a,nodeLookup:A,dragging:!1});r?.(R.sourceEvent,a,S,v),B?.(R.sourceEvent,S,v),y||b?.(R.sourceEvent,v)}}}).filter(R=>{let A=R.target;return!R.button&&(!w||!Za(A,`.${w}`,M))&&(!x||Za(A,x,M))});u.call(O)}function m(){u?.on(".drag",null)}return{update:g,destroy:m}}function Ag(e,t,n){let o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(let i of t.values())At(r,ft(i))>0&&o.push(i);return o}var Lg=250;function Hg(e,t,n,o){let r=[],i=1/0,s=Ag(e,n,t+Lg);for(let a of s){let l=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(let c of l){if(o.nodeId===c.nodeId&&o.type===c.type&&o.id===c.id)continue;let{x:d,y:f}=wn(a,c,c.position,!0),u=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(f-e.y,2));u>t||(u<i?(r=[{...c,x:d,y:f}],i=u):u===i&&r.push({...c,x:d,y:f}))}}if(!r.length)return null;if(r.length>1){let a=o.type==="source"?"target":"source";return r.find(l=>l.type===a)??r[0]}return r[0]}function pl(e,t,n,o,r,i=!1){let s=o.get(e);if(!s)return null;let a=r==="strict"?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find(c=>c.id===n):a?.[0])??null;return l&&i?{...l,...wn(s,l,l.position,!0)}:l}function ml(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Bg(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}var gl=()=>!0;function $g(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:f,panBy:u,cancelConnection:h,onConnectStart:g,onConnect:m,onConnectEnd:w,isValidConnection:x=gl,onReconnectEnd:M,updateConnection:p,getTransform:y,getFromHandle:N,autoPanSpeed:I}){let C=zr(e.target),_=0,O,{x:R,y:A}=ze(e),H=C?.elementFromPoint(R,A),B=ml(i,H),b=a?.getBoundingClientRect();if(!b||!B)return;let S=pl(r,B,o,l,t);if(!S)return;let v=ze(e,b),k=!1,E=null,P=!1,L=null;function z(){if(!d||!b)return;let[Q,oe]=nl(v,b,I);u({x:Q,y:oe}),_=requestAnimationFrame(z)}let V={...S,nodeId:r,type:B,position:S.position},q=l.get(r),X={inProgress:!0,isValid:null,from:wn(q,V,j.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:q,to:v,toHandle:null,toPosition:Ba[V.position],toNode:null};p(X);let Z=X;g?.(e,{nodeId:r,handleId:o,handleType:B});function $(Q){if(!N()||!V){K(Q);return}let oe=y();v=ze(Q,b),O=Hg(Lt(v,oe,!1,[1,1]),n,l,V),k||(z(),k=!0);let ne=bl(Q,{handle:O,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:x,doc:C,lib:c,flowId:f,nodeLookup:l});L=ne.handleDomNode,E=ne.connection,P=Bg(!!O,ne.isValid);let W={...Z,isValid:P,to:O&&P?xn({x:O.x,y:O.y},oe):v,toHandle:ne.toHandle,toPosition:P&&ne.toHandle?ne.toHandle.position:Ba[V.position],toNode:ne.toHandle?l.get(ne.toHandle.nodeId):null};P&&O&&Z.toHandle&&W.toHandle&&Z.toHandle.type===W.toHandle.type&&Z.toHandle.nodeId===W.toHandle.nodeId&&Z.toHandle.id===W.toHandle.id&&Z.to.x===W.to.x&&Z.to.y===W.to.y||(p(W),Z=W)}function K(Q){(O||L)&&E&&P&&m?.(E);let{inProgress:oe,...ne}=Z,W={...ne,toPosition:Z.toHandle?Z.toPosition:null};w?.(Q,W),i&&M?.(Q,W),h(),cancelAnimationFrame(_),k=!1,P=!1,E=null,L=null,C.removeEventListener("mousemove",$),C.removeEventListener("mouseup",K),C.removeEventListener("touchmove",$),C.removeEventListener("touchend",K)}C.addEventListener("mousemove",$),C.addEventListener("mouseup",K),C.addEventListener("touchmove",$),C.addEventListener("touchend",K)}function bl(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:c=gl,nodeLookup:d}){let f=i==="target",u=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:g}=ze(e),m=s.elementFromPoint(h,g),w=m?.classList.contains(`${a}-flow__handle`)?m:u,x={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){let M=ml(void 0,w),p=w.getAttribute("data-nodeid"),y=w.getAttribute("data-handleid"),N=w.classList.contains("connectable"),I=w.classList.contains("connectableend");if(!p||!M)return x;let C={source:f?p:o,sourceHandle:f?y:r,target:f?o:p,targetHandle:f?r:y};x.connection=C;let O=N&&I&&(n===Qe.Strict?f&&M==="source"||!f&&M==="target":p!==o||y!==r);x.isValid=O&&c(C),x.toHandle=pl(p,M,y,d,n,!1)}return x}var So={onPointerDown:$g,isValid:bl};function yl({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){let r=pe(e);function i({translateExtent:a,width:l,height:c,zoomStep:d=10,pannable:f=!0,zoomable:u=!0,inversePan:h=!1}){let g=p=>{let y=n();if(p.sourceEvent.type!=="wheel"||!t)return;let N=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*d,I=y[2]*Math.pow(2,N);t.scaleTo(I)},m=[0,0],w=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(m=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},x=p=>{let y=n();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!t)return;let N=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],I=[N[0]-m[0],N[1]-m[1]];m=N;let C=o()*Math.max(y[2],Math.log(y[2]))*(h?-1:1),_={x:y[0]-I[0]*C,y:y[1]-I[1]*C},O=[[0,0],[l,c]];t.setViewportConstrained({x:_.x,y:_.y,zoom:y[2]},O,a)},M=fo().on("start",w).on("zoom",f?x:null).on("zoom.wheel",u?g:null);r.call(M,{})}function s(){r.on("zoom",null)}return{update:i,destroy:s,pointer:ye}}var Vg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Co=e=>({x:e.x,y:e.y,zoom:e.k}),yr=({x:e,y:t,zoom:n})=>lt.translate(e,t).scale(n),Tt=(e,t)=>e.target.closest(`.${t}`),xl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),xr=(e,t=0,n=()=>{})=>{let o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},wl=e=>{let t=e.ctrlKey&&kn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Fg({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(Tt(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();let f=n.property("__zoom").k||1;if(d.ctrlKey&&s){let w=ye(d),x=wl(d),M=f*Math.pow(2,x);o.scaleTo(n,M,w,d);return}let u=d.deltaMode===1?20:1,h=r===Fe.Vertical?0:d.deltaX*u,g=r===Fe.Horizontal?0:d.deltaY*u;!kn()&&d.shiftKey&&r!==Fe.Vertical&&(h=d.deltaY*u,g=0),o.translateBy(n,-(h/f)*i,-(g/f)*i,{internal:!0});let m=Co(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(d,m)),e.isPanScrolling&&(l?.(d,m),e.panScrollTimeout=setTimeout(()=>{c?.(d,m),e.isPanScrolling=!1},150))}}function qg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){let i=o.type==="wheel",s=!t&&i&&!o.ctrlKey,a=Tt(o,e);if(o.ctrlKey&&i&&a&&o.preventDefault(),s||a)return null;o.preventDefault(),n.call(this,o,r)}}function Yg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;let r=Co(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}function Gg({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!!(n&&xl(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,Co(i.transform))}}function Xg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&xl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Vg(e.prevViewport,s.transform))){let a=Co(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(s.sourceEvent,a)},n?150:0)}}}function Wg({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return d=>{let f=e||t,u=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Tt(d,`${c}-flow__node`)||Tt(d,`${c}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||s||Tt(d,a)&&d.type==="wheel"||Tt(d,l)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!r&&!u&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;let h=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&h}}function vl({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){let d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),u=fo().clickDistance(!Ne(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),h=pe(e).call(u);p({x:i.x,y:i.y,zoom:Dt(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);let g=h.on("wheel.zoom"),m=h.on("dblclick.zoom");u.wheelDelta(wl);function w(H,B){return h?new Promise(b=>{u?.transform(xr(h,B?.duration,()=>b(!0)),H)}):Promise.resolve(!1)}function x({noWheelClassName:H,noPanClassName:B,onPaneContextMenu:b,userSelectionActive:S,panOnScroll:v,panOnDrag:k,panOnScrollMode:E,panOnScrollSpeed:P,preventScrolling:L,zoomOnPinch:z,zoomOnScroll:V,zoomOnDoubleClick:q,zoomActivationKeyPressed:F,lib:X,onTransformChange:Z}){S&&!d.isZoomingOrPanning&&M();let K=v&&!F&&!S?Fg({zoomPanValues:d,noWheelClassName:H,d3Selection:h,d3Zoom:u,panOnScrollMode:E,panOnScrollSpeed:P,zoomOnPinch:z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):qg({noWheelClassName:H,preventScrolling:L,d3ZoomHandler:g});if(h.on("wheel.zoom",K,{passive:!1}),!S){let oe=Yg({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:a});u.on("start",oe);let ne=Gg({zoomPanValues:d,panOnDrag:k,onPaneContextMenu:!!b,onPanZoom:s,onTransformChange:Z});u.on("zoom",ne);let W=Xg({zoomPanValues:d,panOnDrag:k,panOnScroll:v,onPaneContextMenu:b,onPanZoomEnd:l,onDraggingChange:c});u.on("end",W)}let Q=Wg({zoomActivationKeyPressed:F,panOnDrag:k,zoomOnScroll:V,panOnScroll:v,zoomOnDoubleClick:q,zoomOnPinch:z,userSelectionActive:S,noPanClassName:B,noWheelClassName:H,lib:X});u.filter(Q),q?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function M(){u.on("zoom",null)}async function p(H,B,b){let S=yr(H),v=u?.constrain()(S,B,b);return v&&await w(v),new Promise(k=>k(v))}async function y(H,B){let b=yr(H);return await w(b,B),new Promise(S=>S(b))}function N(H){if(h){let B=yr(H),b=h.property("__zoom");(b.k!==H.zoom||b.x!==H.x||b.y!==H.y)&&u?.transform(h,B,null,{sync:!0})}}function I(){let H=h?bn(h.node()):{x:0,y:0,k:1};return{x:H.x,y:H.y,zoom:H.k}}function C(H,B){return h?new Promise(b=>{u?.scaleTo(xr(h,B?.duration,()=>b(!0)),H)}):Promise.resolve(!1)}function _(H,B){return h?new Promise(b=>{u?.scaleBy(xr(h,B?.duration,()=>b(!0)),H)}):Promise.resolve(!1)}function O(H){u?.scaleExtent(H)}function R(H){u?.translateExtent(H)}function A(H){let B=!Ne(H)||H<0?0:H;u?.clickDistance(B)}return{update:x,destroy:M,setViewport:y,setViewportConstrained:p,getViewport:I,scaleTo:C,scaleBy:_,setScaleExtent:O,setTranslateExtent:R,syncViewport:N,setClickDistance:A}}var ut;(function(e){e.Line="line",e.Handle="handle"})(ut||(ut={}));function jg({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){let s=e-t,a=n-o,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(l[0]=l[0]*-1),a&&i&&(l[1]=l[1]*-1),l}function Zg(e){let t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function Ke(e,t){return Math.max(0,t-e)}function Ue(e,t){return Math.max(0,e-t)}function po(e,t,n){return Math.max(0,t-e,e-n)}function Ka(e,t){return e?!t:t}function Kg(e,t,n,o,r,i,s,a){let{affectsX:l,affectsY:c}=t,{isHorizontal:d,isVertical:f}=t,u=d&&f,{xSnapped:h,ySnapped:g}=n,{minWidth:m,maxWidth:w,minHeight:x,maxHeight:M}=o,{x:p,y,width:N,height:I,aspectRatio:C}=e,_=Math.floor(d?h-e.pointerX:0),O=Math.floor(f?g-e.pointerY:0),R=N+(l?-_:_),A=I+(c?-O:O),H=-i[0]*N,B=-i[1]*I,b=po(R,m,w),S=po(A,x,M);if(s){let E=0,P=0;l&&_<0?E=Ke(p+_+H,s[0][0]):!l&&_>0&&(E=Ue(p+R+H,s[1][0])),c&&O<0?P=Ke(y+O+B,s[0][1]):!c&&O>0&&(P=Ue(y+A+B,s[1][1])),b=Math.max(b,E),S=Math.max(S,P)}if(a){let E=0,P=0;l&&_>0?E=Ue(p+_,a[0][0]):!l&&_<0&&(E=Ke(p+R,a[1][0])),c&&O>0?P=Ue(y+O,a[0][1]):!c&&O<0&&(P=Ke(y+A,a[1][1])),b=Math.max(b,E),S=Math.max(S,P)}if(r){if(d){let E=po(R/C,x,M)*C;if(b=Math.max(b,E),s){let P=0;!l&&!c||l&&!c&&u?P=Ue(y+B+R/C,s[1][1])*C:P=Ke(y+B+(l?_:-_)/C,s[0][1])*C,b=Math.max(b,P)}if(a){let P=0;!l&&!c||l&&!c&&u?P=Ke(y+R/C,a[1][1])*C:P=Ue(y+(l?_:-_)/C,a[0][1])*C,b=Math.max(b,P)}}if(f){let E=po(A*C,m,w)/C;if(S=Math.max(S,E),s){let P=0;!l&&!c||c&&!l&&u?P=Ue(p+A*C+H,s[1][0])/C:P=Ke(p+(c?O:-O)*C+H,s[0][0])/C,S=Math.max(S,P)}if(a){let P=0;!l&&!c||c&&!l&&u?P=Ke(p+A*C,a[1][0])/C:P=Ue(p+(c?O:-O)*C,a[0][0])/C,S=Math.max(S,P)}}}O=O+(O<0?S:-S),_=_+(_<0?b:-b),r&&(u?R>A*C?O=(Ka(l,c)?-_:_)/C:_=(Ka(l,c)?-O:O)*C:d?(O=_/C,c=l):(_=O*C,l=c));let v=l?p+_:p,k=c?y+O:y;return{width:N+(l?-_:_),height:I+(c?-O:O),x:i[0]*_*(l?-1:1)+v,y:i[1]*O*(c?-1:1)+k}}var _l={width:0,height:0,x:0,y:0},Ug={..._l,pointerX:0,pointerY:0,aspectRatio:1};function Qg(e){return[[0,0],[e.measured.width,e.measured.height]]}function Jg(e,t,n){let o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,l=n[1]*s;return[[o-a,r-l],[o+i-a,r+s-l]]}function El({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){let i=pe(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:d,resizeDirection:f,onResizeStart:u,onResize:h,onResizeEnd:g,shouldResize:m}){let w={..._l},x={...Ug},M=Zg(l),p,y=null,N=[],I,C,_,O=qn().on("start",R=>{let{nodeLookup:A,transform:H,snapGrid:B,snapToGrid:b,nodeOrigin:S,paneDomNode:v}=n();if(p=A.get(t),!p)return;y=v?.getBoundingClientRect()??null;let{xSnapped:k,ySnapped:E}=yn(R.sourceEvent,{transform:H,snapGrid:B,snapToGrid:b,containerBounds:y});w={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},x={...w,pointerX:k,pointerY:E,aspectRatio:w.width/w.height},I=void 0,p.parentId&&(p.extent==="parent"||p.expandParent)&&(I=A.get(p.parentId),C=I&&p.extent==="parent"?Qg(I):void 0),N=[],_=void 0;for(let[P,L]of A)if(L.parentId===t&&(N.push({id:P,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){let z=Jg(L,p,L.origin??S);_?_=[[Math.min(z[0][0],_[0][0]),Math.min(z[0][1],_[0][1])],[Math.max(z[1][0],_[1][0]),Math.max(z[1][1],_[1][1])]]:_=z}u?.(R,{...w})}).on("drag",R=>{let{transform:A,snapGrid:H,snapToGrid:B,nodeOrigin:b}=n(),S=yn(R.sourceEvent,{transform:A,snapGrid:H,snapToGrid:B,containerBounds:y}),v=[];if(!p)return;let{x:k,y:E,width:P,height:L}=w,z={},V=p.origin??b,{width:q,height:F,x:X,y:Z}=Kg(x,M,S,c,d,V,C,_),$=q!==P,K=F!==L,Q=X!==k&&$,oe=Z!==E&&K;if(!Q&&!oe&&!$&&!K)return;if((Q||oe||V[0]===1||V[1]===1)&&(z.x=Q?X:w.x,z.y=oe?Z:w.y,w.x=z.x,w.y=z.y,N.length>0)){let re=X-k,me=Z-E;for(let _e of N)_e.position={x:_e.position.x-re+V[0]*(q-P),y:_e.position.y-me+V[1]*(F-L)},v.push(_e)}if(($||K)&&(z.width=$&&(!f||f==="horizontal")?q:w.width,z.height=K&&(!f||f==="vertical")?F:w.height,w.width=z.width,w.height=z.height),I&&p.expandParent){let re=V[0]*(z.width??0);z.x&&z.x<re&&(w.x=re,x.x=x.x-(z.x-re));let me=V[1]*(z.height??0);z.y&&z.y<me&&(w.y=me,x.y=x.y-(z.y-me))}let ne=jg({width:w.width,prevWidth:P,height:w.height,prevHeight:L,affectsX:M.affectsX,affectsY:M.affectsY}),W={...w,direction:ne};m?.(R,W)!==!1&&(h?.(R,W),o(z,v))}).on("end",R=>{g?.(R,{...w}),r?.({...w})});i.call(O)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}var Pl=J(Ee(),1),Dl=J(Cl(),1);var Ml=e=>{let t,n=new Set,o=(d,f)=>{let u=typeof d=="function"?d(t):d;if(!Object.is(u,t)){let h=t;t=f??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(g=>g(t,h))}},r=()=>t,l={setState:o,getState:r,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(o,r,l);return l},Il=e=>e?Ml(e):Ml;var{useDebugValue:lb}=Pl.default,{useSyncExternalStoreWithSelector:cb}=Dl.default,db=e=>e;function Yr(e,t=db,n){let o=cb(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return lb(o),o}var Tl=(e,t)=>{let n=Il(e),o=(r,i=t)=>Yr(n,r,i);return Object.assign(o,n),o},Ol=(e,t)=>e?Tl(e,t):Tl;function ae(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let o of e)if(!t.has(o))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var ub=J(Kh()),Do=(0,D.createContext)(null),fb=Do.Provider,oc=ve.error001();function te(e,t){let n=(0,D.useContext)(Do);if(n===null)throw new Error(oc);return Yr(n,e,t)}function se(){let e=(0,D.useContext)(Do);if(e===null)throw new Error(oc);return(0,D.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}var Rl={display:"none"},hb={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rc="react-flow__node-desc",ic="react-flow__edge-desc",pb="react-flow__aria-live",mb=e=>e.ariaLiveMessage;function gb({rfId:e}){let t=te(mb);return(0,T.jsx)("div",{id:`${pb}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:hb,children:t})}function bb({rfId:e,disableKeyboardA11y:t}){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{id:`${rc}-${e}`,style:Rl,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,T.jsx)("div",{id:`${ic}-${e}`,style:Rl,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,T.jsx)(gb,{rfId:e})]})}var yb=e=>e.userSelectionActive?"none":"all",pt=(0,D.forwardRef)(({position:e="top-left",children:t,className:n,style:o,...r},i)=>{let s=te(yb),a=`${e}`.split("-");return(0,T.jsx)("div",{className:le(["react-flow__panel",n,...a]),style:{...o,pointerEvents:s},ref:i,...r,children:t})});pt.displayName="Panel";function xb({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,T.jsx)(pt,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,T.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}var wb=e=>{let t=[],n=[];for(let[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(let[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Io=e=>e.id;function vb(e,t){return ae(e.selectedNodes.map(Io),t.selectedNodes.map(Io))&&ae(e.selectedEdges.map(Io),t.selectedEdges.map(Io))}function _b({onSelectionChange:e}){let t=se(),{selectedNodes:n,selectedEdges:o}=te(wb,vb);return(0,D.useEffect)(()=>{let r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,e]),null}var Eb=e=>!!e.onSelectionChangeHandlers;function kb({onSelectionChange:e}){let t=te(Eb);return e||t?(0,T.jsx)(_b,{onSelectionChange:e}):null}var sc=[0,0],Nb={x:0,y:0,zoom:1},Sb=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],zl=[...Sb,"rfId"],Cb=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Al={translateExtent:Rt,nodeOrigin:sc,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Mb(e){let{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=te(Cb,ae),d=se();(0,D.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{f.current=Al,a()}),[]);let f=(0,D.useRef)(Al);return(0,D.useEffect)(()=>{for(let u of zl){let h=e[u],g=f.current[u];h!==g&&(typeof e[u]>"u"||(u==="nodes"?t(h):u==="edges"?n(h):u==="minZoom"?o(h):u==="maxZoom"?r(h):u==="translateExtent"?i(h):u==="nodeExtent"?s(h):u==="paneClickDistance"?c(h):u==="fitView"?d.setState({fitViewQueued:h}):u==="fitViewOptions"?d.setState({fitViewOptions:h}):d.setState({[u]:h})))}f.current=e},zl.map(u=>e[u])),null}function Ll(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ib(e){let[t,n]=(0,D.useState)(e==="system"?null:e);return(0,D.useEffect)(()=>{if(e!=="system"){n(e);return}let o=Ll(),r=()=>n(o?.matches?"dark":"light");return r(),o?.addEventListener("change",r),()=>{o?.removeEventListener("change",r)}},[e]),t!==null?t:Ll()?.matches?"dark":"light"}var Hl=typeof document<"u"?document:null;function Sn(e=null,t={target:Hl,actInsideInputWithModifier:!0}){let[n,o]=(0,D.useState)(!1),r=(0,D.useRef)(!1),i=(0,D.useRef)(new Set([])),[s,a]=(0,D.useMemo)(()=>{if(e!==null){let c=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=c.reduce((f,u)=>f.concat(...u),[]);return[c,d]}return[[],[]]},[e]);return(0,D.useEffect)(()=>{let l=t?.target||Hl;if(e!==null){let c=u=>{if(r.current=u.ctrlKey||u.metaKey||u.shiftKey||u.altKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Ar(u))return!1;let g=$l(u.code,a);if(i.current.add(u[g]),Bl(s,i.current,!1)){let m=u.composedPath?.()?.[0]||u.target,w=m?.nodeName==="BUTTON"||m?.nodeName==="A";t.preventDefault!==!1&&(r.current||!w)&&u.preventDefault(),o(!0)}},d=u=>{let h=$l(u.code,a);Bl(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(u[h]),u.key==="Meta"&&i.current.clear(),r.current=!1},f=()=>{i.current.clear(),o(!1)};return l?.addEventListener("keydown",c),l?.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l?.removeEventListener("keydown",c),l?.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,o]),n}function Bl(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function $l(e,t){return t.includes(e)?"code":"key"}var Tb=()=>{let e=se();return(0,D.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>{let{width:r,height:i,maxZoom:s,panZoom:a}=e.getState(),l=typeof o?.zoom<"u"?o.zoom:s,c=r/2-t*l,d=i/2-n*l;return a?(await a.setViewport({x:c,y:d,zoom:l},{duration:o?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{let{width:o,height:r,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),l=En(t,o,r,i,s,n?.padding??.1);return a?(await a.setViewport(l,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:o,snapGrid:r,snapToGrid:i,domNode:s}=e.getState();if(!s)return t;let{x:a,y:l}=s.getBoundingClientRect(),c={x:t.x-a,y:t.y-l},d=n.snapGrid??r,f=n.snapToGrid??i;return Lt(c,o,f,d)},flowToScreenPosition:t=>{let{transform:n,domNode:o}=e.getState();if(!o)return t;let{x:r,y:i}=o.getBoundingClientRect(),s=xn(t,n);return{x:s.x+r,y:s.y+i}}}),[])};function ac(e,t){let n=[],o=new Map,r=[];for(let i of e)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{let s=o.get(i.id);s?s.push(i):o.set(i.id,[i])}for(let i of t){let s=o.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}let a={...i};for(let l of s)Pb(l,a);n.push(a)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Pb(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function lc(e,t){return ac(e,t)}function cc(e,t){return ac(e,t)}function ht(e,t){return{id:e,type:"select",selected:t}}function Ht(e,t=new Set,n=!1){let o=[];for(let[r,i]of e){let s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(ht(i.id,s)))}return o}function Vl({items:e=[],lookup:t}){let n=[],o=new Map(e.map(r=>[r.id,r]));for(let[r,i]of e.entries()){let s=t.get(i.id),a=s?.internals?.userNode??s;a!==void 0&&a!==i&&n.push({id:i.id,item:i,type:"replace"}),a===void 0&&n.push({item:i,type:"add",index:r})}for(let[r]of t)o.get(r)===void 0&&n.push({id:r,type:"remove"});return n}function Fl(e){return{id:e.id,type:"remove"}}var ql=e=>Ua(e),Db=e=>kr(e);function dc(e){return(0,D.forwardRef)(e)}var Ob=typeof window<"u"?D.useLayoutEffect:D.useEffect;function Yl(e){let[t,n]=(0,D.useState)(BigInt(0)),[o]=(0,D.useState)(()=>Rb(()=>n(r=>r+BigInt(1))));return Ob(()=>{let r=o.get();r.length&&(e(r),o.reset())},[t]),o}function Rb(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}var uc=(0,D.createContext)(null);function zb({children:e}){let t=se(),n=(0,D.useCallback)(a=>{let{nodes:l=[],setNodes:c,hasDefaultNodes:d,onNodesChange:f,nodeLookup:u,fitViewQueued:h}=t.getState(),g=l;for(let m of a)g=typeof m=="function"?m(g):m;if(d)c(g);else{let m=Vl({items:g,lookup:u});m.length>0?f?.(m):h&&window.requestAnimationFrame(()=>{let{fitViewQueued:w,nodes:x,setNodes:M}=t.getState();w&&M(x)})}},[]),o=Yl(n),r=(0,D.useCallback)(a=>{let{edges:l=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:u}=t.getState(),h=l;for(let g of a)h=typeof g=="function"?g(h):g;d?c(h):f&&f(Vl({items:h,lookup:u}))},[]),i=Yl(r),s=(0,D.useMemo)(()=>({nodeQueue:o,edgeQueue:i}),[]);return(0,T.jsx)(uc.Provider,{value:s,children:e})}function Ab(){let e=(0,D.useContext)(uc);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}var Lb=e=>!!e.panZoom;function Cn(){let e=Tb(),t=se(),n=Ab(),o=te(Lb),r=(0,D.useMemo)(()=>{let i=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},l=f=>{let{nodeLookup:u,nodeOrigin:h}=t.getState(),g=ql(f)?f:u.get(f.id),m=g.parentId?Or(g.position,g.measured,g.parentId,u,h):g.position,w={...g,position:m,width:g.measured?.width??g.width,height:g.measured?.height??g.height};return ft(w)},c=(f,u,h={replace:!1})=>{s(g=>g.map(m=>{if(m.id===f){let w=typeof u=="function"?u(m):u;return h.replace&&ql(w)?w:{...m,...w}}return m}))},d=(f,u,h={replace:!1})=>{a(g=>g.map(m=>{if(m.id===f){let w=typeof u=="function"?u(m):u;return h.replace&&Db(w)?w:{...m,...w}}return m}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>i(f)?.internals.userNode,getInternalNode:i,getEdges:()=>{let{edges:f=[]}=t.getState();return f.map(u=>({...u}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:a,addNodes:f=>{let u=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...u])},addEdges:f=>{let u=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...u])},toObject:()=>{let{nodes:f=[],edges:u=[],transform:h}=t.getState(),[g,m,w]=h;return{nodes:f.map(x=>({...x})),edges:u.map(x=>({...x})),viewport:{x:g,y:m,zoom:w}}},deleteElements:async({nodes:f=[],edges:u=[]})=>{let{nodes:h,edges:g,onNodesDelete:m,onEdgesDelete:w,triggerNodeChanges:x,triggerEdgeChanges:M,onDelete:p,onBeforeDelete:y}=t.getState(),{nodes:N,edges:I}=await el({nodesToRemove:f,edgesToRemove:u,nodes:h,edges:g,onBeforeDelete:y}),C=I.length>0,_=N.length>0;if(C){let O=I.map(Fl);w?.(I),M(O)}if(_){let O=N.map(Fl);m?.(N),x(O)}return(_||C)&&p?.({nodes:N,edges:I}),{deletedNodes:N,deletedEdges:I}},getIntersectingNodes:(f,u=!0,h)=>{let g=Pr(f),m=g?f:l(f),w=h!==void 0;return m?(h||t.getState().nodes).filter(x=>{let M=t.getState().nodeLookup.get(x.id);if(M&&!g&&(x.id===f.id||!M.internals.positionAbsolute))return!1;let p=ft(w?x:M),y=At(p,m);return u&&y>0||y>=m.width*m.height}):[]},isNodeIntersecting:(f,u,h=!0)=>{let m=Pr(f)?f:l(f);if(!m)return!1;let w=At(m,u);return h&&w>0||w>=m.width*m.height},updateNode:c,updateNodeData:(f,u,h={replace:!1})=>{c(f,g=>{let m=typeof u=="function"?u(g):u;return h.replace?{...g,data:m}:{...g,data:{...g.data,...m}}},h)},updateEdge:d,updateEdgeData:(f,u,h={replace:!1})=>{d(f,g=>{let m=typeof u=="function"?u(g):u;return h.replace?{...g,data:m}:{...g,data:{...g.data,...m}}},h)},getNodesBounds:f=>{let{nodeLookup:u,nodeOrigin:h}=t.getState();return Cr(f,{nodeLookup:u,nodeOrigin:h})},getHandleConnections:({type:f,id:u,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}-${f}${u?`-${u}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:u,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}${f?u?`-${f}-${u}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{let u=t.getState().fitViewResolver??ol();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:u}),n.nodeQueue.push(h=>[...h]),u.promise}}},[]);return(0,D.useMemo)(()=>({...r,...e,viewportInitialized:o}),[o])}var Gl=e=>e.selected,Hb={actInsideInputWithModifier:!1},Bb=typeof window<"u"?window:void 0;function $b({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=se(),{deleteElements:o}=Cn(),r=Sn(e,Hb),i=Sn(t,{target:Bb});(0,D.useEffect)(()=>{if(r){let{edges:s,nodes:a}=n.getState();o({nodes:a.filter(Gl),edges:s.filter(Gl)}),n.setState({nodesSelectionActive:!1})}},[r]),(0,D.useEffect)(()=>{n.setState({multiSelectionActive:i})},[i])}function Vb(e){let t=se();(0,D.useEffect)(()=>{let n=()=>{if(!e.current)return!1;let o=xo(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",ve.error004()),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);let o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}var Oo={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fb=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function qb({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=Fe.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:c,minZoom:d,maxZoom:f,zoomActivationKeyCode:u,preventScrolling:h=!0,children:g,noWheelClassName:m,noPanClassName:w,onViewportChange:x,isControlledViewport:M,paneClickDistance:p}){let y=se(),N=(0,D.useRef)(null),{userSelectionActive:I,lib:C}=te(Fb,ae),_=Sn(u),O=(0,D.useRef)();Vb(N);let R=(0,D.useCallback)(A=>{x?.({x:A[0],y:A[1],zoom:A[2]}),M||y.setState({transform:A})},[x,M]);return(0,D.useEffect)(()=>{if(N.current){O.current=vl({domNode:N.current,minZoom:d,maxZoom:f,translateExtent:c,viewport:l,paneClickDistance:p,onDraggingChange:b=>y.setState({paneDragging:b}),onPanZoomStart:(b,S)=>{let{onViewportChangeStart:v,onMoveStart:k}=y.getState();k?.(b,S),v?.(S)},onPanZoom:(b,S)=>{let{onViewportChange:v,onMove:k}=y.getState();k?.(b,S),v?.(S)},onPanZoomEnd:(b,S)=>{let{onViewportChangeEnd:v,onMoveEnd:k}=y.getState();k?.(b,S),v?.(S)}});let{x:A,y:H,zoom:B}=O.current.getViewport();return y.setState({panZoom:O.current,transform:[A,H,B],domNode:N.current.closest(".react-flow")}),()=>{O.current?.destroy()}}},[]),(0,D.useEffect)(()=>{O.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:_,preventScrolling:h,noPanClassName:w,userSelectionActive:I,noWheelClassName:m,lib:C,onTransformChange:R})},[e,t,n,o,r,i,s,a,_,h,w,I,m,C,R]),(0,T.jsx)("div",{className:"react-flow__renderer",ref:N,style:Oo,children:g})}var Yb=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Gb(){let{userSelectionActive:e,userSelectionRect:t}=te(Yb,ae);return e&&t?(0,T.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}var Gr=(e,t)=>n=>{n.target===t.current&&e?.(n)},Xb=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Wb({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ct.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:u,children:h}){let g=se(),{userSelectionActive:m,elementsSelectable:w,dragging:x,connectionInProgress:M}=te(Xb,ae),p=w&&(e||m),y=(0,D.useRef)(null),N=(0,D.useRef)(),I=(0,D.useRef)(new Set),C=(0,D.useRef)(new Set),_=(0,D.useRef)(!1),O=(0,D.useRef)(!1),R=k=>{if(_.current||M){_.current=!1;return}a?.(k),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},A=k=>{if(Array.isArray(o)&&o?.includes(2)){k.preventDefault();return}l?.(k)},H=c?k=>c(k):void 0,B=k=>{let{resetSelectedElements:E,domNode:P}=g.getState();if(N.current=P?.getBoundingClientRect(),!w||!e||k.button!==0||k.target!==y.current||!N.current)return;k.target?.setPointerCapture?.(k.pointerId),O.current=!0,_.current=!1;let{x:L,y:z}=ze(k.nativeEvent,N.current);E(),g.setState({userSelectionRect:{width:0,height:0,startX:L,startY:z,x:L,y:z}}),i?.(k)},b=k=>{let{userSelectionRect:E,transform:P,nodeLookup:L,edgeLookup:z,connectionLookup:V,triggerNodeChanges:q,triggerEdgeChanges:F,defaultEdgeOptions:X}=g.getState();if(!N.current||!E)return;_.current=!0;let{x:Z,y:$}=ze(k.nativeEvent,N.current),{startX:K,startY:Q}=E,oe={startX:K,startY:Q,x:Z<K?Z:K,y:$<Q?$:Q,width:Math.abs(Z-K),height:Math.abs($-Q)},ne=I.current,W=C.current;I.current=new Set(Mr(L,oe,P,n===ct.Partial,!0).map(re=>re.id)),C.current=new Set;let ue=X?.selectable??!0;for(let re of I.current){let me=V.get(re);if(me)for(let{edgeId:_e}of me.values()){let wt=z.get(_e);wt&&(wt.selectable??ue)&&C.current.add(_e)}}if(!Rr(ne,I.current)){let re=Ht(L,I.current,!0);q(re)}if(!Rr(W,C.current)){let re=Ht(z,C.current);F(re)}g.setState({userSelectionRect:oe,userSelectionActive:!0,nodesSelectionActive:!1})},S=k=>{if(k.button!==0||!O.current)return;k.target?.releasePointerCapture?.(k.pointerId);let{userSelectionRect:E}=g.getState();!m&&E&&k.target===y.current&&R?.(k),g.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:I.current.size>0}),s?.(k),(t||r)&&(_.current=!1),O.current=!1},v=o===!0||Array.isArray(o)&&o.includes(0);return(0,T.jsxs)("div",{className:le(["react-flow__pane",{draggable:v,dragging:x,selection:e}]),onClick:p?void 0:Gr(R,y),onContextMenu:Gr(A,y),onWheel:Gr(H,y),onPointerEnter:p?void 0:d,onPointerDown:p?B:f,onPointerMove:p?b:f,onPointerUp:p?S:void 0,onPointerLeave:u,ref:y,style:Oo,children:[h,(0,T.jsx)(Gb,{})]})}function Wr({id:e,store:t,unselect:n=!1,nodeRef:o}){let{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),c=a.get(e);if(!c){l?.("012",ve.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([e])}function fc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:s}){let a=se(),[l,c]=(0,D.useState)(!1),d=(0,D.useRef)();return(0,D.useEffect)(()=>{d.current=hl({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{Wr({id:f,store:a,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),(0,D.useEffect)(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:s}),()=>{d.current?.destroy()}},[n,o,t,i,e,r]),l}var jb=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function hc(){let e=se();return(0,D.useCallback)(n=>{let{nodeExtent:o,snapToGrid:r,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:l,nodeLookup:c,nodeOrigin:d}=e.getState(),f=new Map,u=jb(s),h=r?i[0]:5,g=r?i[1]:5,m=n.direction.x*h*n.factor,w=n.direction.y*g*n.factor;for(let[,x]of c){if(!u(x))continue;let M={x:x.internals.positionAbsolute.x+m,y:x.internals.positionAbsolute.y+w};r&&(M=_n(M,i));let{position:p,positionAbsolute:y}=Ir({nodeId:x.id,nextPosition:M,nodeLookup:c,nodeExtent:o,nodeOrigin:d,onError:a});x.position=p,x.internals.positionAbsolute=y,f.set(x.id,x)}l(f)},[])}var jr=(0,D.createContext)(null),Zb=jr.Provider;jr.Consumer;var pc=()=>(0,D.useContext)(jr),Kb=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Ub=(e,t,n)=>o=>{let{connectionClickStartHandle:r,connectionMode:i,connection:s}=o,{fromHandle:a,toHandle:l,isValid:c}=s,d=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:a?.nodeId===e&&a?.id===t&&a?.type===n,connectingTo:d,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:i===Qe.Strict?a?.type!==n:e!==a?.nodeId||t!==a?.id,connectionInProcess:!!a,clickConnectionInProcess:!!r,valid:d&&c}};function Qb({type:e="source",position:t=j.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:l,className:c,onMouseDown:d,onTouchStart:f,...u},h){let g=s||null,m=e==="target",w=se(),x=pc(),{connectOnClick:M,noPanClassName:p,rfId:y}=te(Kb,ae),{connectingFrom:N,connectingTo:I,clickConnecting:C,isPossibleEndHandle:_,connectionInProcess:O,clickConnectionInProcess:R,valid:A}=te(Ub(x,g,e),ae);x||w.getState().onError?.("010",ve.error010());let H=S=>{let{defaultEdgeOptions:v,onConnect:k,hasDefaultEdges:E}=w.getState(),P={...v,...S};if(E){let{edges:L,setEdges:z}=w.getState();z(Br(P,L))}k?.(P),a?.(P)},B=S=>{if(!x)return;let v=Lr(S.nativeEvent);if(r&&(v&&S.button===0||!v)){let k=w.getState();So.onPointerDown(S.nativeEvent,{autoPanOnConnect:k.autoPanOnConnect,connectionMode:k.connectionMode,connectionRadius:k.connectionRadius,domNode:k.domNode,nodeLookup:k.nodeLookup,lib:k.lib,isTarget:m,handleId:g,nodeId:x,flowId:k.rfId,panBy:k.panBy,cancelConnection:k.cancelConnection,onConnectStart:k.onConnectStart,onConnectEnd:k.onConnectEnd,updateConnection:k.updateConnection,onConnect:H,isValidConnection:n||k.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:k.autoPanSpeed})}v?d?.(S):f?.(S)},b=S=>{let{onClickConnectStart:v,onClickConnectEnd:k,connectionClickStartHandle:E,connectionMode:P,isValidConnection:L,lib:z,rfId:V,nodeLookup:q,connection:F}=w.getState();if(!x||!E&&!r)return;if(!E){v?.(S.nativeEvent,{nodeId:x,handleId:g,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}let X=zr(S.target),Z=n||L,{connection:$,isValid:K}=So.isValid(S.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:P,fromNodeId:E.nodeId,fromHandleId:E.id||null,fromType:E.type,isValidConnection:Z,flowId:V,doc:X,lib:z,nodeLookup:q});K&&$&&H($);let Q=structuredClone(F);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,k?.(S,Q),w.setState({connectionClickStartHandle:null})};return(0,T.jsx)("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${y}-${x}-${g}-${e}`,className:le(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",p,c,{source:!m,target:m,connectable:o,connectablestart:r,connectableend:i,clickconnecting:C,connectingfrom:N,connectingto:I,valid:A,connectionindicator:o&&(!O||_)&&(O||R?i:r)}]),onMouseDown:B,onTouchStart:B,onClick:M?b:void 0,ref:h,...u,children:l})}var Bt=(0,D.memo)(dc(Qb));function Jb({data:e,isConnectable:t,sourcePosition:n=j.Bottom}){return(0,T.jsxs)(T.Fragment,{children:[e?.label,(0,T.jsx)(Bt,{type:"source",position:n,isConnectable:t})]})}function ey({data:e,isConnectable:t,targetPosition:n=j.Top,sourcePosition:o=j.Bottom}){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Bt,{type:"target",position:n,isConnectable:t}),e?.label,(0,T.jsx)(Bt,{type:"source",position:o,isConnectable:t})]})}function ty(){return null}function ny({data:e,isConnectable:t,targetPosition:n=j.Top}){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Bt,{type:"target",position:n,isConnectable:t}),e?.label]})}var Po={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Xl={input:Jb,default:ey,output:ny,group:ty};function oy(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}var ry=e=>{let{width:t,height:n,x:o,y:r}=zt(e.nodeLookup,{filter:i=>!!i.selected});return{width:Ne(t)?t:null,height:Ne(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function iy({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let o=se(),{width:r,height:i,transformString:s,userSelectionActive:a}=te(ry,ae),l=hc(),c=(0,D.useRef)(null);if((0,D.useEffect)(()=>{n||c.current?.focus({preventScroll:!0})},[n]),fc({nodeRef:c}),a||!r||!i)return null;let d=e?u=>{let h=o.getState().nodes.filter(g=>g.selected);e(u,h)}:void 0,f=u=>{Object.prototype.hasOwnProperty.call(Po,u.key)&&(u.preventDefault(),l({direction:Po[u.key],factor:u.shiftKey?4:1}))};return(0,T.jsx)("div",{className:le(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:(0,T.jsx)("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:r,height:i}})})}var Wl=typeof window<"u"?window:void 0,sy=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function mc({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:f,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:m,zoomActivationKeyCode:w,elementsSelectable:x,zoomOnScroll:M,zoomOnPinch:p,panOnScroll:y,panOnScrollSpeed:N,panOnScrollMode:I,zoomOnDoubleClick:C,panOnDrag:_,defaultViewport:O,translateExtent:R,minZoom:A,maxZoom:H,preventScrolling:B,onSelectionContextMenu:b,noWheelClassName:S,noPanClassName:v,disableKeyboardA11y:k,onViewportChange:E,isControlledViewport:P}){let{nodesSelectionActive:L,userSelectionActive:z}=te(sy),V=Sn(c,{target:Wl}),q=Sn(m,{target:Wl}),F=q||_,X=q||y,Z=d&&F!==!0,$=V||z||Z;return $b({deleteKeyCode:l,multiSelectionKeyCode:g}),(0,T.jsx)(qb,{onPaneContextMenu:i,elementsSelectable:x,zoomOnScroll:M,zoomOnPinch:p,panOnScroll:X,panOnScrollSpeed:N,panOnScrollMode:I,zoomOnDoubleClick:C,panOnDrag:!V&&F,defaultViewport:O,translateExtent:R,minZoom:A,maxZoom:H,zoomActivationKeyCode:w,preventScrolling:B,noWheelClassName:S,noPanClassName:v,onViewportChange:E,isControlledViewport:P,paneClickDistance:a,children:(0,T.jsxs)(Wb,{onSelectionStart:u,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:F,isSelecting:!!$,selectionMode:f,selectionKeyPressed:V,selectionOnDrag:Z,children:[e,L&&(0,T.jsx)(iy,{onSelectionContextMenu:b,noPanClassName:v,disableKeyboardA11y:k})]})})}mc.displayName="FlowRenderer";var ay=(0,D.memo)(mc),ly=e=>t=>e?Mr(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function cy(e){return te((0,D.useCallback)(ly(e),[e]),ae)}var dy=e=>e.updateNodeInternals;function uy(){let e=te(dy),[t]=(0,D.useState)(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{let o=new Map;n.forEach(r=>{let i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),e(o)}));return(0,D.useEffect)(()=>()=>{t?.disconnect()},[t]),t}function fy({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){let r=se(),i=(0,D.useRef)(null),s=(0,D.useRef)(null),a=(0,D.useRef)(e.sourcePosition),l=(0,D.useRef)(e.targetPosition),c=(0,D.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,D.useEffect)(()=>{i.current&&!e.hidden&&(!d||s.current!==i.current)&&(s.current&&o?.unobserve(s.current),o?.observe(i.current),s.current=i.current)},[d,e.hidden]),(0,D.useEffect)(()=>()=>{s.current&&(o?.unobserve(s.current),s.current=null)},[]),(0,D.useEffect)(()=>{if(i.current){let f=c.current!==t,u=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(f||u||h)&&(c.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function hy({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:f,noDragClassName:u,noPanClassName:h,disableKeyboardA11y:g,rfId:m,nodeTypes:w,nodeClickDistance:x,onError:M}){let{node:p,internals:y,isParent:N}=te($=>{let K=$.nodeLookup.get(e),Q=$.parentLookup.has(e);return{node:K,internals:K.internals,isParent:Q}},ae),I=p.type||"default",C=w?.[I]||Xl[I];C===void 0&&(M?.("003",ve.error003(I)),I="default",C=Xl.default);let _=!!(p.draggable||a&&typeof p.draggable>"u"),O=!!(p.selectable||l&&typeof p.selectable>"u"),R=!!(p.connectable||c&&typeof p.connectable>"u"),A=!!(p.focusable||d&&typeof p.focusable>"u"),H=se(),B=yo(p),b=fy({node:p,nodeType:I,hasDimensions:B,resizeObserver:f}),S=fc({nodeRef:b,disabled:p.hidden||!_,noDragClassName:u,handleSelector:p.dragHandle,nodeId:e,isSelectable:O,nodeClickDistance:x}),v=hc();if(p.hidden)return null;let k=Ae(p),E=oy(p),P=O||_||t||n||o||r,L=n?$=>n($,{...y.userNode}):void 0,z=o?$=>o($,{...y.userNode}):void 0,V=r?$=>r($,{...y.userNode}):void 0,q=i?$=>i($,{...y.userNode}):void 0,F=s?$=>s($,{...y.userNode}):void 0,X=$=>{let{selectNodesOnDrag:K,nodeDragThreshold:Q}=H.getState();O&&(!K||!_||Q>0)&&Wr({id:e,store:H,nodeRef:b}),t&&t($,{...y.userNode})},Z=$=>{if(!(Ar($.nativeEvent)||g))if(vr.includes($.key)&&O){let K=$.key==="Escape";Wr({id:e,store:H,unselect:K,nodeRef:b})}else _&&p.selected&&Object.prototype.hasOwnProperty.call(Po,$.key)&&($.preventDefault(),H.setState({ariaLiveMessage:`Moved selected node ${$.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.positionAbsolute.x}, y: ${~~y.positionAbsolute.y}`}),v({direction:Po[$.key],factor:$.shiftKey?4:1}))};return(0,T.jsx)("div",{className:le(["react-flow__node",`react-flow__node-${I}`,{[h]:_},p.className,{selected:p.selected,selectable:O,parent:N,draggable:_,dragging:S}]),ref:b,style:{zIndex:y.z,transform:`translate(${y.positionAbsolute.x}px,${y.positionAbsolute.y}px)`,pointerEvents:P?"all":"none",visibility:B?"visible":"hidden",...p.style,...E},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:L,onMouseMove:z,onMouseLeave:V,onContextMenu:q,onClick:X,onDoubleClick:F,onKeyDown:A?Z:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":g?void 0:`${rc}-${m}`,"aria-label":p.ariaLabel,children:(0,T.jsx)(Zb,{value:e,children:(0,T.jsx)(C,{id:e,data:p.data,type:I,positionAbsoluteX:y.positionAbsolute.x,positionAbsoluteY:y.positionAbsolute.y,selected:p.selected??!1,selectable:O,draggable:_,deletable:p.deletable??!0,isConnectable:R,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:S,dragHandle:p.dragHandle,zIndex:y.z,parentId:p.parentId,...k})})})}var py=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function gc(e){let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=te(py,ae),s=cy(e.onlyRenderVisibleElements),a=uy();return(0,T.jsx)("div",{className:"react-flow__nodes",style:Oo,children:s.map(l=>(0,T.jsx)(hy,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:i},l))})}gc.displayName="NodeRenderer";var my=(0,D.memo)(gc);function gy(e){return te((0,D.useCallback)(n=>{if(!e)return n.edges.map(r=>r.id);let o=[];if(n.width&&n.height)for(let r of n.edges){let i=n.nodeLookup.get(r.source),s=n.nodeLookup.get(r.target);i&&s&&il({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&o.push(r.id)}return o},[e]),ae)}var by=({color:e="none",strokeWidth:t=1})=>(0,T.jsx)("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),yy=({color:e="none",strokeWidth:t=1})=>(0,T.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),jl={[Pt.Arrow]:by,[Pt.ArrowClosed]:yy};function xy(e){let t=se();return(0,D.useMemo)(()=>Object.prototype.hasOwnProperty.call(jl,e)?jl[e]:(t.getState().onError?.("009",ve.error009(e)),null),[e])}var wy=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{let l=xy(t);return l?(0,T.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:(0,T.jsx)(l,{color:n,strokeWidth:s})}):null},bc=({defaultColor:e,rfId:t})=>{let n=te(i=>i.edges),o=te(i=>i.defaultEdgeOptions),r=(0,D.useMemo)(()=>al(n,{id:t,defaultColor:e,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[n,o,t,e]);return r.length?(0,T.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,T.jsx)("defs",{children:r.map(i=>(0,T.jsx)(wy,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};bc.displayName="MarkerDefinitions";var vy=(0,D.memo)(bc);function yc({x:e,y:t,label:n,labelStyle:o,labelShowBg:r=!0,labelBgStyle:i,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...d}){let[f,u]=(0,D.useState)({x:1,y:0,width:0,height:0}),h=le(["react-flow__edge-textwrapper",c]),g=(0,D.useRef)(null);return(0,D.useEffect)(()=>{if(g.current){let m=g.current.getBBox();u({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),n?(0,T.jsxs)("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...d,children:[r&&(0,T.jsx)("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),(0,T.jsx)("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:g,style:o,children:n}),l]}):null}yc.displayName="EdgeText";var _y=(0,D.memo)(yc);function Ro({path:e,labelX:t,labelY:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:c=20,...d}){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("path",{...d,d:e,fill:"none",className:le(["react-flow__edge-path",d.className])}),c&&(0,T.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}),o&&Ne(t)&&Ne(n)?(0,T.jsx)(_y,{x:t,y:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function Zl({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===j.Left||e===j.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function xc({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:i=j.Top}){let[s,a]=Zl({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=Zl({pos:i,x1:o,y1:r,x2:e,y2:t}),[d,f,u,h]=wo({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${a} ${l},${c} ${o},${r}`,d,f,u,h]}function wc(e){return(0,D.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s,targetPosition:a,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:w,interactionWidth:x})=>{let[M,p,y]=xc({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:a}),N=e.isInternal?void 0:t;return(0,T.jsx)(Ro,{id:N,path:M,labelX:p,labelY:y,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:w,interactionWidth:x})})}var Ey=wc({isInternal:!1}),vc=wc({isInternal:!0});Ey.displayName="SimpleBezierEdge";vc.displayName="SimpleBezierEdgeInternal";function _c(e){return(0,D.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:u,sourcePosition:h=j.Bottom,targetPosition:g=j.Top,markerEnd:m,markerStart:w,pathOptions:x,interactionWidth:M})=>{let[p,y,N]=Nn({sourceX:n,sourceY:o,sourcePosition:h,targetX:r,targetY:i,targetPosition:g,borderRadius:x?.borderRadius,offset:x?.offset}),I=e.isInternal?void 0:t;return(0,T.jsx)(Ro,{id:I,path:p,labelX:y,labelY:N,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:u,markerEnd:m,markerStart:w,interactionWidth:M})})}var Ec=_c({isInternal:!1}),kc=_c({isInternal:!0});Ec.displayName="SmoothStepEdge";kc.displayName="SmoothStepEdgeInternal";function Nc(e){return(0,D.memo)(({id:t,...n})=>{let o=e.isInternal?void 0:t;return(0,T.jsx)(Ec,{...n,id:o,pathOptions:(0,D.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}var ky=Nc({isInternal:!1}),Sc=Nc({isInternal:!0});ky.displayName="StepEdge";Sc.displayName="StepEdgeInternal";function Cc(e){return(0,D.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:u,markerEnd:h,markerStart:g,interactionWidth:m})=>{let[w,x,M]=_o({sourceX:n,sourceY:o,targetX:r,targetY:i}),p=e.isInternal?void 0:t;return(0,T.jsx)(Ro,{id:p,path:w,labelX:x,labelY:M,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:u,markerEnd:h,markerStart:g,interactionWidth:m})})}var Ny=Cc({isInternal:!1}),Mc=Cc({isInternal:!0});Ny.displayName="StraightEdge";Mc.displayName="StraightEdgeInternal";function Ic(e){return(0,D.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=j.Bottom,targetPosition:a=j.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:w,pathOptions:x,interactionWidth:M})=>{let[p,y,N]=vo({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:a,curvature:x?.curvature}),I=e.isInternal?void 0:t;return(0,T.jsx)(Ro,{id:I,path:p,labelX:y,labelY:N,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:w,interactionWidth:M})})}var Sy=Ic({isInternal:!1}),Tc=Ic({isInternal:!0});Sy.displayName="BezierEdge";Tc.displayName="BezierEdgeInternal";var Kl={default:Tc,straight:Mc,step:Sc,smoothstep:kc,simplebezier:vc},Ul={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Cy=(e,t,n)=>n===j.Left?e-t:n===j.Right?e+t:e,My=(e,t,n)=>n===j.Top?e-t:n===j.Bottom?e+t:e,Ql="react-flow__edgeupdater";function Jl({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:a}){return(0,T.jsx)("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:le([Ql,`${Ql}-${a}`]),cx:Cy(t,o,e),cy:My(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Iy({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:f,setReconnecting:u,setUpdateHover:h}){let g=se(),m=(y,N)=>{if(y.button!==0)return;let{autoPanOnConnect:I,domNode:C,isValidConnection:_,connectionMode:O,connectionRadius:R,lib:A,onConnectStart:H,onConnectEnd:B,cancelConnection:b,nodeLookup:S,rfId:v,panBy:k,updateConnection:E}=g.getState(),P=N.type==="target";u(!0),d?.(y,n,N.type);let L=(V,q)=>{u(!1),f?.(V,n,N.type,q)},z=V=>c?.(n,V);So.onPointerDown(y.nativeEvent,{autoPanOnConnect:I,connectionMode:O,connectionRadius:R,domNode:C,handleId:N.id,nodeId:N.nodeId,nodeLookup:S,isTarget:P,edgeUpdaterType:N.type,lib:A,flowId:v,cancelConnection:b,panBy:k,isValidConnection:_,onConnect:z,onConnectStart:H,onConnectEnd:B,onReconnectEnd:L,updateConnection:E,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},w=y=>m(y,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=y=>m(y,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),M=()=>h(!0),p=()=>h(!1);return(0,T.jsxs)(T.Fragment,{children:[(e===!0||e==="source")&&(0,T.jsx)(Jl,{position:a,centerX:o,centerY:r,radius:t,onMouseDown:w,onMouseEnter:M,onMouseOut:p,type:"source"}),(e===!0||e==="target")&&(0,T.jsx)(Jl,{position:l,centerX:i,centerY:s,radius:t,onMouseDown:x,onMouseEnter:M,onMouseOut:p,type:"target"})]})}function Ty({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,reconnectRadius:d,onReconnect:f,onReconnectStart:u,onReconnectEnd:h,rfId:g,edgeTypes:m,noPanClassName:w,onError:x,disableKeyboardA11y:M}){let p=te(W=>W.edgeLookup.get(e)),y=te(W=>W.defaultEdgeOptions);p=y?{...y,...p}:p;let N=p.type||"default",I=m?.[N]||Kl[N];I===void 0&&(x?.("011",ve.error011(N)),N="default",I=Kl.default);let C=!!(p.focusable||t&&typeof p.focusable>"u"),_=typeof f<"u"&&(p.reconnectable||n&&typeof p.reconnectable>"u"),O=!!(p.selectable||o&&typeof p.selectable>"u"),R=(0,D.useRef)(null),[A,H]=(0,D.useState)(!1),[B,b]=(0,D.useState)(!1),S=se(),{zIndex:v,sourceX:k,sourceY:E,targetX:P,targetY:L,sourcePosition:z,targetPosition:V}=te((0,D.useCallback)(W=>{let ue=W.nodeLookup.get(p.source),re=W.nodeLookup.get(p.target);if(!ue||!re)return{zIndex:p.zIndex,...Ul};let me=sl({id:e,sourceNode:ue,targetNode:re,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:W.connectionMode,onError:x});return{zIndex:rl({selected:p.selected,zIndex:p.zIndex,sourceNode:ue,targetNode:re,elevateOnSelect:W.elevateEdgesOnSelect}),...me||Ul}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),ae),q=(0,D.useMemo)(()=>p.markerStart?`url('#${Eo(p.markerStart,g)}')`:void 0,[p.markerStart,g]),F=(0,D.useMemo)(()=>p.markerEnd?`url('#${Eo(p.markerEnd,g)}')`:void 0,[p.markerEnd,g]);if(p.hidden||k===null||E===null||P===null||L===null)return null;let X=W=>{let{addSelectedEdges:ue,unselectNodesAndEdges:re,multiSelectionActive:me}=S.getState();O&&(S.setState({nodesSelectionActive:!1}),p.selected&&me?(re({nodes:[],edges:[p]}),R.current?.blur()):ue([e])),r&&r(W,p)},Z=i?W=>{i(W,{...p})}:void 0,$=s?W=>{s(W,{...p})}:void 0,K=a?W=>{a(W,{...p})}:void 0,Q=l?W=>{l(W,{...p})}:void 0,oe=c?W=>{c(W,{...p})}:void 0,ne=W=>{if(!M&&vr.includes(W.key)&&O){let{unselectNodesAndEdges:ue,addSelectedEdges:re}=S.getState();W.key==="Escape"?(R.current?.blur(),ue({edges:[p]})):re([e])}};return(0,T.jsx)("svg",{style:{zIndex:v},children:(0,T.jsxs)("g",{className:le(["react-flow__edge",`react-flow__edge-${N}`,p.className,w,{selected:p.selected,animated:p.animated,inactive:!O&&!r,updating:A,selectable:O}]),onClick:X,onDoubleClick:Z,onContextMenu:$,onMouseEnter:K,onMouseMove:Q,onMouseLeave:oe,onKeyDown:C?ne:void 0,tabIndex:C?0:void 0,role:C?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":C?`${ic}-${g}`:void 0,ref:R,children:[!B&&(0,T.jsx)(I,{id:e,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:O,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:k,sourceY:E,targetX:P,targetY:L,sourcePosition:z,targetPosition:V,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:q,markerEnd:F,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),_&&(0,T.jsx)(Iy,{edge:p,isReconnectable:_,reconnectRadius:d,onReconnect:f,onReconnectStart:u,onReconnectEnd:h,sourceX:k,sourceY:E,targetX:P,targetY:L,sourcePosition:z,targetPosition:V,setUpdateHover:H,setReconnecting:b})]})})}var Py=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Pc({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:m}){let{edgesFocusable:w,edgesReconnectable:x,elementsSelectable:M,onError:p}=te(Py,ae),y=gy(t);return(0,T.jsxs)("div",{className:"react-flow__edges",children:[(0,T.jsx)(vy,{defaultColor:e,rfId:n}),y.map(N=>(0,T.jsx)(Ty,{id:N,edgesFocusable:w,edgesReconnectable:x,elementsSelectable:M,noPanClassName:r,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:f,onDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:p,edgeTypes:o,disableKeyboardA11y:m},N))]})}Pc.displayName="EdgeRenderer";var Dy=(0,D.memo)(Pc),Oy=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ry({children:e}){let t=te(Oy);return(0,T.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function zy(e){let t=Cn(),n=(0,D.useRef)(!1);(0,D.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var Ay=e=>e.panZoom?.syncViewport;function Ly(e){let t=te(Ay),n=se();return(0,D.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function ec(e){return e.connection.inProgress?{...e.connection,to:Lt(e.connection.to,e.transform)}:{...e.connection}}function Hy(e){return e?n=>{let o=ec(n);return e(o)}:ec}function By(e){let t=Hy(e);return te(t,ae)}var $y=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Vy({containerStyle:e,style:t,type:n,component:o}){let{nodesConnectable:r,width:i,height:s,isValid:a,inProgress:l}=te($y,ae);return!(i&&r&&l)?null:(0,T.jsx)("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:(0,T.jsx)("g",{className:le(["react-flow__connection",Er(a)]),children:(0,T.jsx)(Dc,{style:t,type:n,CustomComponent:o,isValid:a})})})}var Dc=({style:e,type:t=Se.Bezier,CustomComponent:n,isValid:o})=>{let{inProgress:r,from:i,fromNode:s,fromHandle:a,fromPosition:l,to:c,toNode:d,toHandle:f,toPosition:u}=By();if(!r)return;if(n)return(0,T.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:u,connectionStatus:Er(o),toNode:d,toHandle:f});let h="",g={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:u};switch(t){case Se.Bezier:[h]=vo(g);break;case Se.SimpleBezier:[h]=xc(g);break;case Se.Step:[h]=Nn({...g,borderRadius:0});break;case Se.SmoothStep:[h]=Nn(g);break;default:[h]=_o(g)}return(0,T.jsx)("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Dc.displayName="ConnectionLine";var Fy={};function tc(e=Fy){let t=(0,D.useRef)(e),n=se();(0,D.useEffect)(()=>{},[e])}function qy(){let e=se(),t=(0,D.useRef)(!1);(0,D.useEffect)(()=>{},[])}function Oc({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:u,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:m,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:M,selectionOnDrag:p,selectionMode:y,multiSelectionKeyCode:N,panActivationKeyCode:I,zoomActivationKeyCode:C,deleteKeyCode:_,onlyRenderVisibleElements:O,elementsSelectable:R,defaultViewport:A,translateExtent:H,minZoom:B,maxZoom:b,preventScrolling:S,defaultMarkerColor:v,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:P,panOnScrollSpeed:L,panOnScrollMode:z,zoomOnDoubleClick:V,panOnDrag:q,onPaneClick:F,onPaneMouseEnter:X,onPaneMouseMove:Z,onPaneMouseLeave:$,onPaneScroll:K,onPaneContextMenu:Q,paneClickDistance:oe,nodeClickDistance:ne,onEdgeContextMenu:W,onEdgeMouseEnter:ue,onEdgeMouseMove:re,onEdgeMouseLeave:me,reconnectRadius:_e,onReconnect:wt,onReconnectStart:Go,onReconnectEnd:Xo,noDragClassName:jt,noWheelClassName:Wo,noPanClassName:Zt,disableKeyboardA11y:Kt,nodeExtent:jo,rfId:vt,viewport:_t,onViewportChange:Rn}){return tc(e),tc(t),qy(),zy(n),Ly(_t),(0,T.jsx)(ay,{onPaneClick:F,onPaneMouseEnter:X,onPaneMouseMove:Z,onPaneMouseLeave:$,onPaneContextMenu:Q,onPaneScroll:K,paneClickDistance:oe,deleteKeyCode:_,selectionKeyCode:M,selectionOnDrag:p,selectionMode:y,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:N,panActivationKeyCode:I,zoomActivationKeyCode:C,elementsSelectable:R,zoomOnScroll:k,zoomOnPinch:E,zoomOnDoubleClick:V,panOnScroll:P,panOnScrollSpeed:L,panOnScrollMode:z,panOnDrag:q,defaultViewport:A,translateExtent:H,minZoom:B,maxZoom:b,onSelectionContextMenu:f,preventScrolling:S,noDragClassName:jt,noWheelClassName:Wo,noPanClassName:Zt,disableKeyboardA11y:Kt,onViewportChange:Rn,isControlledViewport:!!_t,children:(0,T.jsxs)(Ry,{children:[(0,T.jsx)(Dy,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:s,onReconnect:wt,onReconnectStart:Go,onReconnectEnd:Xo,onlyRenderVisibleElements:O,onEdgeContextMenu:W,onEdgeMouseEnter:ue,onEdgeMouseMove:re,onEdgeMouseLeave:me,reconnectRadius:_e,defaultMarkerColor:v,noPanClassName:Zt,disableKeyboardA11y:Kt,rfId:vt}),(0,T.jsx)(Vy,{style:m,type:g,component:w,containerStyle:x}),(0,T.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,T.jsx)(my,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:ne,onlyRenderVisibleElements:O,noPanClassName:Zt,noDragClassName:jt,disableKeyboardA11y:Kt,nodeExtent:jo,rfId:vt}),(0,T.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Oc.displayName="GraphView";var Yy=(0,D.memo)(Oc),nc=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:f}={})=>{let u=new Map,h=new Map,g=new Map,m=new Map,w=o??t??[],x=n??e??[],M=d??[0,0],p=f??Rt;qr(g,m,w);let y=ko(x,u,h,{nodeOrigin:M,nodeExtent:p,elevateNodesOnSelect:!1}),N=[0,0,1];if(s&&r&&i){let I=zt(u,{filter:R=>!!((R.width||R.initialWidth)&&(R.height||R.initialHeight))}),{x:C,y:_,zoom:O}=En(I,r,i,l,c,a?.padding??.1);N=[C,_,O]}return{rfId:"1",width:0,height:0,transform:N,nodes:x,nodesInitialized:y,nodeLookup:u,parentLookup:h,edges:w,edgeLookup:m,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:l,maxZoom:c,translateExtent:Rt,nodeExtent:p,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Qe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:M,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:a,fitViewResolver:null,connection:{..._r},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Dr,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Gy=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:f})=>Ol((u,h)=>{async function g(){let{nodeLookup:m,panZoom:w,fitViewOptions:x,fitViewResolver:M,width:p,height:y,minZoom:N,maxZoom:I}=h();w&&(await Ja({nodes:m,width:p,height:y,panZoom:w,minZoom:N,maxZoom:I},x),M?.resolve(!0),u({fitViewResolver:null}))}return{...nc({nodes:e,edges:t,width:r,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:f,defaultNodes:n,defaultEdges:o}),setNodes:m=>{let{nodeLookup:w,parentLookup:x,nodeOrigin:M,elevateNodesOnSelect:p,fitViewQueued:y}=h(),N=ko(m,w,x,{nodeOrigin:M,nodeExtent:f,elevateNodesOnSelect:p,checkEquality:!0});y&&N?(g(),u({nodes:m,nodesInitialized:N,fitViewQueued:!1,fitViewOptions:void 0})):u({nodes:m,nodesInitialized:N})},setEdges:m=>{let{connectionLookup:w,edgeLookup:x}=h();qr(w,x,m),u({edges:m})},setDefaultNodesAndEdges:(m,w)=>{if(m){let{setNodes:x}=h();x(m),u({hasDefaultNodes:!0})}if(w){let{setEdges:x}=h();x(w),u({hasDefaultEdges:!0})}},updateNodeInternals:m=>{let{triggerNodeChanges:w,nodeLookup:x,parentLookup:M,domNode:p,nodeOrigin:y,nodeExtent:N,debug:I,fitViewQueued:C}=h(),{changes:_,updatedInternals:O}=dl(m,x,M,p,y,N);O&&(ll(x,M,{nodeOrigin:y,nodeExtent:N}),C?(g(),u({fitViewQueued:!1,fitViewOptions:void 0})):u({}),_?.length>0&&(I&&console.log("React Flow: trigger node changes",_),w?.(_)))},updateNodePositions:(m,w=!1)=>{let x=[],M=[],{nodeLookup:p,triggerNodeChanges:y}=h();for(let[N,I]of m){let C=p.get(N),_=!!(C?.expandParent&&C?.parentId&&I?.position),O={id:N,type:"position",position:_?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:w};_&&C.parentId&&x.push({id:N,parentId:C.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width??0,height:I.measured.height??0}}),M.push(O)}if(x.length>0){let{parentLookup:N,nodeOrigin:I}=h(),C=No(x,p,N,I);M.push(...C)}y(M)},triggerNodeChanges:m=>{let{onNodesChange:w,setNodes:x,nodes:M,hasDefaultNodes:p,debug:y}=h();if(m?.length){if(p){let N=lc(m,M);x(N)}y&&console.log("React Flow: trigger node changes",m),w?.(m)}},triggerEdgeChanges:m=>{let{onEdgesChange:w,setEdges:x,edges:M,hasDefaultEdges:p,debug:y}=h();if(m?.length){if(p){let N=cc(m,M);x(N)}y&&console.log("React Flow: trigger edge changes",m),w?.(m)}},addSelectedNodes:m=>{let{multiSelectionActive:w,edgeLookup:x,nodeLookup:M,triggerNodeChanges:p,triggerEdgeChanges:y}=h();if(w){let N=m.map(I=>ht(I,!0));p(N);return}p(Ht(M,new Set([...m]),!0)),y(Ht(x))},addSelectedEdges:m=>{let{multiSelectionActive:w,edgeLookup:x,nodeLookup:M,triggerNodeChanges:p,triggerEdgeChanges:y}=h();if(w){let N=m.map(I=>ht(I,!0));y(N);return}y(Ht(x,new Set([...m]))),p(Ht(M,new Set,!0))},unselectNodesAndEdges:({nodes:m,edges:w}={})=>{let{edges:x,nodes:M,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:N}=h(),I=m||M,C=w||x,_=I.map(R=>{let A=p.get(R.id);return A&&(A.selected=!1),ht(R.id,!1)}),O=C.map(R=>ht(R.id,!1));y(_),N(O)},setMinZoom:m=>{let{panZoom:w,maxZoom:x}=h();w?.setScaleExtent([m,x]),u({minZoom:m})},setMaxZoom:m=>{let{panZoom:w,minZoom:x}=h();w?.setScaleExtent([x,m]),u({maxZoom:m})},setTranslateExtent:m=>{h().panZoom?.setTranslateExtent(m),u({translateExtent:m})},setPaneClickDistance:m=>{h().panZoom?.setClickDistance(m)},resetSelectedElements:()=>{let{edges:m,nodes:w,triggerNodeChanges:x,triggerEdgeChanges:M,elementsSelectable:p}=h();if(!p)return;let y=w.reduce((I,C)=>C.selected?[...I,ht(C.id,!1)]:I,[]),N=m.reduce((I,C)=>C.selected?[...I,ht(C.id,!1)]:I,[]);x(y),M(N)},setNodeExtent:m=>{let{nodes:w,nodeLookup:x,parentLookup:M,nodeOrigin:p,elevateNodesOnSelect:y,nodeExtent:N}=h();m[0][0]===N[0][0]&&m[0][1]===N[0][1]&&m[1][0]===N[1][0]&&m[1][1]===N[1][1]||(ko(w,x,M,{nodeOrigin:p,nodeExtent:m,elevateNodesOnSelect:y,checkEquality:!1}),u({nodeExtent:m}))},panBy:m=>{let{transform:w,width:x,height:M,panZoom:p,translateExtent:y}=h();return ul({delta:m,panZoom:p,transform:w,translateExtent:y,width:x,height:M})},cancelConnection:()=>{u({connection:{..._r}})},updateConnection:m=>{u({connection:m})},reset:()=>u({...nc()})}},Object.is);function Zr({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:c,nodeOrigin:d,nodeExtent:f,children:u}){let[h]=(0,D.useState)(()=>Gy({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:c,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:d,nodeExtent:f}));return(0,T.jsx)(fb,{value:h,children:(0,T.jsx)(zb,{children:u})})}function Xy({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:s,fitView:a,fitViewOptions:l,minZoom:c,maxZoom:d,nodeOrigin:f,nodeExtent:u}){return(0,D.useContext)(Do)?(0,T.jsx)(T.Fragment,{children:e}):(0,T.jsx)(Zr,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:d,nodeOrigin:f,nodeExtent:u,children:e})}var Wy={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function jy({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:f,onMoveEnd:u,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:M,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:N,onNodeDoubleClick:I,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:O,onNodesDelete:R,onEdgesDelete:A,onDelete:H,onSelectionChange:B,onSelectionDragStart:b,onSelectionDrag:S,onSelectionDragStop:v,onSelectionContextMenu:k,onSelectionStart:E,onSelectionEnd:P,onBeforeDelete:L,connectionMode:z,connectionLineType:V=Se.Bezier,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:X,deleteKeyCode:Z="Backspace",selectionKeyCode:$="Shift",selectionOnDrag:K=!1,selectionMode:Q=ct.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ne=kn()?"Meta":"Control",zoomActivationKeyCode:W=kn()?"Meta":"Control",snapToGrid:ue,snapGrid:re,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:_e,nodesDraggable:wt,nodesConnectable:Go,nodesFocusable:Xo,nodeOrigin:jt=sc,edgesFocusable:Wo,edgesReconnectable:Zt,elementsSelectable:Kt=!0,defaultViewport:jo=Nb,minZoom:vt=.5,maxZoom:_t=2,translateExtent:Rn=Rt,preventScrolling:Kf=!0,nodeExtent:Zo,defaultMarkerColor:Uf="#b1b1b7",zoomOnScroll:Qf=!0,zoomOnPinch:Jf=!0,panOnScroll:eh=!1,panOnScrollSpeed:th=.5,panOnScrollMode:nh=Fe.Free,zoomOnDoubleClick:oh=!0,panOnDrag:rh=!0,onPaneClick:ih,onPaneMouseEnter:sh,onPaneMouseMove:ah,onPaneMouseLeave:lh,onPaneScroll:ch,onPaneContextMenu:dh,paneClickDistance:Ii=0,nodeClickDistance:uh=0,children:fh,onReconnect:hh,onReconnectStart:ph,onReconnectEnd:mh,onEdgeContextMenu:gh,onEdgeDoubleClick:bh,onEdgeMouseEnter:yh,onEdgeMouseMove:xh,onEdgeMouseLeave:wh,reconnectRadius:vh=10,onNodesChange:_h,onEdgesChange:Eh,noDragClassName:kh="nodrag",noWheelClassName:Nh="nowheel",noPanClassName:Ti="nopan",fitView:Pi,fitViewOptions:Di,connectOnClick:Sh,attributionPosition:Ch,proOptions:Mh,defaultEdgeOptions:Ih,elevateNodesOnSelect:Th,elevateEdgesOnSelect:Ph,disableKeyboardA11y:Oi=!1,autoPanOnConnect:Dh,autoPanOnNodeDrag:Oh,autoPanSpeed:Rh,connectionRadius:zh,isValidConnection:Ah,onError:Lh,style:Hh,id:Ri,nodeDragThreshold:Bh,viewport:$h,onViewportChange:Vh,width:Fh,height:qh,colorMode:Yh="light",debug:Gh,onScroll:zi,...Xh},Wh){let Ko=Ri||"1",jh=Ib(Yh),Zh=(0,D.useCallback)(Ai=>{Ai.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),zi?.(Ai)},[zi]);return(0,T.jsx)("div",{"data-testid":"rf__wrapper",...Xh,onScroll:Zh,style:{...Hh,...Wy},ref:Wh,className:le(["react-flow",r,jh]),id:Ri,children:(0,T.jsxs)(Xy,{nodes:e,edges:t,width:Fh,height:qh,fitView:Pi,fitViewOptions:Di,minZoom:vt,maxZoom:_t,nodeOrigin:jt,nodeExtent:Zo,children:[(0,T.jsx)(Yy,{onInit:c,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:M,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:N,onNodeDoubleClick:I,nodeTypes:i,edgeTypes:s,connectionLineType:V,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:X,selectionKeyCode:$,selectionOnDrag:K,selectionMode:Q,deleteKeyCode:Z,multiSelectionKeyCode:ne,panActivationKeyCode:oe,zoomActivationKeyCode:W,onlyRenderVisibleElements:me,defaultViewport:jo,translateExtent:Rn,minZoom:vt,maxZoom:_t,preventScrolling:Kf,zoomOnScroll:Qf,zoomOnPinch:Jf,zoomOnDoubleClick:oh,panOnScroll:eh,panOnScrollSpeed:th,panOnScrollMode:nh,panOnDrag:rh,onPaneClick:ih,onPaneMouseEnter:sh,onPaneMouseMove:ah,onPaneMouseLeave:lh,onPaneScroll:ch,onPaneContextMenu:dh,paneClickDistance:Ii,nodeClickDistance:uh,onSelectionContextMenu:k,onSelectionStart:E,onSelectionEnd:P,onReconnect:hh,onReconnectStart:ph,onReconnectEnd:mh,onEdgeContextMenu:gh,onEdgeDoubleClick:bh,onEdgeMouseEnter:yh,onEdgeMouseMove:xh,onEdgeMouseLeave:wh,reconnectRadius:vh,defaultMarkerColor:Uf,noDragClassName:kh,noWheelClassName:Nh,noPanClassName:Ti,rfId:Ko,disableKeyboardA11y:Oi,nodeExtent:Zo,viewport:$h,onViewportChange:Vh}),(0,T.jsx)(Mb,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:wt,nodesConnectable:Go,nodesFocusable:Xo,edgesFocusable:Wo,edgesReconnectable:Zt,elementsSelectable:Kt,elevateNodesOnSelect:Th,elevateEdgesOnSelect:Ph,minZoom:vt,maxZoom:_t,nodeExtent:Zo,onNodesChange:_h,onEdgesChange:Eh,snapToGrid:ue,snapGrid:re,connectionMode:z,translateExtent:Rn,connectOnClick:Sh,defaultEdgeOptions:Ih,fitView:Pi,fitViewOptions:Di,onNodesDelete:R,onEdgesDelete:A,onDelete:H,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:O,onSelectionDrag:S,onSelectionDragStart:b,onSelectionDragStop:v,onMove:d,onMoveStart:f,onMoveEnd:u,noPanClassName:Ti,nodeOrigin:jt,rfId:Ko,autoPanOnConnect:Dh,autoPanOnNodeDrag:Oh,autoPanSpeed:Rh,onError:Lh,connectionRadius:zh,isValidConnection:Ah,selectNodesOnDrag:_e,nodeDragThreshold:Bh,onBeforeDelete:L,paneClickDistance:Ii,debug:Gh}),(0,T.jsx)(kb,{onSelectionChange:B}),fh,(0,T.jsx)(xb,{proOptions:Mh,position:Ch}),(0,T.jsx)(bb,{rfId:Ko,disableKeyboardA11y:Oi})]})})}var $t=dc(jy);function Rc(e){let[t,n]=(0,D.useState)(e),o=(0,D.useCallback)(r=>n(i=>lc(r,i)),[]);return[t,n,o]}function zc(e){let[t,n]=(0,D.useState)(e),o=(0,D.useCallback)(r=>n(i=>cc(r,i)),[]);return[t,n,o]}var Zy=e=>t=>{if(!e.includeHiddenNodes)return t.nodesInitialized;if(t.nodeLookup.size===0)return!1;for(let[,{internals:n}]of t.nodeLookup)if(n.handleBounds===void 0||!yo(n.userNode))return!1;return!0};function Ac(e={includeHiddenNodes:!1}){return te(Zy(e))}var hC=ve.error014();function Ky({dimensions:e,lineWidth:t,variant:n,className:o}){return(0,T.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:le(["react-flow__background-pattern",n,o])})}function Uy({radius:e,className:t}){return(0,T.jsx)("circle",{cx:e,cy:e,r:e,className:le(["react-flow__background-pattern","dots",t])})}var Je;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Je||(Je={}));var Qy={[Je.Dots]:1,[Je.Lines]:1,[Je.Cross]:6},Jy=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Lc({id:e,variant:t=Je.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:s,bgColor:a,style:l,className:c,patternClassName:d}){let f=(0,D.useRef)(null),{transform:u,patternId:h}=te(Jy,ae),g=o||Qy[t],m=t===Je.Dots,w=t===Je.Cross,x=Array.isArray(n)?n:[n,n],M=[x[0]*u[2]||1,x[1]*u[2]||1],p=g*u[2],y=Array.isArray(i)?i:[i,i],N=w?[p,p]:M,I=[y[0]*u[2]||1+N[0]/2,y[1]*u[2]||1+N[1]/2],C=`${h}${e||""}`;return(0,T.jsxs)("svg",{className:le(["react-flow__background",c]),style:{...l,...Oo,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[(0,T.jsx)("pattern",{id:C,x:u[0]%M[0],y:u[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`,children:m?(0,T.jsx)(Uy,{radius:p/2,className:d}):(0,T.jsx)(Ky,{dimensions:N,lineWidth:r,variant:t,className:d})}),(0,T.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}Lc.displayName="Background";var Vt=(0,D.memo)(Lc);function ex(){return(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,T.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tx(){return(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,T.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function nx(){return(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,T.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ox(){return(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,T.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function rx(){return(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,T.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function To({children:e,className:t,...n}){return(0,T.jsx)("button",{type:"button",className:le(["react-flow__controls-button",t]),...n,children:e})}var ix=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Hc({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:c,children:d,position:f="bottom-left",orientation:u="vertical","aria-label":h="React Flow controls"}){let g=se(),{isInteractive:m,minZoomReached:w,maxZoomReached:x}=te(ix,ae),{zoomIn:M,zoomOut:p,fitView:y}=Cn(),N=()=>{M(),i?.()},I=()=>{p(),s?.()},C=()=>{y(r),a?.()},_=()=>{g.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l?.(!m)};return(0,T.jsxs)(pt,{className:le(["react-flow__controls",u==="horizontal"?"horizontal":"vertical",c]),position:f,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(To,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:(0,T.jsx)(ex,{})}),(0,T.jsx)(To,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:(0,T.jsx)(tx,{})})]}),n&&(0,T.jsx)(To,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view",children:(0,T.jsx)(nx,{})}),o&&(0,T.jsx)(To,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?(0,T.jsx)(rx,{}):(0,T.jsx)(ox,{})}),d]})}Hc.displayName="Controls";var Bc=(0,D.memo)(Hc);function sx({id:e,x:t,y:n,width:o,height:r,style:i,color:s,strokeColor:a,strokeWidth:l,className:c,borderRadius:d,shapeRendering:f,selected:u,onClick:h}){let{background:g,backgroundColor:m}=i||{},w=s||g||m;return(0,T.jsx)("rect",{className:le(["react-flow__minimap-node",{selected:u},c]),x:t,y:n,rx:d,ry:d,width:o,height:r,style:{fill:w,stroke:a,strokeWidth:l},shapeRendering:f,onClick:h?x=>h(x,e):void 0})}var ax=(0,D.memo)(sx),lx=e=>e.nodes.map(t=>t.id),Xr=e=>e instanceof Function?e:()=>e;function cx({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=ax,onClick:s}){let a=te(lx,ae),l=Xr(t),c=Xr(e),d=Xr(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return(0,T.jsx)(T.Fragment,{children:a.map(u=>(0,T.jsx)(ux,{id:u,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:s,shapeRendering:f},u))})}function dx({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:l}){let{node:c,x:d,y:f,width:u,height:h}=te(g=>{let{internals:m}=g.nodeLookup.get(e),w=m.userNode,{x,y:M}=m.positionAbsolute,{width:p,height:y}=Ae(w);return{node:w,x,y:M,width:p,height:y}},ae);return!c||c.hidden||!yo(c)?null:(0,T.jsx)(a,{x:d,y:f,width:u,height:h,style:c.style,selected:!!c.selected,className:o(c),color:t(c),borderRadius:r,strokeColor:n(c),strokeWidth:i,shapeRendering:s,onClick:l,id:c.id})}var ux=(0,D.memo)(dx),fx=(0,D.memo)(cx),hx=200,px=150,mx=e=>!e.hidden,gx=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Tr(zt(e.nodeLookup,{filter:mx}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},bx="react-flow__minimap-desc";function $c({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:f,position:u="bottom-right",onClick:h,onNodeClick:g,pannable:m=!1,zoomable:w=!1,ariaLabel:x="React Flow mini map",inversePan:M,zoomStep:p=10,offsetScale:y=5}){let N=se(),I=(0,D.useRef)(null),{boundingRect:C,viewBB:_,rfId:O,panZoom:R,translateExtent:A,flowWidth:H,flowHeight:B}=te(gx,ae),b=e?.width??hx,S=e?.height??px,v=C.width/b,k=C.height/S,E=Math.max(v,k),P=E*b,L=E*S,z=y*E,V=C.x-(P-C.width)/2-z,q=C.y-(L-C.height)/2-z,F=P+z*2,X=L+z*2,Z=`${bx}-${O}`,$=(0,D.useRef)(0),K=(0,D.useRef)();$.current=E,(0,D.useEffect)(()=>{if(I.current&&R)return K.current=yl({domNode:I.current,panZoom:R,getTransform:()=>N.getState().transform,getViewScale:()=>$.current}),()=>{K.current?.destroy()}},[R]),(0,D.useEffect)(()=>{K.current?.update({translateExtent:A,width:H,height:B,inversePan:M,pannable:m,zoomStep:p,zoomable:w})},[m,w,M,p,A,H,B]);let Q=h?ne=>{let[W,ue]=K.current?.pointer(ne)||[0,0];h(ne,{x:W,y:ue})}:void 0,oe=g?(0,D.useCallback)((ne,W)=>{let ue=N.getState().nodeLookup.get(W).internals.userNode;g(ne,ue)},[]):void 0;return(0,T.jsx)(pt,{position:u,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*E:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:le(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,T.jsxs)("svg",{width:b,height:S,viewBox:`${V} ${q} ${F} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:I,onClick:Q,children:[x&&(0,T.jsx)("title",{id:Z,children:x}),(0,T.jsx)(fx,{onClick:oe,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:a}),(0,T.jsx)("path",{className:"react-flow__minimap-mask",d:`M${V-z},${q-z}h${F+z*2}v${X+z*2}h${-F-z*2}z
        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$c.displayName="MiniMap";var Vc=(0,D.memo)($c);function yx({nodeId:e,position:t,variant:n=ut.Handle,className:o,style:r={},children:i,color:s,minWidth:a=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:u,shouldResize:h,onResizeStart:g,onResize:m,onResizeEnd:w}){let x=pc(),M=typeof e=="string"?e:x,p=se(),y=(0,D.useRef)(null),N=n===ut.Line?"right":"bottom-right",I=t??N,C=(0,D.useRef)(null);(0,D.useEffect)(()=>{if(!(!y.current||!M))return C.current||(C.current=El({domNode:y.current,nodeId:M,getStoreItems:()=>{let{nodeLookup:A,transform:H,snapGrid:B,snapToGrid:b,nodeOrigin:S,domNode:v}=p.getState();return{nodeLookup:A,transform:H,snapGrid:B,snapToGrid:b,nodeOrigin:S,paneDomNode:v}},onChange:(A,H)=>{let{triggerNodeChanges:B,nodeLookup:b,parentLookup:S,nodeOrigin:v}=p.getState(),k=[],E={x:A.x,y:A.y},P=b.get(M);if(P&&P.expandParent&&P.parentId){let L=P.origin??v,z=A.width??P.measured.width??0,V=A.height??P.measured.height??0,q={id:P.id,parentId:P.parentId,rect:{width:z,height:V,...Or({x:A.x??P.position.x,y:A.y??P.position.y},{width:z,height:V},P.parentId,b,L)}},F=No([q],b,S,v);k.push(...F),E.x=A.x?Math.max(L[0]*z,A.x):void 0,E.y=A.y?Math.max(L[1]*V,A.y):void 0}if(E.x!==void 0&&E.y!==void 0){let L={id:M,type:"position",position:{...E}};k.push(L)}if(A.width!==void 0&&A.height!==void 0){let z={id:M,type:"dimensions",resizing:!0,setAttributes:u?u==="horizontal"?"width":"height":!0,dimensions:{width:A.width,height:A.height}};k.push(z)}for(let L of H){let z={...L,type:"position"};k.push(z)}B(k)},onEnd:({width:A,height:H})=>{let B={id:M,type:"dimensions",resizing:!1,dimensions:{width:A,height:H}};p.getState().triggerNodeChanges([B])}})),C.current.update({controlPosition:I,boundaries:{minWidth:a,minHeight:l,maxWidth:c,maxHeight:d},keepAspectRatio:f,resizeDirection:u,onResizeStart:g,onResize:m,onResizeEnd:w,shouldResize:h}),()=>{C.current?.destroy()}},[I,a,l,c,d,f,g,m,w,h]);let _=I.split("-"),O=n===ut.Line?"borderColor":"backgroundColor",R=s?{...r,[O]:s}:r;return(0,T.jsx)("div",{className:le(["react-flow__resize-control","nodrag",..._,n,o]),ref:y,style:R,children:i})}var pC=(0,D.memo)(yx);var mt=J(ie()),Fc=e=>(0,mt.jsxs)($t,{children:[(0,mt.jsx)(Hi,{intent:"error",shape:"square",children:(0,mt.jsxs)($i,{children:[(0,mt.jsx)(Bi,{children:Pe.schemaDesigner.loadError}),e.errorStr]})}),(0,mt.jsx)(Vt,{})]});var Xt=J(Ee());var Ft={},qc=()=>{Ft.instance=Cn(),Ft.store=se()};var gi=J(hf());function pf(e,t,n={x:100,y:100}){let o=new gi.default.graphlib.Graph;o.setDefaultEdgeLabel(()=>({})),o.setGraph({nodesep:n.y,ranksep:n.x,ranker:"tight-tree",rankdir:"LR"});let r=[];e.forEach(i=>{Sr(i,e,t).length<1&&r.push(i),o.setNode(i.id,{width:i.measured.width,height:i.measured.height})}),t.forEach(i=>o.setEdge(i.source,i.target)),o.setNode("#root",{width:1,height:1});for(let i of r)o.setEdge("#root",i.id);return gi.default.layout(o),[e.map(i=>{let s=o.node(i.id);return i.position.x=s.x-i.measured.width/2,i.position.y=s.y-i.measured.height/2,i}),t]}var $o=class{constructor(t,n,o,r){this._setEdgesCb=t;this._setNodesCb=n;this._flowEdgeCb=o;this._flowNodeCb=r}async handleEdgeChanges(t){this._flowEdgeCb(t)}async handleNodeChanges(t){this._flowNodeCb(t)}async autoLayoutNodes(t=!0){let n=Ft.instance?.getNodes(),o=Ft.instance?.getEdges(),[r,i]=pf(n,o);this._setNodesCb(r),this._setEdgesCb(i),t&&await Ft.instance?.fitView({nodes:r.map(s=>({id:s.id}))})}};var $f=J(Ee());var Pf=J(Ee());var Tf=J(Qh());var _i="-",Mv=e=>{let t=Tv(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:s=>{let a=s.split(_i);return a[0]===""&&a.length!==1&&a.shift(),xf(a,t)||Iv(s)},getConflictingClassGroupIds:(s,a)=>{let l=n[s]||[];return a&&o[s]?[...l,...o[s]]:l}}},xf=(e,t)=>{if(e.length===0)return t.classGroupId;let n=e[0],o=t.nextPart.get(n),r=o?xf(e.slice(1),o):void 0;if(r)return r;if(t.validators.length===0)return;let i=e.join(_i);return t.validators.find(({validator:s})=>s(i))?.classGroupId},mf=/^\[(.+)\]$/,Iv=e=>{if(mf.test(e)){let t=mf.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Tv=e=>{let{theme:t,classGroups:n}=e,o={nextPart:new Map,validators:[]};for(let r in n)xi(n[r],o,r,t);return o},xi=(e,t,n,o)=>{e.forEach(r=>{if(typeof r=="string"){let i=r===""?t:gf(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(Pv(r)){xi(r(o),t,n,o);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,s])=>{xi(s,gf(t,i),n,o)})})},gf=(e,t)=>{let n=e;return t.split(_i).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},Pv=e=>e.isThemeGetter,Dv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,o=new Map,r=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,o=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=o.get(i))!==void 0)return r(i,s),s},set(i,s){n.has(i)?n.set(i,s):r(i,s)}}},wi="!",vi=":",Ov=vi.length,Rv=e=>{let{prefix:t,experimentalParseClassName:n}=e,o=r=>{let i=[],s=0,a=0,l=0,c;for(let g=0;g<r.length;g++){let m=r[g];if(s===0&&a===0){if(m===vi){i.push(r.slice(l,g)),l=g+Ov;continue}if(m==="/"){c=g;continue}}m==="["?s++:m==="]"?s--:m==="("?a++:m===")"&&a--}let d=i.length===0?r:r.substring(l),f=zv(d),u=f!==d,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:h}};if(t){let r=t+vi,i=o;o=s=>s.startsWith(r)?i(s.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){let r=o;o=i=>n({className:i,parseClassName:r})}return o},zv=e=>e.endsWith(wi)?e.substring(0,e.length-1):e.startsWith(wi)?e.substring(1):e,Av=e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;let r=[],i=[];return o.forEach(s=>{s[0]==="["||t[s]?(r.push(...i.sort(),s),i=[]):i.push(s)}),r.push(...i.sort()),r}},Lv=e=>({cache:Dv(e.cacheSize),parseClassName:Rv(e),sortModifiers:Av(e),...Mv(e)}),Hv=/\s+/,Bv=(e,t)=>{let{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:r,sortModifiers:i}=t,s=[],a=e.trim().split(Hv),l="";for(let c=a.length-1;c>=0;c-=1){let d=a[c],{isExternal:f,modifiers:u,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:m}=n(d);if(f){l=d+(l.length>0?" "+l:l);continue}let w=!!m,x=o(w?g.substring(0,m):g);if(!x){if(!w){l=d+(l.length>0?" "+l:l);continue}if(x=o(g),!x){l=d+(l.length>0?" "+l:l);continue}w=!1}let M=i(u).join(":"),p=h?M+wi:M,y=p+x;if(s.includes(y))continue;s.push(y);let N=r(x,w);for(let I=0;I<N.length;++I){let C=N[I];s.push(p+C)}l=d+(l.length>0?" "+l:l)}return l};function $v(){let e=0,t,n,o="";for(;e<arguments.length;)(t=arguments[e++])&&(n=wf(t))&&(o&&(o+=" "),o+=n);return o}var wf=e=>{if(typeof e=="string")return e;let t,n="";for(let o=0;o<e.length;o++)e[o]&&(t=wf(e[o]))&&(n&&(n+=" "),n+=t);return n};function Vv(e,...t){let n,o,r,i=s;function s(l){let c=t.reduce((d,f)=>f(d),e());return n=Lv(c),o=n.cache.get,r=n.cache.set,i=a,a(l)}function a(l){let c=o(l);if(c)return c;let d=Bv(l,n);return r(l,d),d}return function(){return i($v.apply(null,arguments))}}var he=e=>{let t=n=>n[e]||[];return t.isThemeGetter=!0,t},vf=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,_f=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Fv=/^\d+\/\d+$/,qv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qt=e=>Fv.test(e),ee=e=>!!e&&!Number.isNaN(Number(e)),et=e=>!!e&&Number.isInteger(Number(e)),bi=e=>e.endsWith("%")&&ee(e.slice(0,-1)),Ye=e=>qv.test(e),jv=()=>!0,Zv=e=>Yv.test(e)&&!Gv.test(e),Ef=()=>!1,Kv=e=>Xv.test(e),Uv=e=>Wv.test(e),Qv=e=>!Y(e)&&!G(e),Jv=e=>Yt(e,Sf,Ef),Y=e=>vf.test(e),yt=e=>Yt(e,Cf,Zv),yi=e=>Yt(e,r_,ee),bf=e=>Yt(e,kf,Ef),e_=e=>Yt(e,Nf,Uv),Vo=e=>Yt(e,Mf,Kv),G=e=>_f.test(e),Pn=e=>Gt(e,Cf),t_=e=>Gt(e,i_),yf=e=>Gt(e,kf),n_=e=>Gt(e,Sf),o_=e=>Gt(e,Nf),Fo=e=>Gt(e,Mf,!0),Yt=(e,t,n)=>{let o=vf.exec(e);return o?o[1]?t(o[1]):n(o[2]):!1},Gt=(e,t,n=!1)=>{let o=_f.exec(e);return o?o[1]?t(o[1]):n:!1},kf=e=>e==="position"||e==="percentage",Nf=e=>e==="image"||e==="url",Sf=e=>e==="length"||e==="size"||e==="bg-size",Cf=e=>e==="length",r_=e=>e==="number",i_=e=>e==="family-name",Mf=e=>e==="shadow";var s_=()=>{let e=he("color"),t=he("font"),n=he("text"),o=he("font-weight"),r=he("tracking"),i=he("leading"),s=he("breakpoint"),a=he("container"),l=he("spacing"),c=he("radius"),d=he("shadow"),f=he("inset-shadow"),u=he("text-shadow"),h=he("drop-shadow"),g=he("blur"),m=he("perspective"),w=he("aspect"),x=he("ease"),M=he("animate"),p=()=>["auto","avoid","all","avoid-page","page","left","right","column"],y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...y(),G,Y],I=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],_=()=>[G,Y,l],O=()=>[qt,"full","auto",..._()],R=()=>[et,"none","subgrid",G,Y],A=()=>["auto",{span:["full",et,G,Y]},et,G,Y],H=()=>[et,"auto",G,Y],B=()=>["auto","min","max","fr",G,Y],b=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],S=()=>["start","end","center","stretch","center-safe","end-safe"],v=()=>["auto",..._()],k=()=>[qt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],E=()=>[e,G,Y],P=()=>[...y(),yf,bf,{position:[G,Y]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",n_,Jv,{size:[G,Y]}],V=()=>[bi,Pn,yt],q=()=>["","none","full",c,G,Y],F=()=>["",ee,Pn,yt],X=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[ee,bi,yf,bf],K=()=>["","none",g,G,Y],Q=()=>["none",ee,G,Y],oe=()=>["none",ee,G,Y],ne=()=>[ee,G,Y],W=()=>[qt,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ye],breakpoint:[Ye],color:[jv],container:[Ye],"drop-shadow":[Ye],ease:["in","out","in-out"],font:[Qv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ye],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ye],shadow:[Ye],spacing:["px",ee],text:[Ye],"text-shadow":[Ye],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qt,Y,G,w]}],container:["container"],columns:[{columns:[ee,Y,G,a]}],"break-after":[{"break-after":p()}],"break-before":[{"break-before":p()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[et,"auto",G,Y]}],basis:[{basis:[qt,"full","auto",a,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ee,qt,"auto","initial","none",Y]}],grow:[{grow:["",ee,G,Y]}],shrink:[{shrink:["",ee,G,Y]}],order:[{order:[et,"first","last","none",G,Y]}],"grid-cols":[{"grid-cols":R()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":R()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...b(),"normal"]}],"justify-items":[{"justify-items":[...S(),"normal"]}],"justify-self":[{"justify-self":["auto",...S()]}],"align-content":[{content:["normal",...b()]}],"align-items":[{items:[...S(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...S(),{baseline:["","last"]}]}],"place-content":[{"place-content":b()}],"place-items":[{"place-items":[...S(),"baseline"]}],"place-self":[{"place-self":["auto",...S()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:v()}],mx:[{mx:v()}],my:[{my:v()}],ms:[{ms:v()}],me:[{me:v()}],mt:[{mt:v()}],mr:[{mr:v()}],mb:[{mb:v()}],ml:[{ml:v()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:k()}],w:[{w:[a,"screen",...k()]}],"min-w":[{"min-w":[a,"screen","none",...k()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...k()]}],h:[{h:["screen",...k()]}],"min-h":[{"min-h":["screen","none",...k()]}],"max-h":[{"max-h":["screen",...k()]}],"font-size":[{text:["base",n,Pn,yt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,G,yi]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bi,Y]}],"font-family":[{font:[t_,Y,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,G,Y]}],"line-clamp":[{"line-clamp":[ee,"none",G,yi]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",G,Y]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",G,Y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[ee,"from-font","auto",G,yt]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[ee,"auto",G,Y]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",G,Y]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",G,Y]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:P()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},et,G,Y],radial:["",G,Y],conic:[et,G,Y]},o_,e_]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:F()}],"border-w-x":[{"border-x":F()}],"border-w-y":[{"border-y":F()}],"border-w-s":[{"border-s":F()}],"border-w-e":[{"border-e":F()}],"border-w-t":[{"border-t":F()}],"border-w-r":[{"border-r":F()}],"border-w-b":[{"border-b":F()}],"border-w-l":[{"border-l":F()}],"divide-x":[{"divide-x":F()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":F()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ee,G,Y]}],"outline-w":[{outline:["",ee,Pn,yt]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",d,Fo,Vo]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",f,Fo,Vo]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[ee,yt]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":F()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",u,Fo,Vo]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[ee,G,Y]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ee]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[G,Y]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":y()}],"mask-image-conic-pos":[{"mask-conic":[ee]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:P()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",G,Y]}],filter:[{filter:["","none",G,Y]}],blur:[{blur:K()}],brightness:[{brightness:[ee,G,Y]}],contrast:[{contrast:[ee,G,Y]}],"drop-shadow":[{"drop-shadow":["","none",h,Fo,Vo]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",ee,G,Y]}],"hue-rotate":[{"hue-rotate":[ee,G,Y]}],invert:[{invert:["",ee,G,Y]}],saturate:[{saturate:[ee,G,Y]}],sepia:[{sepia:["",ee,G,Y]}],"backdrop-filter":[{"backdrop-filter":["","none",G,Y]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[ee,G,Y]}],"backdrop-contrast":[{"backdrop-contrast":[ee,G,Y]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ee,G,Y]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ee,G,Y]}],"backdrop-invert":[{"backdrop-invert":["",ee,G,Y]}],"backdrop-opacity":[{"backdrop-opacity":[ee,G,Y]}],"backdrop-saturate":[{"backdrop-saturate":[ee,G,Y]}],"backdrop-sepia":[{"backdrop-sepia":["",ee,G,Y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",G,Y]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ee,"initial",G,Y]}],ease:[{ease:["linear","initial",x,G,Y]}],delay:[{delay:[ee,G,Y]}],animate:[{animate:["none",M,G,Y]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,G,Y]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:ne()}],"skew-x":[{"skew-x":ne()}],"skew-y":[{"skew-y":ne()}],transform:[{transform:[G,Y,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:W()}],"translate-x":[{"translate-x":W()}],"translate-y":[{"translate-y":W()}],"translate-z":[{"translate-z":W()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",G,Y]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",G,Y]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[ee,Pn,yt,yi]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var If=Vv(s_);function be(...e){return If((0,Tf.clsx)(e))}var Df=J(ie()),Ei=(0,Pf.forwardRef)(({className:e,selected:t,...n},o)=>(0,Df.jsx)("div",{ref:o,className:be("relative rounded-md border bg-card p-5 text-card-foreground",e,t?"border-muted-foreground shadow-lg":"","hover:ring-1"),tabIndex:0,...n}));Ei.displayName="BaseNode";var Ge=J(Ee());var Le=J(ie()),a_=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("div",{className:"relative w-full overflow-auto",children:(0,Le.jsx)("table",{ref:n,className:be("w-full caption-bottom text-sm",e),...t})}));a_.displayName="Table";var l_=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("thead",{ref:n,className:be("[&_tr]:border-b",e),...t}));l_.displayName="TableHeader";var ki=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("tbody",{ref:n,className:be("[&_tr:last-child]:border-0",e),...t}));ki.displayName="TableBody";var c_=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("tfoot",{ref:n,className:be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));c_.displayName="TableFooter";var Ni=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("tr",{ref:n,className:be("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ni.displayName="TableRow";var d_=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("th",{ref:n,className:be("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));d_.displayName="TableHead";var Si=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("td",{ref:n,className:be("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Si.displayName="TableCell";var u_=Ge.forwardRef(({className:e,...t},n)=>(0,Le.jsx)("caption",{ref:n,className:be("mt-4 text-sm text-muted-foreground",e),...t}));u_.displayName="TableCaption";var xt=J(ie()),Of=({children:e,headerColor:t,textColor:n})=>(0,xt.jsx)("h2",{style:{backgroundColor:t||"#e8e8e8",color:n},className:"rounded-tl-md rounded-tr-md bg-secondary p-2 text-center text-sm text-muted-foreground",children:e}),Rf=({children:e})=>(0,xt.jsx)("table",{className:"w-full border-spacing-10 overflow-visible",children:(0,xt.jsx)(ki,{children:e})}),zf=({children:e,className:t})=>(0,xt.jsx)(Ni,{className:`relative text-xs ${t||""}`,children:e}),Ci=({className:e,children:t})=>(0,xt.jsx)(Si,{className:e,children:t}),Af=({className:e,selected:t,children:n})=>(0,xt.jsx)(Ei,{className:e,selected:t,children:n});var Bf=J(Ee());var Lf=J(Ee());var Hf=J(ie()),Mi=(0,Lf.forwardRef)(({className:e,children:t,...n},o)=>(0,Hf.jsx)(Bt,{ref:o,...n,className:be("h-[11px] w-[11px] rounded-full border border-slate-300 bg-slate-100 transition dark:border-secondary dark:bg-secondary",e),...n,children:t}));Mi.displayName="BaseHandle";var Dn=J(ie()),f_={top:"flex-col",right:"flex-row-reverse justify-end",bottom:"flex-col-reverse justify-end",left:"flex-row"},qo=(0,Bf.forwardRef)(({className:e,labelClassName:t,handleClassName:n,title:o,position:r,isPrimaryKey:i,...s},a)=>(0,Dn.jsxs)("div",{ref:a,title:o,className:be("relative flex items-center",f_[r],e),children:[(0,Dn.jsx)(Mi,{position:r,className:n,...s}),(0,Dn.jsx)("label",{className:be("px-3 text-foreground",t),children:o+(i?"\u{1F511}":"")})]}));qo.displayName="LabeledHandle";var He=J(ie()),h_=(0,$f.memo)(({data:e,selected:t})=>(0,He.jsxs)(Af,{className:"p-0",selected:t,children:[(0,He.jsx)(Of,{textColor:e.textColor,headerColor:e.headerColor,children:e.label}),(0,He.jsx)(Rf,{children:e.schema.map(n=>(0,He.jsxs)(zf,{children:[(0,He.jsx)(Ci,{className:"pl-0 pr-6 font-light",children:(0,He.jsx)(qo,{id:n.title,title:n.title,type:"target",position:j.Left,isPrimaryKey:n.isPrimaryKey})}),(0,He.jsx)(Ci,{className:"pr-0 font-thin",children:(0,He.jsx)(qo,{id:n.title,title:n.type,type:"source",position:j.Right,className:"p-0",handleClassName:"p-0",labelClassName:"p-0 w-full pr-3 text-right"})})]},n.title))})]})),Vf={tableSchema:h_};var Ie=J(ie()),qf=zn({tableCell:{textAlign:"center",padding:"4px"},container:{background:"var(--xy-node-header-background)",opacity:"50%",borderRadius:"4px",padding:"2px","&:hover":{opacity:"100%"}}}),p_={[Pe.schemaDesigner.noData]:"#00000000"},Ff=e=>{let t=qf(),n=[];for(let o in e)n.push((0,Ie.jsxs)("tr",{children:[(0,Ie.jsx)("td",{className:t.tableCell,children:o}),(0,Ie.jsx)("td",{className:t.tableCell,style:{color:e[o]},children:"\u25A0"})]},`legend-entry-${o}`));return n},Yf=e=>{let{entries:t}=e,n=qf();return(0,Ie.jsx)("div",{className:n.container,children:(0,Ie.jsxs)("table",{children:[(0,Ie.jsx)("thead",{children:(0,Ie.jsxs)("tr",{children:[(0,Ie.jsx)("th",{className:n.tableCell,children:Pe.schemaDesigner.legendName}),(0,Ie.jsx)("th",{className:n.tableCell,children:Pe.schemaDesigner.legendColor})]})}),(0,Ie.jsx)("tbody",{children:Object.keys(t).length?Ff(t):Ff(p_)})]})})};var Te=J(ie()),Gf=e=>{let{state:t,themeKind:n}=e.context,[o,r,i]=Rc(t.nodes),[s,a,l]=zc(t.edges),[c,d]=(0,Xt.useState)(!0);(0,Xt.useEffect)(()=>{r(t.nodes)},[t.nodes]),(0,Xt.useEffect)(()=>{a(t.edges)},[t.edges]);let f=new $o(a,r,l,i),u=Ac({includeHiddenNodes:!0});return(0,Xt.useEffect)(()=>{u&&(f.autoLayoutNodes(c).catch(()=>{}),c&&d(!1))},[u]),(0,Te.jsxs)($t,{nodes:o,edges:s,nodeTypes:Vf,fitView:!0,colorMode:n===2||n===3?"dark":"light",connectionLineType:Se.SmoothStep,onNodesChange:h=>void f.handleNodeChanges(h),onEdgesChange:h=>void f.handleEdgeChanges(h),nodesConnectable:!1,proOptions:{hideAttribution:!0},minZoom:.1,children:[(0,Te.jsx)(qc,{}),(0,Te.jsx)(pt,{position:"top-left",children:(0,Te.jsx)(Yf,{entries:t.legend})}),(0,Te.jsxs)(pt,{position:"top-right",children:[(0,Te.jsx)(Uo,{onClick:()=>e.context.refresh(),children:Pe.schemaDesigner.refresh}),(0,Te.jsx)(Uo,{onClick:()=>f.autoLayoutNodes(),children:Pe.schemaDesigner.autoLayout})]}),(0,Te.jsx)(Vc,{pannable:!0,zoomable:!0}),(0,Te.jsx)(Bc,{}),(0,Te.jsx)(Vt,{})]})};var On=J(ie()),m_=zn({centerSpinner:{top:"50%",position:"relative",transform:"translate(0%, -50%)"}}),Xf=()=>{let e=m_();return(0,On.jsxs)($t,{children:[(0,On.jsx)(Li,{className:e.centerSpinner,labelPosition:"above",label:Pe.schemaDesigner.loading,size:"huge"}),(0,On.jsx)(Vt,{})]})};var Wt=J(ie());function g_(e){switch(e.state.schemaState){case"loading":return(0,Wt.jsx)(Xf,{});case"error":return(0,Wt.jsx)(Fc,{errorStr:e.state.errorStr});case"loaded":return(0,Wt.jsx)(Gf,{context:e});default:return}}var jf=()=>{let e=(0,Wf.useContext)(Jo);if(e)return(0,Wt.jsx)("div",{className:"h-full w-full",children:(0,Wt.jsx)(Zr,{children:g_(e)})})};var Yo=J(ie());Zf.default.createRoot(document.getElementById("root")).render((0,Yo.jsx)(Vi,{children:(0,Yo.jsx)(Zi,{children:(0,Yo.jsx)(jf,{})})}));
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
